<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!--
 * 전자입찰 > 입찰공고 Mapper
 *
 * <pre>
 * sqlmap.oda.oep.elbi 
 *    |_ OepElbiBidPblancMapper.xml
 * 
 * </pre>
 * @date : 2015. 02. 16. 오후 05:43:21
 * @version : 1.0
 * @author : 은우소프트 하성윤
-->
<mapper namespace="com.eunwoosoft.opro.ebid.dao.OproEbidPblancDao">	
	<!--  
     * <pre>
     * 1. 개요 : 진행중인 입찰공고 목록 조회_페이징 
     * 2. 처리내용 :
     *  	TABLE : T_BI_MST(입찰계획마스터)
     					,T_BI_ROUND(입찰시간정보)
     * </pre>
     * @Query ID : selectInProgrsBidPblancListWithPgng
     * @date : 2015. 02. 10.
     * @author : 은우소프트 하성윤
     * @history : 
     *  =======================================================
     *  변경일             		작성자                     		변경내용  
     *  =======================================================
     *  2015. 02. 10.       은우소프트 하성윤              최초 작성 
     *  =======================================================   
     -->
	<select id="selectInProgrsBidPblancListWithPgng" resultType="dataEntity">
		<include refid="ComPgng.pgngHeaderClause"/>
		SELECT * FROM (
			<include refid="inProgrsBidPblancList"/>
			<include refid="inProgrsBidPblancWhere"/>
			ORDER BY A.REG_DT DESC NULLS LAST, A.ANNC_NO DESC, A.ANNC_NGR DESC
		) T1
		WHERE 1 = 1
		<include refid="ComPgng.pgngTailClause"/>
	</select>
	
	<!--  
     * <pre>
     * 1. 개요 : 진행중인 입찰공고 목록 총건수조회 
     * 2. 처리내용 :
     *  	TABLE : T_BI_MST(입찰계획마스터)
     					,T_BI_ROUND(입찰시간정보)
     * </pre>
     * @Query ID : selectInProgrsBidPblancListTotcnt
     * @date : 2015. 02. 10.
     * @author : 은우소프트 하성윤
     * @history : 
     *  =======================================================
     *  변경일             		작성자                     		변경내용  
     *  =======================================================
     *  2015. 02. 10.       은우소프트 하성윤              최초 작성 
     *  =======================================================   
     -->
	<select id="selectInProgrsBidPblancListTotcnt" resultType="int">
		SELECT COUNT(1) FROM (
			<include refid="inProgrsBidPblancList"/>
			<include refid="inProgrsBidPblancWhere"/>
		) T1
		WHERE 1 = 1		
	</select>
	
	<sql id="inProgrsBidPblancList">
		SELECT	* FROM
		(
			SELECT	A.ANNC_NO
						,A.ANNC_NGR
						,B.ROUND_NO
						,A.BID_PSCD
						, CASE
							WHEN	A.BID_PSCD = 'PF20'
							THEN		
								CASE
									WHEN	( TO_DATE(B.BIDC_SBMT_ENDT,'yyyyMMddHH24MISS') > SYSDATE )	
									THEN		F_CDVAL_INQIRE('BID_PSCD', A.BID_PSCD)
									ELSE		
										CASE
											WHEN	( TO_DATE(B.PRPDC_SBMT_ENDT,'yyyyMMddHH24MISS') > SYSDATE )
											THEN		F_CDVAL_INQIRE('BID_PSCD', A.BID_PSCD)
											ELSE		'공고마감'
										END
								END	
							ELSE		F_CDVAL_INQIRE('BID_PSCD', A.BID_PSCD)
						  END AS BID_PSCD_NM
						, A.CONT_SECD
						, F_CDVAL_INQIRE('CONT_SECD', A.CONT_SECD) AS CONT_SECD_NM
						, A.BID_NM
						, B.ANNC_DT
						, B.BIDC_SBMT_ENDT
						, A.CONT_MTCD
						, F_CDVAL_INQIRE('CONT_MTCD', A.CONT_MTCD) AS CONT_MTCD_NM
						, A.REG_DT
						, A.EMRG_YN
						, (	SELECT 	COUNT(1) 
							FROM 	T_BI_VEND_DTL 
							WHERE ANNC_NO = B.ANNC_NO
							AND		ANNC_NGR = B.ANNC_NGR
							AND		ROUND_NO = B.ROUND_NO
							AND		VEND_REG_NO = #{P_VEND_REG_NO, jdbcType=VARCHAR}
							AND		BID_TPI_SECD IN ('OP03', 'OP05')) AS BIDC_SBMT_CNT
			FROM 	T_BI_MST A
						, T_BI_ROUND B
			WHERE	A.ANNC_NO = B.ANNC_NO
			AND		A.ANNC_NGR = B.ANNC_NGR
			AND		B.ROUND_NO = ( SELECT MAX(ROUND_NO) FROM T_BI_ROUND WHERE ANNC_NO = A.ANNC_NO AND ANNC_NGR = A.ANNC_NGR )
			AND		NVL(A.DEL_AT, 'N') != 'Y'
			AND 		A.BID_PSCD IN ('PF20', 'PF30')
			AND		A.BID_MTCD IN ('BID')
			AND 		CONT_MTCD NOT IN ('10001')
			AND TO_CHAR(SYSDATE, 'yyyyMMddHH24MI') >= NVL(TO_CHAR(TO_DATE(B.ANNC_DT, 'yyyyMMddhh24miss'), 'yyyyMMddHH24MI'),TO_CHAR(SYSDATE, 'yyyyMMddHH24MI'))
		) A
	</sql>
	
	<sql id="inProgrsBidPblancWhere">
		<where>
			<if test='P_ANNC_NO_S != null and P_ANNC_NO_S != "" '>
				AND ANNC_NO LIKE '%'||#{P_ANNC_NO_S}||'%'
			</if>
			<if test='P_BID_NM_S != null and P_BID_NM_S != "" '>
				AND BID_NM LIKE '%'||#{P_BID_NM_S}||'%'
			</if>
			<if test='P_CONT_SECD_S != null and P_CONT_SECD_S != "" '>
				AND CONT_SECD = #{P_CONT_SECD_S}
			</if>
			<if test='P_BID_PSCD_S != null and P_BID_PSCD_S != "" '>
				AND A.BID_PSCD = #{P_BID_PSCD_S}
			</if>
			<if test='P_ANNC_STDT_S != null and P_ANNC_STDT_S != "" '>
				AND TO_CHAR(TO_DATE(ANNC_DT, 'yyyyMMddhh24miss'), 'yyyyMMdd')  >= #{P_ANNC_STDT_S}
			</if>
			<if test='P_ANNC_ENDT_S != null and P_ANNC_ENDT_S != "" '>
				AND TO_CHAR(TO_DATE(ANNC_DT, 'yyyyMMddhh24miss'), 'yyyyMMdd') &lt;= #{P_ANNC_ENDT_S}
			</if>
			<if test='P_FIRST_S != null and P_FIRST_S != "" '>
				AND BID_PSCD = 'PF20'
			</if>		
		</where>
	</sql>
	
	<!--  
     * <pre>
     * 1. 개요 : 진행중인 입찰공고 상세
     * 2. 처리내용 :
     *  	TABLE : T_BI_MST(입찰계획)
     					,T_BI_ROUND(입찰시간정보)
     * </pre>
     * @Query ID : selectInProgrsBidPblancDetail
     * @date : 2015. 02. 16.
     * @author : 은우소프트 하성윤
     * @history : 
     *  =======================================================
     *  변경일             		작성자                     		변경내용  
     *  =======================================================
     *  2015. 01. 16.       은우소프트 하성윤              최초 작성 
     *  =======================================================   
     -->
	<select id="selectInProgrsBidPblancDetail" resultType="dataEntity">
		SELECT 	A.ANNC_NO
					, A.ANNC_NGR
					, B.ROUND_NO
					, A.BID_NM
					, A.BID_MTCD
					, F_CDVAL_INQIRE('BID_MTCD',A.BID_MTCD) AS BID_MTCD_NM 
					, A.BID_PSCD
					, F_CDVAL_INQIRE('BID_PSCD',A.BID_PSCD) AS BID_PSCD_NM 
					, A.APPR_STCD
					, F_CDVAL_INQIRE('APPR_STCD',A.APPR_STCD) AS APPR_STCD_NM
					, A.CONT_SECD
					, F_CDVAL_INQIRE('CONT_SECD',A.CONT_SECD) AS CONT_SECD_NM
					, A.CONT_DECD
					, F_CDVAL_INQIRE('CONT_DECD',A.CONT_DECD) AS CONT_DECD_NM
					, A.CONT_MTCD
					, F_CDVAL_INQIRE('CONT_MTCD',A.CONT_MTCD) AS CONT_MTCD_NM
					, A.SBID_MTCD
					, F_CDVAL_INQIRE('SBID_MTCD',A.SBID_MTCD) AS SBID_MTCD_NM
					, A.ASSO_SPDM_CD
					, F_CDVAL_INQIRE('ASSO_SPDM_CD',A.ASSO_SPDM_CD) AS ASSO_SPDM_CD_NM
					, A.ESTPC_SECD
					, F_CDVAL_INQIRE('ESTPC_SECD',A.ESTPC_SECD) AS ESTPC_SECD_NM
					, A.SUM_RTCD
					, F_CDVAL_INQIRE('SUM_RTCD',A.SUM_RTCD) AS SUM_RTCD_NM
					, A.ELGB_LMT_SCR
					, A.SBID_LWST_RT
					, NVL(( SELECT 	BASE_ESTPC_AMT 
							   FROM 		T_BI_ESTC_MST 
							   WHERE	ANNC_NO = #{P_ANNC_NO, jdbcType=VARCHAR}
							   AND		ANNC_NGR = #{P_ANNC_NGR, jdbcType=INTEGER}
							   AND		ROUND_NO = #{P_ROUND_NO, jdbcType=INTEGER} ),A.BASE_AMT) AS BASE_AMT
					, A.ESTT_AMT
					, FEBI_NUMTOKOR(A.ESTT_AMT) AS ESTT_AMT_KOR
					, A.BID_RNG_CNTN
					, A.BRFS_PLC_NM
					, A.BRFS_DT
					, A.CPDF_RT
					, A.ITEM_DRCD
					, F_CDVAL_INQIRE('ITEM_DRCD',A.ITEM_DRCD) AS ITEM_DRCD_NM
					, A.DLGD_PLC_NM
					, A.DLGD_TE_CNTN
					, A.EMRG_YN
					, FEBI_GET_CPRAT(A.EMRG_YN) AS EMRG_YN_NM
					, A.OPNG_YN
					, A.SBID_YN
					, A.LT_NGR_YN
					, A.G2B_NTFY_YN
					, FEBI_GET_CPRAT(A.G2B_NTFY_YN) AS G2B_NTFY_YN_NM
					, A.PRTC_QLF_CNTN
					, A.CTFL_GTAMT_RT
					, A.DFFL_GTAMT_RT
					, A.PRCDC_SBMT_YN
					, FEBI_GET_CPRAT(A.PRCDC_SBMT_YN) AS PRCDC_SBMT_YN_NM
					, A.PRPDC_ESS_YN
					, FEBI_GET_CPRAT(A.PRPDC_ESS_YN) AS PRPDC_ESS_YN_NM
					, A.EMRG_BID_RSN
					, A.ESTT_PRCE
					, A.BID_BRFS_YN
					, FEBI_GET_CPRAT(A.BID_BRFS_YN) AS BID_BRFS_YN_NM
					, A.BID_BRFS_ATND_YN
					, FEBI_GET_CPRAT(A.BID_BRFS_ATND_YN) AS BID_BRFS_ATND_YN_NM
					, A.SITE_BRFS_YN
					, FEBI_GET_CPRAT(A.SITE_BRFS_YN) AS SITE_BRFS_YN_NM
					, A.SITE_BRFS_DT
					, A.SITE_BRFS_PLC
					, A.GTAMT_PYMT_TYP
					, A.SMPR_BID_SECD
					, F_CDVAL_INQIRE('SMPR_BID_SECD',A.SMPR_BID_SECD) AS SMPR_BID_SECD_NM
					, A.ARA_LMT_CD
					, F_CDVAL_INQIRE('ARA_LMT_CD',A.ARA_LMT_CD) AS ARA_LMT_CD_NM
					, A.BTP_LMT_CD
					, A.BTP_LMT_CD AS BTP_LMT_CD_NM
					, A.ISTL_LMT
					, A.DOC_NO
					, A.AUTO_FBID_YN
					, FEBI_GET_CPRAT(A.AUTO_FBID_YN) AS AUTO_FBID_YN_NM
					, A.CONT_STDE
					, A.CONT_ENDE
					, A.CONT_TE
					, A.BSNS_BDG_AMT
					, A.ANNC_SECD
					, F_CDVAL_INQIRE('ANNC_SECD',A.ANNC_SECD) AS ANNC_SECD_NM
					, B.PRTC_APLY_ENDT
					, B.ANNC_DT
					, B.BIDC_SBMT_STDT
					, B.BIDC_SBMT_ENDT
					, B.PRPDC_SBMT_STDT
					, B.PRPDC_SBMT_ENDT
					, B.OPNG_DT
					, A.OPNG_SYS_SECD
					, F_CDVAL_INQIRE('OPNG_SYS_SECD',A.OPNG_SYS_SECD) AS OPNG_SYS_SECD_NM
					, A.PLR_ESTPC_RNG_CD
					, F_CDVAL_INQIRE('PLR_ESTPC_RNG_CD',A.PLR_ESTPC_RNG_CD) AS PLR_ESTPC_RNG_CD_NM
					, A.UPR_8CNT_YN
					, FEBI_GET_CPRAT(A.UPR_8CNT_YN) AS UPR_8CNT_YN_NM
					, A.TNDR_AMT_STAX_YN
					, FEBI_GET_CPRAT(A.TNDR_AMT_STAX_YN) AS TNDR_AMT_STAX_YN_NM
					, A.UPRC_YN
					, A.BID_GTAMT_RT
					, A.BIDGR_AMT
					, A.BIDGR_SECD
					, F_CDVAL_INQIRE('BIDGR_SECD',A.BIDGR_SECD) AS BIDGR_SECD_NM
					, CASE WHEN A.BIDGR_SECD = 'PAY_MMRD' THEN 'Y'
					  ELSE 'N' END AS EXMT_YN
					, FEBI_GET_CPRAT(	CASE WHEN A.BIDGR_SECD = 'PAY_MMRD' THEN 'Y'
					  							ELSE 'N' END) AS EXMT_YN_NM
					, A.IFC_ID
					, A.TCHN_SCR_RT
					, A.PRCE_SCR_RT
					, A.ESTPC_UP_CNT
					, A.OPNG_PLC_NM
					, A.ELGB_ESTM_KDCD
					, F_CDVAL_INQIRE('ELGB_ESTM_KDCD',A.ELGB_ESTM_KDCD) AS ELGB_ESTM_KDCD_NM
					, A.SW_BSNS_OBJ_YN
					, A.PVCT_CNVR_YN
					, A.DTAC_TNDR_LMT_CNT
					, A.MIN_DN_RT
					, A.TNDR_PSBL_AMT
					, A.ZERO_BID_PSBL_YN
					, A.REGR_ID
					, A.REG_DT
					, A.DEL_AT
					, A.RMK
					, A.EXRT
					, A.CURR_SECD
					, F_CDVAL_INQIRE('CURR_SECD',A.CURR_SECD) AS CURR_SECD_NM
					
					, A.PRCH_NO
					, A.CHRGR_NM
					, A.CHRGR_TEL_NO
					, A.TCHN_CHRGR_NM
					, A.TCHN_CHRGR_TEL_NO
					, A.CHRGR_EMAL
					, A.TCHN_CHRGR_EMAL
					
		FROM 	T_BI_MST A
					, T_BI_ROUND B
		WHERE	A.ANNC_NO = B.ANNC_NO
		AND		A.ANNC_NGR = B.ANNC_NGR
		AND		B.ANNC_NO = #{P_ANNC_NO, jdbcType=VARCHAR}
		AND		B.ANNC_NGR = #{P_ANNC_NGR, jdbcType=INTEGER}
		AND		B.ROUND_NO = #{P_ROUND_NO, jdbcType=INTEGER}
	</select>
	
			
	<!--  
     * <pre>
     * 1. 개요 : 입찰품목 목록 조회
     * 2. 처리내용 :
     *  	TABLE : T_BI_ITEM(입찰품목)
     * </pre>
     * @Query ID : selectBidPrdlstList
     * @date : 2015. 02. 16.
     * @author : 은우소프트 하성윤
     * @history : 
     *  =======================================================
     *  변경일             		작성자                     		변경내용  
     *  =======================================================
     *  2015. 02. 16.       은우소프트 하성윤              최초 작성 
     *  =======================================================   
     -->
	<select id="selectBidPrdlstList" resultType="dataEntity">
		SELECT	ANNC_NO
					, ANNC_NGR
					, ITEM_SN
					, ITEM_NO
					, ITEM_NM
					, STND_NM
					, ITEM_UNCD
					, ITEM_UNNM
					, ITEM_QTY
					, RQST_UNIT
					, SCH_UNIT
					, PRCE_UNCD
					, PRCE_UNNM
					, PCRQ_NO
		FROM	T_BI_ITEM
		WHERE	ANNC_NO = #{P_ANNC_NO, jdbcType=VARCHAR}
		AND		ANNC_NGR = #{P_ANNC_NGR, jdbcType=INTEGER}
		ORDER BY ITEM_SN
	</select>
	
		<!--  
     * <pre>
     * 1. 개요 : 입찰 첨부문서 조회
     * 2. 처리내용 :
     *  	TABLE : T_BI_FILE(입찰첨부문서)
     * </pre>
     * @Query ID : selectBidAtchDocList
     * @date : 2015. 02. 16.
     * @author : 은우소프트 하성윤
     * @history : 
     *  =======================================================
     *  변경일             		작성자                     		변경내용  
     *  =======================================================
     *  2015. 02. 16.       은우소프트 하성윤              최초 작성 
     *  =======================================================   
     -->
	<select id="selectBidAtchDocList" resultType="dataEntity">
		SELECT  ANNC_NO
					, ANNC_NGR
					, BID_FSCD
					, FILE_GRP_NO
		FROM		T_BI_FILE
		WHERE	ANNC_NO = #{P_ANNC_NO, jdbcType=VARCHAR}
		AND		ANNC_NGR = #{P_ANNC_NGR, jdbcType=INTEGER}
		AND		BID_FSCD = #{P_BID_FSCD, jdbcType=VARCHAR}
	</select>
	
		<!--  
     * <pre>
     * 1. 개요 : 입찰 첨부문서 조회
     * 2. 처리내용 :
     *  	TABLE : T_BI_FILE(업체첨부문서)
     * </pre>
     * @Query ID : selectBidAtchDoc
     * @date : 2015. 02. 16.
     * @author : 은우소프트 하성윤
     * @history : 
     *  =======================================================
     *  변경일             		작성자                     		변경내용  
     *  =======================================================
     *  2015. 02. 16.       은우소프트 하성윤              최초 작성 
     *  =======================================================   
     -->
	<select id="selectBidAtchDoc" resultType="dataEntity">
		SELECT  ANNC_NO
					, ANNC_NGR
					, ROUND_NO
					, BID_FSCD
					, FILE_GRP_NO
		FROM		T_BI_FILE
		WHERE	ANNC_NO = #{P_ANNC_NO, jdbcType=VARCHAR}
		AND		ANNC_NGR = #{P_ANNC_NGR, jdbcType=INTEGER}
		AND		ROUND_NO = #{P_ROUND_NO, jdbcType=INTEGER}
		AND		BID_FSCD = #{P_BID_FSCD, jdbcType=VARCHAR}
	</select>
	
		<!--  
     * <pre>
     * 1. 개요 : 입찰 첨부문서 조회(업체)
     * 2. 처리내용 :
     *  	TABLE : T_BI_VEND_FILE(업체첨부문서)
     * </pre>
     * @Query ID : selectEntrpsAtchDoc
     * @date : 2015. 02. 16.
     * @author : 은우소프트 하성윤
     * @history : 
     *  =======================================================
     *  변경일             		작성자                     		변경내용  
     *  =======================================================
     *  2015. 02. 16.       은우소프트 하성윤              최초 작성 
     *  =======================================================   
     -->
	<select id="selectEntrpsAtchDoc" resultType="dataEntity">
		SELECT  ANNC_NO
					, ANNC_NGR
					, ROUND_NO
					, VEND_REG_NO
					, BID_TPI_SECD
					, BID_SBMT_FSCD
					, FILE_GRP_NO
		FROM	T_BI_VEND_FILE
		WHERE	ANNC_NO = #{P_ANNC_NO, jdbcType=VARCHAR}
		AND		ANNC_NGR = #{P_ANNC_NGR, jdbcType=INTEGER}
		AND		ROUND_NO = #{P_ROUND_NO, jdbcType=INTEGER}
		AND		VEND_REG_NO = #{P_VEND_REG_NO, jdbcType=VARCHAR}
		AND		BID_TPI_SECD = #{P_BID_TPI_SECD, jdbcType=VARCHAR}
		AND		BID_SBMT_FSCD = #{P_BID_SBMT_FSCD, jdbcType=VARCHAR}
	</select>
	
	<!--  
     * <pre>
     * 1. 개요 : 입찰설명회 참석 정보
     * 2. 처리내용 :
     *  	TABLE : T_BI_BRFS_VEND(입찰설명회 참석업체정보)
     * </pre>
     * @Query ID : selectBidDcPeoAtndncInfoinqire
     * @date : 2015. 03. 17.
     * @author : 은우소프트 하성윤
     * @history : 
     *  =======================================================
     *  변경일             		작성자                     		변경내용  
     *  =======================================================
     *  2015. 03. 17.       은우소프트 하성윤              최초 작성 
     *  =======================================================   
     -->
	<select id="selectBidDcPeoAtndncInfoinqire" resultType="dataEntity">
		SELECT	ANNC_NO
					, ANNC_NGR
					, REG_DT
		FROM 	T_BI_BRFS_VEND
		WHERE	ANNC_NO = #{P_ANNC_NO, jdbcType=VARCHAR}
		AND		ANNC_NGR = #{P_ANNC_NGR, jdbcType=INTEGER}
		AND		VEND_REG_NO = #{P_VEND_REG_NO , jdbcType=VARCHAR}
	</select>
	
	<!--  
     * <pre>
     * 1. 개요 : 참가신청현황 조회
     * 2. 처리내용 :
     *  	TABLE : T_BI_VEND_DTL(업체참여상세)
     * </pre>
     * @Query ID : selectPartcptReqstSttusinqire
     * @date : 2015. 03. 17.
     * @author : 은우소프트 하성윤
     * @history : 
     *  =======================================================
     *  변경일             		작성자                     		변경내용  
     *  =======================================================
     *  2015. 03. 17.       은우소프트 하성윤              최초 작성 
     *  =======================================================   
     -->
	<select id="selectPartcptReqstSttusinqire" resultType="dataEntity">
		SELECT	A.ANNC_NO
					,A.ANNC_NGR
					,A.ROUND_NO
					,A.VEND_REG_NO
					,A.BID_TPI_SECD
		FROM		T_BI_VEND_DTL A 
					,T_BI_VEND_MST B
		WHERE	A.ANNC_NO = B.ANNC_NO
		AND		A.ANNC_NGR = B.ANNC_NGR
		AND		A.ROUND_NO = B.ROUND_NO 
		AND		A.VEND_REG_NO = B.VEND_REG_NO
		AND		A.ANNC_NO = #{P_ANNC_NO, jdbcType=VARCHAR}
		AND		A.ANNC_NGR = #{P_ANNC_NGR, jdbcType=INTEGER}
		AND		A.ROUND_NO = #{P_ROUND_NO, jdbcType=INTEGER}
		AND		A.VEND_REG_NO = #{P_VEND_REG_NO , jdbcType=VARCHAR}
		AND		A.BID_TPI_SECD = #{P_BID_TPI_SECD , jdbcType=VARCHAR}
		AND		NVL(B.RE_TNDR_YN,'N') = 'N' 
	</select>
	
	<!--  
     * <pre>
     * 1. 개요 : 관심입찰등록
     * 2. 처리내용 :
     *  	TABLE : T_BI_CONC_BID(관심입찰정보)
     * </pre>
     * @Query ID : insertIntrstBidRegist
     * @date : 2015. 02. 23.
     * @author : 은우소프트 하성윤
     * @history : 
     *  =======================================================
     *  변경일             		작성자                     		변경내용  
     *  =======================================================
     *  2015. 02. 23.       은우소프트 하성윤              최초 작성 
     *  =======================================================   
     -->
	<insert id="insertIntrstBidRegist" >
		INSERT INTO T_BI_CONC_BID
		(
			ANNC_NO
			,ANNC_NGR
			,VEND_REG_NO
			,CCN_DT
			<include refid="ComRegr.RegrColumnClause"/>
		)
		VALUES
		(
			#{P_ANNC_NO , jdbcType=VARCHAR}
			,#{P_ANNC_NGR , jdbcType=INTEGER}
			,#{P_VEND_REG_NO , jdbcType=VARCHAR}
			, TO_CHAR(SYSDATE, 'yyyyMMddhh24miss')
			<include refid="ComRegr.RegrValueClause"/>
		)
	</insert>
	
	<!--  
     * <pre>
     * 1. 개요 : 관심입찰삭제
     * 2. 처리내용 :
     *  	TABLE : T_BI_CONC_BID(관심입찰정보)
     * </pre>
     * @Query ID : deleteIntrstBid
     * @date : 2015. 09. 04.
     * @author : 은우소프트 손연우
     * @history : 
     *  =======================================================
     *  변경일             		작성자                     		변경내용  
     *  =======================================================
     *  2015. 09. 04.       은우소프트 손연우              최초 작성 
     *  =======================================================   
     -->
	
	<delete id="deleteIntrstBid">
		DELETE FROM T_BI_CONC_BID
		WHERE 	ANNC_NO = #{P_ANNC_NO}
		AND 		ANNC_NGR = #{P_ANNC_NGR}
		AND		VEND_REG_NO = #{P_VEND_REG_NO}
	</delete>
	
	<!--  
     * <pre>
     * 1. 개요 : 관심입찰조회
     * 2. 처리내용 :
     *  	TABLE : T_BI_CONC_BID(관심입찰정보)
     * </pre>
     * @Query ID : selectIntrstBidInqire
     * @date : 2015. 02. 23.
     * @author : 은우소프트 하성윤
     * @history : 
     *  =======================================================
     *  변경일             		작성자                     		변경내용  
     *  =======================================================
     *  2015. 02. 23.       은우소프트 하성윤              최초 작성 
     *  =======================================================   
     -->
	<select id="selectIntrstBidInqire" resultType="dataEntity">
		SELECT	ANNC_NO
					,ANNC_NGR
					,VEND_REG_NO
					,CCN_DT
		FROM		T_BI_CONC_BID
		WHERE	ANNC_NO = #{P_ANNC_NO, jdbcType=VARCHAR}
		AND		ANNC_NGR = #{P_ANNC_NGR, jdbcType=INTEGER}
		AND		VEND_REG_NO = #{P_VEND_REG_NO, jdbcType=VARCHAR}
	</select>
	
	<!--  
     * <pre>
     * 1. 개요 : 공고알림정보 목록
     * 2. 처리내용 :
     *  	TABLE : TEBI_PUNO(공고알림정보)
     * </pre>
     * @Query ID : selectPblancNtcnInfoList
     * @date : 2015. 02. 11.
     * @author : 은우소프트 하성윤
     * @history : 
     *  =======================================================
     *  변경일             		작성자                     		변경내용  
     *  =======================================================
     *  2015. 02. 11.       은우소프트 하성윤              최초 작성 
     *  =======================================================   
     -->
	<select id="selectPblancNtcnInfoList" resultType="dataEntity">
		SELECT	ANNC_NO
					,ANNC_NGR
					,ROUND_NO
					,HSTY_SN
					,BID_PSCD
					,PROCR_ID
					,PROCR_NM
					,PROC_DT
					,PROC_RSN
					,RMK
		FROM 	T_BI_PROG_HIST
		WHERE	ANNC_NO = #{P_ANNC_NO}
		AND		ANNC_NGR = #{P_ANNC_NGR}
		AND		ROUND_NO = #{P_ROUND_NO}
		<if test='P_BID_PSCD != null and P_BID_PSCD != "" '>
			AND BID_PSCD = #{P_BID_PSCD}
		</if>
		ORDER BY HSTY_SN DESC
	</select>
	
	<!--  
     * <pre>
     * 1. 개요 : 입찰계획 진행상태 수정
     * 2. 처리내용 :
     *  	TABLE : T_BI_MST(입찰계획마스터)
     * </pre>
     * @Query ID : updatebidPlanProgrsSttusUpdt
     * @date : 2015. 02. 11.
     * @author : 은우소프트 하성윤
     * @history : 
     *  =======================================================
     *  변경일             		작성자                     		변경내용  
     *  =======================================================
     *  2015. 02. 11.       은우소프트 하성윤              최초 작성 
     *  =======================================================   
     -->
	<update id="updatebidPlanProgrsSttusUpdt">
		UPDATE 	T_BI_MST
		SET		BID_PSCD = #{P_BID_PSCD, jdbcType=VARCHAR}
					,MOD_DT = TO_CHAR(SYSDATE, 'yyyyMMddHH24MISS')
					<include refid="ComRegr.ModrSetClause"/>
		WHERE	ANNC_NO = #{P_ANNC_NO, jdbcType=VARCHAR}
		AND		ANNC_NGR = #{P_ANNC_NGR, jdbcType=INTEGER}
	</update>
		
	<!--  
     * <pre>
     * 1. 개요 : 입찰공고의견정보 목록
     * 2. 처리내용 :
     *  	TABLE : T_BI_OPNN(입찰공고의견정보)
     * </pre>
     * @Query ID : selectBidPblancOpinionInfoList
     * @date : 2015. 02. 12.
     * @author : 은우소프트 하성윤
     * @history : 
     *  =======================================================
     *  변경일             		작성자                     		변경내용  
     *  =======================================================
     *  2015. 02. 12.       은우소프트 하성윤              최초 작성 
     *  =======================================================   
     -->
	<select id="selectBidPblancOpinionInfoList" resultType="dataEntity">
		SELECT	ANNC_NO
					, ANNC_NGR
					, OPNN_SN
					, VEND_REG_NO
					, OPNN_TTL_NM
					, OPNNR_NM
					, OPNNR_EMAL
					, OPNN_CNTN
					, OPNN_SV_DT
					, RPLY_TTL_NM
					, RPLYR_ID
					, RPLYR_EMAL
					, RPLY_CNTN
					, RPLY_SV_DT
					, DEL_AT
					, CASE WHEN NVL(RPLY_TTL_NM, 'N') = 'N' THEN '아니오' ELSE '예' END RPLY_YN_NM
		FROM		T_BI_OPNN
		WHERE	ANNC_NO = #{P_ANNC_NO}
		AND		ANNC_NGR = #{P_ANNC_NGR}
		AND		NVL(DEL_AT, 'N') != 'Y'
		ORDER BY OPNN_SN 
	</select>
	
	<!--  
     * <pre>
     * 1. 개요 : 입찰공고의견정보 목록 총건수조회 
     * 2. 처리내용 :
     *  	TABLE : T_BI_OPNN(입찰공고의견정보)
     * </pre>
     * @Query ID : selectBidPblancOpinionInfoListTotcnt
     * @date : 2015. 02. 13.
     * @author : 은우소프트 하성윤
     * @history : 
     *  =======================================================
     *  변경일             		작성자                     		변경내용  
     *  =======================================================
     *  2015. 02. 13.       은우소프트 하성윤              최초 작성 
     *  =======================================================   
     -->
	<select id="selectBidPblancOpinionInfoListTotcnt" resultType="int">
		SELECT COUNT(1) FROM (
			SELECT	ANNC_NO
						, ANNC_NGR
						, OPNN_SN
						, VEND_REG_NO
						, OPNN_TTL_NM
						, OPNNR_NM
						, OPNNR_EMAL
						, OPNN_CNTN
						, OPNN_SV_DT
						, RPLY_TTL_NM
						, RPLYR_ID
						, RPLYR_EMAL
						, RPLY_CNTN
						, RPLY_SV_DT
						, DEL_AT
						, CASE WHEN NVL(RPLY_TTL_NM, 'N') = 'N' THEN '아니오' ELSE '예' END RPLY_YN_NM
			FROM		T_BI_OPNN
			WHERE	ANNC_NO = #{P_ANNC_NO}
			AND		ANNC_NGR = #{P_ANNC_NGR}
			AND		NVL(DEL_AT, 'N') != 'Y'
			ORDER BY OPNN_SN 
		) T1
		WHERE 1 = 1		
	</select>
		
	<!--  
     * <pre>
     * 1. 개요 : 입찰공고의견정보 상세
     * 2. 처리내용 :
     *  	TABLE : T_BI_OPNN(입찰공고의견정보)
     * </pre>
     * @Query ID : selectBidPblancOpinionInfoDetail
     * @date : 2015. 02. 12.
     * @author : 은우소프트 하성윤
     * @history : 
     *  =======================================================
     *  변경일             		작성자                     		변경내용  
     *  =======================================================
     *  2015. 02. 12.       은우소프트 하성윤              최초 작성 
     *  =======================================================   
     -->
	<select id="selectBidPblancOpinionInfoDetail" resultType="dataEntity">
		SELECT	ANNC_NO
					, ANNC_NGR
					, OPNN_SN
					, VEND_REG_NO
					, OPNN_TTL_NM
					, OPNNR_NM
					, OPNNR_EMAL
					, OPNN_CNTN
					, OPNN_SV_DT
					, RPLY_TTL_NM
					, RPLYR_ID
					, RPLYR_EMAL
					, RPLY_CNTN
					, RPLY_SV_DT
					, DEL_AT
		FROM		T_BI_OPNN
		WHERE	ANNC_NO = #{P_ANNC_NO}
		AND		ANNC_NGR = #{P_ANNC_NGR}
		AND		OPNN_SN = #{P_OPNN_SN}
	</select>
		
	<!--  
     * <pre>
     * 1. 개요 : 공동수급업체 목록
     * 2. 처리내용 :
     *  	TABLE : T_BI_OPNN(입찰공고의견정보)
     * </pre>
     * @Query ID : selectCopertnSdenList
     * @date : 2015. 04. 15.
     * @author : 은우소프트 하성윤
     * @history : 
     *  =======================================================
     *  변경일             		작성자                     		변경내용  
     *  =======================================================
     *  2015. 04. 15.       은우소프트 하성윤              최초 작성 
     *  =======================================================   
     -->
	<select id="selectCopertnSdenList" resultType="dataEntity">
		SELECT	A.ANNC_NO
					, A.ANNC_NGR
					, A.ROUND_NO
					, A.VEND_REG_NO
					, A.ASSO_VEND_SN
					, A.ASSO_VEND_REG_NO
					, A.ASSO_VEND_BIZRNO
					, A.ASSO_VEND_NM
					, A.RPRS_NM
					, A.SHR_RT
					, A.BTNM
					, A.BCNM
					, A.RMK
		FROM		T_BI_VEND_ASSO A
		WHERE	A.ANNC_NO = #{P_ANNC_NO}
		AND		A.ANNC_NGR = #{P_ANNC_NGR}
		AND		A.ROUND_NO = #{P_ROUND_NO}
		AND		A.VEND_REG_NO = #{P_VEND_REG_NO}
	</select>
	
	<!--  
     * <pre>
     * 1. 개요 : 업체 정보 조회
     * 2. 처리내용 :
     *  	TABLE : 
     * </pre>
     * @Query ID : selectEntrpsInfoInqire
     * @date : 2015. 08. 31.
     * @author : 은우소프트 손연우
     * @history : 
     *  =======================================================
     *  변경일             		작성자                     		변경내용  
     *  =======================================================
     *  2015. 08. 31.       은우소프트 손연우              최초 작성 
     *  =======================================================   
     -->
	
	<select id="selectEntrpsInfoInqire" resultType="dataEntity">
		SELECT	VEND.ANNC_NO
					,VEND.ANNC_NGR
					,VEND.ROUND_NO
					,VEND.VEND_REG_NO
					,VEND.BID_VEND_PSCD
					,VEND.TNDR_AMT
					,VEND.TNDR_AMT_ENC
					,VEND.SSN_VKEY
					,VEND.PRCE_SCR
					,VEND.ESTM_SCR
					,VEND.ESTM_ELCD
					,VEND.BID_ELCD
					,VEND.NT_ELGB_RSN
					,VEND.BID_ABND_YN
					,VEND.BID_ABND_SPCD
					,VEND.BID_ABND_RSN
					,VEND.ASSO_SPDM_CD
					,VEND.ASSO_SPDM_AGRE_DT
		FROM 	T_BI_VEND_MST VEND
		WHERE  VEND.ANNC_NO = #{P_ANNC_NO}
		AND		VEND.ANNC_NGR = #{P_ANNC_NGR}
		AND		VEND.ROUND_NO = #{P_ROUND_NO}
		<if test=" P_VEND_REG_NO != null and P_VEND_REG_NO != '' ">
		AND		VEND.VEND_REG_NO = #{P_VEND_REG_NO}
		</if>
	</select>
	
	<!--  
     * <pre>
     * 1. 개요 : 입찰공고 의견답변 수정
     * 2. 처리내용 :
     *  	TABLE : T_BI_OPNN(입찰공고의견정보)
     * </pre>
     * @Query ID : updateBidPblancOpinionAnswerUpdt
     * @date : 2015. 02. 12.
     * @author : 은우소프트 하성윤
     * @history : 
     *  =======================================================
     *  변경일             		작성자                     		변경내용  
     *  =======================================================
     *  2015. 02. 12.       은우소프트 하성윤              최초 작성 
     *  =======================================================   
     -->
	<update id="updateBidPblancOpinionAnswerUpdt">
		UPDATE	T_BI_OPNN
		SET		RPLY_CNTN = #{P_RPLY_CNTN , jdbcType=VARCHAR}
					, RPLY_SV_DT = #{P_RPLY_SV_DT , jdbcType=VARCHAR}
					, RPLYR_ID = #{P_RPLYR_ID , jdbcType=VARCHAR}
					, RPLYR_EMAL = #{P_RPLYR_EMAL , jdbcType=VARCHAR}
					, RPLY_TTL_NM = #{P_RPLY_TTL_NM , jdbcType=VARCHAR}
					,MOD_DT = TO_CHAR(SYSDATE, 'yyyyMMddHH24MISS')
					<include refid="ComRegr.ModrSetClause"/>
		WHERE	ANNC_NO = #{P_ANNC_NO, jdbcType=VARCHAR}
		AND		ANNC_NGR = #{P_ANNC_NGR, jdbcType=INTEGER}
		AND		OPNN_SN = #{P_OPNN_SN, jdbcType=INTEGER}
	</update>
	
	<!--  
     * <pre>
     * 1. 개요 : 신청인 등록
     * 2. 처리내용 :
     *  	TABLE : T_BI_VEND_DTL(업체참여상세)
     * </pre>
     * @Query ID : updateApplcntInfoStre
     * @date : 2015. 04. 10.
     * @author : 은우소프트 하성윤
     * @history : 
     *  =======================================================
     *  변경일             		작성자                     		변경내용  
     *  =======================================================
     *  2015. 04. 10.       은우소프트 하성윤              최초 작성 
     *  =======================================================   
     -->
	<update id="updateApplcntInfoStre">
		UPDATE	T_BI_VEND_DTL
		SET		CHRGR_NM = #{P_CHRGR_NM , jdbcType=VARCHAR}
					, TEL_NO = #{P_TEL_NO , jdbcType=VARCHAR}
					, EMAL_ADDR = #{P_EMAL_ADDR , jdbcType=VARCHAR}
					,MOD_DT = TO_CHAR(SYSDATE, 'yyyyMMddHH24MISS')
					<include refid="ComRegr.ModrSetClause"/>
		WHERE	ANNC_NO = #{P_ANNC_NO, jdbcType=VARCHAR}
		AND		ANNC_NGR = #{P_ANNC_NGR, jdbcType=INTEGER}
		AND		VEND_REG_NO = #{P_VEND_REG_NO, jdbcType=VARCHAR}
	</update>
	
	
	<!--  
     * <pre>
     * 1. 개요 : 공동수급방식 저장
     * 2. 처리내용 :
     *  	TABLE : T_BI_VEND_MST(업체참여마스터)
     * </pre>
     * @Query ID : updateCopertnSpldmdMthdStre
     * @date : 2015. 04. 10.
     * @author : 은우소프트 하성윤
     * @history : 
     *  =======================================================
     *  변경일             		작성자                     		변경내용  
     *  =======================================================
     *  2015. 04. 10.       은우소프트 하성윤              최초 작성 
     *  =======================================================   
     -->
	<update id="updateCopertnSpldmdMthdStre">
		MERGE INTO T_BI_VEND_MST
		    USING DUAL
		    ON (
		    		ANNC_NO = #{P_ANNC_NO} 
				    AND 	ANNC_NGR = #{P_ANNC_NGR}
				    AND	VEND_REG_NO = #{P_VEND_REG_NO}
				  	)
		    WHEN MATCHED THEN
		        UPDATE SET
		            BID_VEND_PSCD = #{P_BID_VEND_PSCD}
		            <if test='P_ASSO_SPDM_CD != null and P_ASSO_SPDM_CD != "" '>
		            , ASSO_SPDM_CD = #{P_ASSO_SPDM_CD , jdbcType=VARCHAR}
		            </if>
		            ,MOD_DT = TO_CHAR(SYSDATE, 'yyyyMMddHH24MISS')
					<include refid="ComRegr.ModrSetClause"/>
		    WHEN NOT MATCHED THEN
		        INSERT
						(
							ANNC_NO
							,ANNC_NGR
							,ROUND_NO
							,VEND_REG_NO
							,BID_VEND_PSCD
							,TNDR_AMT
							,TNDR_AMT_ENC
							,SSN_VKEY
							,PRCE_SCR
							,ESTM_SCR
							,ESTM_ELCD
							,BID_ELCD
							,NT_ELGB_RSN
							,BID_ABND_YN
							,BID_ABND_SPCD
							,BID_ABND_RSN
							,ASSO_SPDM_CD
							,ASSO_SPDM_AGRE_DT
							,RMK
							<include refid="ComRegr.RegrColumnClause"/>
						)
						VALUES
						(
							#{P_ANNC_NO , jdbcType=VARCHAR}
							,#{P_ANNC_NGR , jdbcType=INTEGER}
							,#{P_ROUND_NO , jdbcType=INTEGER}
							,#{P_VEND_REG_NO , jdbcType=VARCHAR}
							,#{P_BID_VEND_PSCD , jdbcType=VARCHAR}
							,#{P_TNDR_AMT , jdbcType=INTEGER}
							,#{P_TNDR_AMT_ENC , jdbcType=VARCHAR}
							,#{P_SSN_VKEY , jdbcType=VARCHAR}
							,#{P_PRCE_SCR , jdbcType=INTEGER}
							,#{P_ESTM_SCR , jdbcType=INTEGER}
							,#{P_ESTM_ELCD , jdbcType=VARCHAR}
							,#{P_BID_ELCD , jdbcType=VARCHAR}
							,#{P_NT_ELGB_RSN , jdbcType=VARCHAR}
							,#{P_BID_ABND_YN , jdbcType=VARCHAR}
							,#{P_BID_ABND_SPCD , jdbcType=VARCHAR}
							,#{P_BID_ABND_RSN , jdbcType=VARCHAR}
							,#{P_ASSO_SPDM_CD , jdbcType=VARCHAR}
							,#{P_ASSO_SPDM_AGRE_DT , jdbcType=VARCHAR}
							,#{P_RMK , jdbcType=VARCHAR}
							<include refid="ComRegr.RegrValueClause"/>
						)
	</update>
	
	<!--  
     * <pre>
     * 1. 개요 : 입찰보증정보 등록
     * 2. 처리내용 :
     *  	TABLE : T_BI_VEND_GRNT(입찰보증)
     * </pre>
     * @Query ID : insertBidGrntyInfoRegist
     * @date : 2015. 04. 10.
     * @author : 은우소프트 하성윤
     * @history : 
     *  =======================================================
     *  변경일             		작성자                     		변경내용  
     *  =======================================================
     *  2015. 04. 10.       은우소프트 하성윤              최초 작성 
     *  =======================================================   
     -->
	<insert id="insertBidGrntyInfoRegist">
		<selectKey keyProperty="P_GRNT_SN" resultType="int" order="BEFORE">
			SELECT 	NVL(MAX(GRNT_SN)+1,1) 
			FROM 	T_BI_VEND_GRNT
			WHERE 	ANNC_NO = #{P_ANNC_NO, jdbcType=VARCHAR} 
			AND		ANNC_NGR = #{P_ANNC_NGR, jdbcType=INTEGER}
			AND		ROUND_NO = #{P_ROUND_NO, jdbcType=INTEGER}
			AND		VEND_REG_NO = #{P_VEND_REG_NO, jdbcType=VARCHAR}
		</selectKey>
		INSERT INTO T_BI_VEND_GRNT
		(
			ANNC_NO
			, ANNC_NGR
			, ROUND_NO
			, VEND_REG_NO
			, GRNT_SN
			, BIDGR_SECD
			, BIDGR_NO
			, BIDGR_AMT
			, BIDGR_AGNM
			, BIDGR_STDE
			, BIDGR_ENDE
			, FILE_GRP_NO
			, RMK
			, BID_VEND_SECD
			<include refid="ComRegr.RegrColumnClause"/>
		)
		VALUES
		(
			#{P_ANNC_NO , jdbcType=VARCHAR}
			, #{P_ANNC_NGR , jdbcType=INTEGER}
			, #{P_ROUND_NO, jdbcType=INTEGER}
			, #{P_VEND_REG_NO , jdbcType=VARCHAR}
			, #{P_GRNT_SN , jdbcType=INTEGER}
			, #{P_BIDGR_SECD , jdbcType=VARCHAR}
			, #{P_BIDGR_NO , jdbcType=VARCHAR}
			, #{P_BIDGR_AMT , jdbcType=INTEGER}
			, #{P_BIDGR_AGNM , jdbcType=VARCHAR}
			, #{P_BIDGR_STDE , jdbcType=VARCHAR}
			, #{P_BIDGR_ENDE , jdbcType=VARCHAR}
			, #{P_BIGU_FILE_GRP_NO , jdbcType=VARCHAR}
			, #{P_RMK , jdbcType=VARCHAR}
			, #{P_BID_VEND_SECD , jdbcType=VARCHAR}
			<include refid="ComRegr.RegrValueClause"/>
		)
	</insert>
	
	<!--  
     * <pre>
     * 1. 개요 : 입찰보증정보 수정
     * 2. 처리내용 :
     *  	TABLE : T_BI_VEND_GRNT(입찰보증)
     * </pre>
     * @Query ID : updateBidGrntyInfoRegist
     * @date : 2019. 03. 14.
     * @author : 은우소프트 맹경열
     * @history : 
     *  =======================================================
     *  변경일             		작성자                     		변경내용  
     *  =======================================================
     *  2019. 03. 14.       은우소프트 맹경열              최초 작성 
     *  =======================================================   
     -->
	<insert id="updateBidGrntyInfoRegist">
		UPDATE	T_BI_VEND_GRNT
		SET		MOD_DT = TO_CHAR(SYSDATE, 'yyyyMMddHH24MISS')
					<if test=' P_BIDGR_SECD != null '>, BIDGR_SECD = #{P_BIDGR_SECD , jdbcType=VARCHAR}</if> 	
					<if test=' P_BIDGR_SECD != null '>, BIDGR_NO = #{P_BIDGR_SECD , jdbcType=VARCHAR}</if>
					<if test=' P_BIDGR_AMT != null '>, BIDGR_AMT = #{P_BIDGR_AMT , jdbcType=INTEGER}</if> 
					<if test=' P_BIDGR_AGNM != null '>, BIDGR_AGNM = #{P_BIDGR_AGNM , jdbcType=VARCHAR}</if>
					<if test=' P_BIDGR_STDE != null '>, BIDGR_STDE = #{P_BIDGR_STDE , jdbcType=VARCHAR}</if>
					<if test=' P_BIDGR_ENDE != null '>, BIDGR_ENDE = #{P_BIDGR_ENDE , jdbcType=VARCHAR}</if>
					<if test=' P_RMK != null '>, RMK = #{P_RMK , jdbcType=VARCHAR}</if>
					<if test=' P_BID_VEND_SECD != null '>, BID_VEND_SECD = #{P_BID_VEND_SECD , jdbcType=VARCHAR}</if> 
					<include refid="ComRegr.ModrSetClause"/>
		WHERE 	1=1
		AND		ANNC_NO = #{P_ANNC_NO, jdbcType=VARCHAR} 
		AND		ANNC_NGR = #{P_ANNC_NGR, jdbcType=INTEGER}
		AND		ROUND_NO = #{P_ROUND_NO, jdbcType=INTEGER}
		AND		VEND_REG_NO = #{P_VEND_REG_NO, jdbcType=VARCHAR}
		AND		GRNT_SN = #{P_GRNT_SN, jdbcType=VARCHAR}
	</insert>	
	
	<!--  
     * <pre>
     * 1. 개요 : 공동수급업체 등록
     * 2. 처리내용 :
     *  	TABLE : T_BI_VEND_GRNT(입찰보증)
     * </pre>
     * @Query ID : insertCopertnSpldmdEntrpsRegist
     * @date : 2015. 04. 10.
     * @author : 은우소프트 하성윤
     * @history : 
     *  =======================================================
     *  변경일             		작성자                     		변경내용  
     *  =======================================================
     *  2015. 04. 10.       은우소프트 하성윤              최초 작성 
     *  =======================================================   
     -->
	<insert id="insertCopertnSpldmdEntrpsRegist">
		<selectKey keyProperty="P_ASSO_VEND_SN" resultType="int" order="BEFORE">
			SELECT 	NVL(MAX(ASSO_VEND_SN)+1,1) 
			FROM 	T_BI_VEND_ASSO
			WHERE 	ANNC_NO = #{P_ANNC_NO, jdbcType=VARCHAR} 
			AND		ANNC_NGR = #{P_ANNC_NGR, jdbcType=INTEGER}
			AND		ROUND_NO = #{P_ROUND_NO, jdbcType=INTEGER}
			AND		VEND_REG_NO = #{P_VEND_REG_NO, jdbcType=VARCHAR}
		</selectKey>
		INSERT INTO T_BI_VEND_ASSO
		(
			ANNC_NO
			,ANNC_NGR
			,ROUND_NO
			,VEND_REG_NO
			,ASSO_VEND_SN
			,ASSO_VEND_REG_NO
			,ASSO_VEND_BIZRNO
			,ASSO_VEND_NM
			,RPRS_NM
			,TEL_NO
			,EMAL_ADDR
			,SHR_RT
			,RMK
			,BTNM
			,BCNM
			<include refid="ComRegr.RegrColumnClause"/>
		)
		VALUES
		(
			#{P_ANNC_NO , jdbcType=VARCHAR}
			,#{P_ANNC_NGR , jdbcType=INTEGER}
			,#{P_ROUND_NO, jdbcType=INTEGER}
			,#{P_VEND_REG_NO, jdbcType=VARCHAR}
			,#{P_ASSO_VEND_SN, jdbcType=INTEGER}
			,#{P_ASSO_VEND_REG_NO, jdbcType=VARCHAR}
			,#{P_ASSO_VEND_BIZRNO, jdbcType=VARCHAR}
			,#{P_ASSO_VEND_NM, jdbcType=VARCHAR}
			,#{P_RPRS_NM, jdbcType=VARCHAR}
			,#{P_TEL_NO, jdbcType=VARCHAR}
			,#{P_EMAL_ADDR, jdbcType=VARCHAR}
			,#{P_SHR_RT, jdbcType=INTEGER}
			,#{P_RMK, jdbcType=VARCHAR}
			,#{P_BTNM, jdbcType=VARCHAR}
			,#{P_BCNM, jdbcType=VARCHAR}
			<include refid="ComRegr.RegrValueClause"/>
		)
	</insert>
	
	<!--  
     * <pre>
     * 1. 개요 : 공동수급업체 삭제
     * 2. 처리내용 :
     *  	TABLE : T_BI_VEND_ASSO
     * </pre>
     * @Query ID : deleteCopertnSpldmdEntrps
     * @date : 2015. 04. 10.
     * @author : 은우소프트 전상훈
     * @history : 
     *  =======================================================
     *  변경일             		작성자                     		변경내용  
     *  =======================================================
     *  2015. 04. 10.       은우소프트 전상훈              최초 작성 
     *  =======================================================   
     -->
	<delete id="deleteCopertnSpldmdEntrps">
		DELETE 	FROM T_BI_VEND_ASSO
		WHERE 	ANNC_NO = #{P_ANNC_NO , jdbcType=VARCHAR}
		AND		ANNC_NGR = #{P_ANNC_NGR , jdbcType=INTEGER}
		AND		ROUND_NO = #{P_ROUND_NO, jdbcType=INTEGER}
		AND 		VEND_REG_NO = #{P_VEND_REG_NO , jdbcType=VARCHAR}
	</delete>
	
	<!--  
     * <pre>
     * 1. 개요 : 공동수급협정 일자 등록
     * 2. 처리내용 :
     *  	TABLE : T_BI_VEND_MST(업체참여마스터)
     * </pre>
     * @Query ID : updateCopertnSpldmdTrtyDeRegist
     * @date : 2015. 05. 01.
     * @author : 은우소프트 하성윤
     * @history : 
     *  =======================================================
     *  변경일             		작성자                     		변경내용  
     *  =======================================================
     *  2015. 05. 01.       은우소프트 하성윤              최초 작성 
     *  =======================================================   
     -->
	<update id="updateCopertnSpldmdTrtyDeRegist">
		UPDATE	T_BI_VEND_MST
		SET		ASSO_SPDM_AGRE_DT = TO_CHAR(SYSDATE, 'yyyyMMddHH24MISS')
					,MOD_DT = TO_CHAR(SYSDATE, 'yyyyMMddHH24MISS')
					<include refid="ComRegr.ModrSetClause"/>
		WHERE	ANNC_NO = #{P_ANNC_NO, jdbcType=VARCHAR} 
		AND		ANNC_NGR = #{P_ANNC_NGR, jdbcType=INTEGER}
		AND		ROUND_NO = #{P_ROUND_NO, jdbcType=INTEGER}
		AND		VEND_REG_NO = #{P_VEND_REG_NO, jdbcType=VARCHAR}
	</update>
	
	<!--  
     * <pre>
     * 1. 개요 : 업체 진행 이력 등록
     * 2. 처리내용 :
     *  	TABLE : T_BI_VEND_HIST(업체진행이력)
     * </pre>
     * @Query ID : insertEntrpsProgrsHistRegist
     * @date : 2015. 04. 20.
     * @author : 은우소프트 하성윤
     * @history : 
     *  =======================================================
     *  변경일             		작성자                     		변경내용  
     *  =======================================================
     *  2015. 04. 20.       은우소프트 하성윤              최초 작성 
     *  =======================================================   
     -->
	<insert id="insertEntrpsProgrsHistRegist">
		<selectKey keyProperty="P_HSTY_SN" resultType="int" order="BEFORE">
			SELECT 	NVL(MAX(HSTY_SN)+1,1) 
			FROM 	T_BI_VEND_HIST
			WHERE 	ANNC_NO = #{P_ANNC_NO, jdbcType=VARCHAR} 
			AND		ANNC_NGR = #{P_ANNC_NGR, jdbcType=INTEGER}
			AND		ROUND_NO = #{P_ROUND_NO, jdbcType=INTEGER}
			AND		VEND_REG_NO = #{P_VEND_REG_NO, jdbcType=VARCHAR}
		</selectKey>
		INSERT INTO T_BI_VEND_HIST
		(
			ANNC_NO
			,ANNC_NGR
			,ROUND_NO
			,VEND_REG_NO
			,HSTY_SN
			,BID_VEND_PSCD
			,RMK
			<include refid="ComRegr.RegrColumnClause"/>
		)
		VALUES
		(
			#{P_ANNC_NO , jdbcType=VARCHAR}
			, #{P_ANNC_NGR , jdbcType=INTEGER}
			, #{P_ROUND_NO , jdbcType=INTEGER}
			,#{P_VEND_REG_NO , jdbcType=VARCHAR}
			,#{P_HSTY_SN , jdbcType=INTEGER}
			,#{P_BID_VEND_PSCD , jdbcType=VARCHAR}
			,#{P_RMK , jdbcType=VARCHAR}
			<include refid="ComRegr.RegrValueClause"/>
		)
	</insert>
	
	
	<!--  
     * <pre>
     * 1. 개요 : 입찰참가신청서 조회 
     * 2. 처리내용 :
     * </pre>
     * @Query ID : selectBidPartcptReqstdocInqire
     * @date : 2015. 02. 26.
     * @author : 은우소프트 손연우
     * @history : 
     *  =======================================================
     *  변경일             		작성자                     		변경내용  
     *  =======================================================
     *  2015. 02. 26.       은우소프트 손연우              최초 작성 
     *  2015. 04. 15.       은우소프트 하성윤              외부용으로 변경 
     *  =======================================================   
     -->
	
	<select id="selectBidPartcptReqstdocInqire" resultType="dataEntity">
	
		SELECT
					 BONE.ANNC_NO
					,BONE.ANNC_NGR
					,BONE.BID_NM
					,F_CDVAL_INQIRE('C00001',BONE.CONT_SECD) AS PRCURE_SE_NM
					,F_CDVAL_INQIRE('CONT_MTCD',BONE.CONT_MTCD) AS CNTRCT_MTH_NM
					,F_CDVAL_INQIRE('C00006',BONE.SBID_MTCD) AS SCSBID_MTH_NM
					,CONE.VEND_NM
					,CONE.RPRS_NM
					,CONE.BIZRNO
					,CONE.VEND_ADDR
					,CONE.VEND_DTL_ADDR
					,BTWO.CHRGR_NM
					,BTWO.TEL_NO<!-- 암호화 -->
					,BTWO.EMAL_ADDR<!-- 암호화 -->
					,BFIVE.BIDGR_NO
					,BFIVE.BIDGR_SECD
					,F_CDVAL_INQIRE('BIDGR_SECD',BFIVE.BIDGR_SECD) AS BIDGR_SECD_NM
					,BFIVE.BIDGR_AMT
<!-- 					,BFIVE.ISSU_INSTT_NM -->
<!-- 					,BFIVE.GRNTY_PD_BEGIN_DE -->
<!-- 					,BFIVE.GRNTY_PD_END_DE -->
					,BFIVE.FILE_GRP_NO AS BIGU_FILE_GRP_NO
					,(
						SELECT 	FILE_SN
						FROM 	T_MM_FILE_MST
						WHERE 	FILE_GRP_NO = BFIVE.FILE_GRP_NO
						AND		DEL_AT = 'N'
					) AS ATCHMNFL_SN
					,BTWO.TPI_DT
					,BNINE.ASSO_SPDM_CD
					,F_CDVAL_INQIRE('22035',BNINE.ASSO_SPDM_CD) AS ASSO_SPDM_CD_NM
					,(	SELECT	COUNT(1)
						FROM		T_BI_VEND_ASSO FOUR
						WHERE	FOUR.ANNC_NO = BONE.ANNC_NO
						AND		FOUR.ANNC_NGR = BONE.ANNC_NGR
						AND		FOUR.VEND_REG_NO = CONE.VEND_REG_NO
					) AS ENTRPS_CNT
					,BENA.FILE_GRP_NO

		FROM
				 T_BI_VEND_GRNT BFIVE
				,T_BI_MST BONE
				,T_BI_VEND_DTL BTWO
				,T_BI_VEND_MST BNINE
				,VECI_PRCOEN2 CONE
				,(
					SELECT	*
					FROM 	T_BI_VEND_FILE
					WHERE	BID_SBMT_FSCD = 'DO03'
				 ) BENA
		WHERE	BFIVE.VEND_REG_NO = BTWO.VEND_REG_NO
		AND		BFIVE.ANNC_NO = BONE.ANNC_NO
		AND		BFIVE.ANNC_NGR = BONE.ANNC_NGR
		AND		BFIVE.ANNC_NO = BTWO.ANNC_NO
		AND		BFIVE.ANNC_NGR = BTWO.ANNC_NGR
		AND		BFIVE.ANNC_NO = BNINE.ANNC_NO
		AND		BFIVE.ANNC_NGR = BNINE.ANNC_NGR
		AND		BFIVE.VEND_REG_NO = BNINE.VEND_REG_NO
		AND		BFIVE.VEND_REG_NO = CONE.VEND_REG_NO
		AND		BFIVE.ANNC_NO = BENA.ANNC_NO(+)
		AND		BFIVE.ANNC_NGR = BENA.ANNC_NGR(+)
		AND		BFIVE.VEND_REG_NO = BENA.VEND_REG_NO(+)
		AND		BFIVE.ANNC_NO = #{P_ANNC_NO}
		AND		BFIVE.ANNC_NGR = #{P_ANNC_NGR}
		AND		BFIVE.VEND_REG_NO = #{P_VEND_REG_NO}
		AND		BFIVE.GRNT_SN = 1
		AND		BTWO.BID_TPI_SECD = 'OP01'
	
	</select>
	
	<!--  
     * <pre>
     * 1. 개요 : 업체 입찰 기본 정보 조회 
     * 2. 처리내용 :
     * </pre>
     * @Query ID : selectEntrpsBidBassInfoInqire
     * @date : 2015. 04. 16.
     * @author : 은우소프트 하성윤
     * @history : 
     *  =======================================================
     *  변경일             		작성자                     		변경내용  
     *  =======================================================
     *  2015. 04. 16.       은우소프트 하성윤              최초작성
     *  =======================================================   
     -->
	
	<select id="selectEntrpsBidBassInfoInqire" resultType="dataEntity">
		SELECT 	A.ANNC_NO
					, A.ANNC_NGR
					, A.BID_NM
					, A.CONT_SECD
					, F_CDVAL_INQIRE('C00001',A.CONT_SECD) AS PRCURE_SE_NM
					, A.CONT_MTCD
					, F_CDVAL_INQIRE('CONT_MTCD',A.CONT_MTCD) AS CNTRCT_MTH_NM
					, A.SBID_MTCD
					, F_CDVAL_INQIRE('C00006',A.SBID_MTCD) AS SCSBID_MTH_NM
					, A.CONT_DECD
					, F_CDVAL_INQIRE('C00026',A.CONT_DECD) AS PRCURE_DETAIL_SE_NM
					, A.ASSO_SPDM_CD
					, F_CDVAL_INQIRE('22035',A.ASSO_SPDM_CD) AS ASSO_SPDM_CD_NM
					, C.VEND_REG_NO
					, C.VEND_NM
					, C.RPRS_NM
					, C.BIZRNO
					, B.ASSO_SPDM_AGRE_DT
					, F_CDVAL_INQIRE('22035',B.ASSO_SPDM_CD) AS ENPA_COPERTN_SPLDMD_DUTY_SE_NM
					, B.ASSO_SPDM_CD AS ENPA_ASSO_SPDM_CD
					,(SELECT DECODE(COUNT(*),1,'N','Y')	AS	BID_PARTCPTN_YN
                        FROM T_BI_VEND_DTL
                      WHERE ANNC_NO = A.ANNC_NO                        
                          AND ANNC_NGR = A.ANNC_NGR
                          AND VEND_REG_NO = B.VEND_REG_NO
                          AND BID_TPI_SECD ='OP03' ) AS	BID_PARTCPTN_YN 
                    , ( SELECT CASE WHEN BIDC_SBMT_ENDT > TO_CHAR(SYSDATE,'YYYYMMDDHH24MISS') THEN 'Y' ELSE 'N' END 
                          FROM  T_BI_ROUND 
                        WHERE  ANNC_NO = A.ANNC_NO
                            AND  ANNC_NGR = A.ANNC_NGR ) AS  PRESENTN_DT_YN    
		FROM		T_BI_MST A
					, T_BI_VEND_MST B
					, VECI_PRCOEN2 C
		WHERE	A.ANNC_NO = B.ANNC_NO
		AND		A.ANNC_NGR = B.ANNC_NGR
		AND		B.VEND_REG_NO = C.VEND_REG_NO
		AND		A.ANNC_NO = #{P_ANNC_NO}
		AND		A.ANNC_NGR = #{P_ANNC_NGR}
		AND		C.VEND_REG_NO = #{P_VEND_REG_NO}
	</select>
	
	<!--  
     * <pre>
     * 1. 개요 : 입찰 참가신청 파일등록
     * 2. 처리내용 :
     * </pre>
     * @Query ID : insertBidPareFileRegist
     * @date : 2015. 05. 06.
     * @author : 은우소프트 전상훈
     * @history : 
     *  =======================================================
     *  변경일             		작성자                     		변경내용  
     *  =======================================================
     *  2015. 05. 06.       은우소프트 전상훈              최초작성
     *  =======================================================   
     -->
	<insert id="insertBidPareFileRegist">
		INSERT INTO T_BI_VEND_FILE
		(
			ANNC_NO
			,ANNC_NGR
			,ROUND_NO
			,VEND_REG_NO
			,BID_TPI_SECD
			,BID_SBMT_FSCD
			,FILE_GRP_NO
			<include refid="ComRegr.RegrColumnClause"/>
		)
		VALUES
		(
			#{P_ANNC_NO , jdbcType=VARCHAR}
			,#{P_ANNC_NGR , jdbcType=INTEGER}
			,#{P_ROUND_NO , jdbcType=INTEGER}
			,#{P_VEND_REG_NO , jdbcType=VARCHAR}
			,#{P_BID_TPI_SECD , jdbcType=VARCHAR}
			,#{P_BID_SBMT_FSCD , jdbcType=VARCHAR}
			,#{P_FILE_GRP_NO , jdbcType=VARCHAR}
			<include refid="ComRegr.RegrValueClause"/>
		)
	</insert>
	
	<select id="selectBfanMstInfo" resultType="dataEntity">
		SELECT 		BFAN_NO
						,BFAN_STDE
						,BFAN_ENDE
		FROM		T_BI_BFAN_MST
		WHERE		IFC_ID = #{P_IFC_ID, jdbcType=VARCHAR}
	</select>
	
	<select id="selectVendSnctInfo" resultType="dataEntity">
		SELECT	VEND_REG_NO
					,SNCT_SN
					,SNCT_STCD
					,SNCT_BSS_CNTN
					,SNCT_RSN_CNTN
					,SNCT_STDE
					,SNCT_ENDE
		FROM	T_CU_SNCT
		WHERE	VEND_REG_NO = #{P_VEND_REG_NO, jdbcType=VARCHAR}
		AND		SNCT_STDE &lt;= TO_CHAR(SYSDATE,'YYYYMMDD')
		AND		SNCT_ENDE >= TO_CHAR(SYSDATE,'YYYYMMDD')
		AND		NVL(DEL_AT,'N') = 'N' 
		AND		SNCT_STCD IN (
						<foreach separator="," item="snctStcd" collection="snctStcdList">
							#{snctStcd, jdbcType=VARCHAR}
						</foreach>
					)
		ORDER BY SNCT_SN DESC
	</select>
</mapper>