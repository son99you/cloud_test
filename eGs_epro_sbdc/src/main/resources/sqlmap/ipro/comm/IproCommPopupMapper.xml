<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!--
 * 공통팝업 Mapper
 *
 * <pre>
 * sqlmap.ipro.comm
 *    |_ IproCommPopupMapper.xml
 * 
 * </pre>
 * @date : 2015. 02. 09. 오후 3:20:00
 * @version : 1.0
 * @author : 은우소프트 김봉수
-->
<mapper namespace="com.eunwoosoft.ipro.comm.dao.IproCommPopupDao">

	<sql id="prgmList">
		SELECT	A.* FROM(
			SELECT 	MEDA_CODE
						, BASE_DATE
						, PROG_CODE
						, ORPG_CODE
						, ORPG_NAME
						, MEDA_CDNM
			FROM 	BISDBA.V_OR_REPGXM
			WHERE	1=1
		)A
	</sql>
	
	<sql id="prgmListWhere">
		<where>
			<if test='P_ORPG_NAME != null and P_ORPG_NAME != "" '>
				AND ORPG_NAME LIKE '%' ||#{P_ORPG_NAME}|| '%' 
			</if>
			<if test='P_MEDA_CODE != null and P_MEDA_CODE != "" '>
				AND MEDA_CODE = #{P_MEDA_CODE}
			</if>
			<if test='P_BSNS_NM_S != null and P_BSNS_NM_S != "" '>
				AND KOREAN_BSNS_NM LIKE '%' ||#{P_BSNS_NM_S}|| '%'
			</if>
			<if test='P_BSNS_YEAR_S != null and P_BSNS_YEAR_S != "" '>
				AND BSNS_BEGIN_YEAR &lt;= #{P_BSNS_YEAR_S} 
			</if>
			<if test='P_BSNS_YEAR_S != null and P_BSNS_YEAR_S != "" '>
				AND BSNS_END_YEAR >= #{P_BSNS_YEAR_S} 
			</if>
			<if test='P_BSNS_PLAN_YEAR_S != null and P_BSNS_PLAN_YEAR_S != "" '>
				AND BSNS_PLAN_YEAR = #{P_BSNS_PLAN_YEAR_S}
			</if>
			<if test='P_CPRBIZ_SE_CD_S != null and P_CPRBIZ_SE_CD_S != "" '>
				AND CPRBIZ_SE_CD = #{P_CPRBIZ_SE_CD_S} 
			</if>
			<if test='P_BSNS_STLE_CD_S != null and P_BSNS_STLE_CD_S != "" '>
				AND BSNS_STLE_CD = #{P_BSNS_STLE_CD_S}
			</if>
			<if test='P_SPORT_REALM_CD_S != null and P_SPORT_REALM_CD_S != "" '>
				AND SPORT_REALM_CD = #{P_SPORT_REALM_CD_S}
			</if>
		</where>
	</sql>

	
	
	<sql id="chargerList">
		SELECT	USR_ID
						, EMPL_NO
						, USR_NM
						, ARA_DEPT_CD
						, DEPT_NO
						, DEPT_NM
						, OFPS_CD
						, OFPS_NM
						, EMAL_ADDR
						, TEL_NO
						, CP_NO
						, AUTH_ID
		FROM		V_MM_USER		
		WHERE	1=1
	</sql>
	
	<sql id="chargerListWhere">
		<if test='P_USR_NM_S != null and P_USR_NM_S != "" '>
			AND USR_NM LIKE '%'||#{P_USR_NM_S}||'%'
		</if>
		<if test='P_EMPL_NO_S != null and P_EMPL_NO_S != "" '>
			AND EMPL_NO LIKE '%'||#{P_EMPL_NO_S}||'%'
		</if>
	</sql>	

	<sql id="pgngHeaderClause">
		SELECT R2.* FROM ( 							
			SELECT R1.*, ROWNUM AS RNUM FROM (</sql>
	
	<sql id="pgngTailClause" ><![CDATA[	) R1 WHERE ROWNUM <= (NVL(#{P_PAGE_NO, jdbcType=INTEGER}, 1) - 1) * NVL(#{P_PAGE_SIZE, jdbcType=INTEGER}, 10) + NVL(#{P_PAGE_SIZE, jdbcType=INTEGER}, 10) 
	 	) R2 WHERE R2.RNUM > (NVL(#{P_PAGE_NO, jdbcType=INTEGER}, 1) - 1) * NVL(#{P_PAGE_SIZE, jdbcType=INTEGER}, 10)
	 ]]>
	</sql>
	
	<sql id="apprLineList">
		SELECT	APPL_NO
					, APPL_NM
					, RMK
					, REGR_ID
					, REGR_NM
					, REG_DT
					, MODR_ID
					, MODR_NM
					, MOD_DT
					, DEL_AT
		FROM		T_MM_APPL_MST
		WHERE	DEL_AT NOT IN ('Y')
	</sql>
	
	<sql id="apprLineListWhere">
		<where>
			<if test='P_APPL_NO != null and P_APPL_NO != "" '>
				AND APPL_NO LIKE '%'||#{P_APPL_NO}||'%'
			</if>
			<if test='P_APPL_NM != null and P_APPL_NM != "" '>
				AND APPL_NM LIKE '%'||#{P_APPL_NM}||'%'
			</if>
		</where>
	</sql>		
	
	<!--  
     * <pre>
     * 1. 개요 : 사용자정보목록조회_페이징 
     * 2. 처리내용 :
     *  	TABLE : VEOP_PREM(사용자정보 VIEW)
     * </pre>
     * @Query ID : selectChargerListWithPgng
     * @date : 2018. 02. 20.
     * @author : 은우소프트 맹경열
     * @history : 
     *  =======================================================
     *  변경일             		작성자                     		변경내용  
     *  =======================================================
     *  2018. 02. 20.       은우소프트 맹경열              최초 작성 
     *  =======================================================    
     -->
	<select id="selectChargerListWithPgng" resultType="dataEntity">
		<include refid="pgngHeaderClause"/>
		SELECT * FROM (
			<include refid="chargerList"/>
			<include refid="chargerListWhere"/>
		) T1
		WHERE 1 = 1
		ORDER BY	 T1.DEPT_NO,  T1.USR_ID
		<include refid="pgngTailClause"/>
	</select>		
	
	<!--  
     * <pre>
     * 1. 개요 : 사용자정보목록총건수조회 
     * 2. 처리내용 :
     *  	TABLE : VEOP_PREM(사용자정보 VIEW)
     * </pre>
     * @Query ID : selectChargerListTotcnt
     * @date : 2018. 02. 20.
     * @author : 은우소프트 맹경열
     * @history : 
     *  =======================================================
     *  변경일             		작성자                     		변경내용  
     *  =======================================================
     *  2018. 02. 20.       은우소프트 맹경열              최초 작성 
     *  =======================================================    
     -->
	<select id="selectChargerListTotcnt" resultType="int">
		SELECT COUNT(1) FROM (
			<include refid="chargerList"/>
			<include refid="chargerListWhere"/>
		) T1
		WHERE 1 = 1		
	</select>	
	
	
		<!--  
     * <pre>
     * 1. 개요 : 업체 목록조회
     * 2. 처리내용 : 업체 목록을 조회
     * </pre>
     -->
	<select id="selectEntrpsInqireList" resultType="dataEntity">
		<include refid="ComPgng.pgngHeaderClause"/>
		SELECT	* FROM(
			<include refid="vendList" />
			<include refid="vendListWhere" />
		) T1
		WHERE	1=1
		ORDER BY VEND_NM
		<include refid="ComPgng.pgngTailClause"/>
	</select>
	
	<!--  
     * <pre>
     * 1. 개요 : 업체 목록총건수조회
     * 2. 처리내용 : 업체 목록의 총 건수를 조회
     * </pre>
     -->
	<select id="selectEntrpsInqireListTotcnt" resultType="int">
		SELECT COUNT(1) FROM (
			<include refid="vendList" />
			<include refid="vendListWhere" />
		) T1
	</select> 
	
	<sql id="vendList">
        SELECT A.* FROM (
            SELECT MST.VEND_REG_NO
                      , MST.RPRS_NM
                      , MST.BCNM
                      , MST.BTNM
                      , MST.TEL_NO
                      , MST.EMAL_ADDR
                      , MST.VEND_NM
                      , MST.ADDR_NM
                      , MST.BIZRNO
                      , MST.CHRGR_NM
			   FROM V_CU_MST MST
		) A
	</sql>
	
	<sql id="vendListWhere">
		<where>
			1=1
			<if test='P_VEND_NM_S != null and P_VEND_NM_S != "" '>
			AND VEND_NM LIKE '%' || #{P_VEND_NM_S} || '%'
			</if>
			<if test='P_BIZRNO_S != null and P_BIZRNO_S != "" '>
			AND BIZRNO LIKE '%' || #{P_BIZRNO_S} || '%'
			</if>
			<if test='P_VEND_REG_NO_S != null and P_VEND_REG_NO_S != "" '>
			AND VEND_REG_NO LIKE '%' || #{P_VEND_REG_NO_S} || '%'
			</if>
		</where>
	</sql>
	
	
	<select id="selectContFormFileList" resultType="dataEntity">
		SELECT 
					SV_FILE_NM
					,SYS_FILE_NM
					,FILE_DOC_NM
					,FILE_DESC
		FROM T_MM_FILE_MST 
		WHERE FILE_GRP_NO = #{P_FILE_GRP_NO, jdbcType=VARCHAR}
		AND DEL_AT = 'N'
	</select>
	
	<select id="selectFileSampleInqireList" resultType="dataEntity">
		SELECT CD_DTL_ID, CD_DTL_NM, ETC_VAL10  AS FILE_GRP_NO
		     , SYS_FILE_NM, FILE_SN
		      ,(SELECT COUNT(FILE_GRP_NO) FROM T_MM_FILE_MST WHERE 1 = 1 AND FILE_GRP_NO = ETC_VAL10 AND DEL_AT='N') AS CNT
		FROM T_MM_CODE_MST CD, T_MM_FILE_MST FI
		WHERE CD_ID = 'PCRQ_RECM_FSCD'
		AND CD.ETC_VAL10 = FI.FILE_GRP_NO(+)
		AND CD.DEL_AT = 'N'
		AND FI.DEL_AT = 'N'
		AND CD.USE_YN = 'Y'
		ORDER BY ORD_SN ASC
	</select>
	
	<select id="selectFileSampleRecmCdId" resultType="dataEntity">
		SELECT CD_DTL_ID AS PCRQ_RECM_FSCD 
		FROM T_MM_CODE_MST
		WHERE 1=1
		AND CD_ID = 'PCRQ_RECM_FSCD'
		AND ETC_VAL9= #{P_RECM_ID, jdbcType=VARCHAR}
	</select> 
	
	
		<!--  
     * <pre>
     * 1. 개요 : 견적 업체 목록조회
     * 2. 처리내용 : 업체 목록을 조회
     * </pre>
     -->
	<select id="selectPrpoEntrpsInqireList" resultType="dataEntity">
			SELECT 	 CU_MST.VEND_REG_NO
						, CU_MST.BIZRNO
						, CU_MST.RPRS_NM
						, CU_MST.BCNM
						, CU_MST.BTNM
						, CU_MST.TEL_NO
						, CU_MST.REG_DT
						, CU_MST.REGR_ID
						, CU_MST.VEND_NM
						, CU_MST.ADDR_NM
						, CU_MST.ADDR_DENM
						,(SELECT USR_NM FROM V_MIS_CUST_USER_INFO CO_USER WHERE CO_USER.VEND_REG_NO = CU_MST.VEND_REG_NO) AS USR_NM
				FROM  T_CU_MST CU_MST
				WHERE 1=1            
				<if test='P_VEND_NM_S != null and P_VEND_NM_S != "" '>
					AND VEND_NM LIKE '%' || #{P_VEND_NM_S} || '%'
				</if>
				<if test='P_BIZRNO_S != null and P_BIZRNO_S != "" '>
					AND BIZRNO LIKE '%' || #{P_BIZRNO_S} || '%'
				</if>
	   	 		ORDER BY BIZRNO ASC
	</select>
		<!--  
     * <pre>
     * 1. 개요 : 견적 업체 목록조회 총건수
     * 2. 처리내용 : 업체 목록을 조회
     * </pre>
     -->
	<select id="selectPrpoEntrpsInqireListTotcnt" resultType="int">
			SELECT COUNT(1) FROM(
					SELECT 	 CU_MST.VEND_REG_NO
						, CU_MST.BIZRNO
						, CU_MST.RPRS_NM
						, CU_MST.BCNM
						, CU_MST.BTNM
						, CU_MST.TEL_NO
						, CU_MST.REG_DT
						, CU_MST.REGR_ID
						, CU_MST.VEND_NM
						, CU_MST.ADDR_NM
						, CU_MST.ADDR_DENM
						,(SELECT USR_NM FROM V_MIS_CUST_USER_INFO CO_USER WHERE CO_USER.VEND_REG_NO = CU_MST.VEND_REG_NO) AS USR_NM
					FROM  T_CU_MST CU_MST
				)T1
				WHERE 1=1
				<if test='P_VEND_NM_S != null and P_VEND_NM_S != "" '>
					AND VEND_NM LIKE '%' || #{P_VEND_NM_S} || '%'
				</if>
				<if test='P_BIZRNO_S != null and P_BIZRNO_S != "" '>
					AND BIZRNO LIKE '%' || #{P_BIZRNO_S} || '%'
				</if>
	   	 		ORDER BY BIZRNO ASC
	</select>
	
	<select id="selectEntrpsInqireNotInList" resultType="dataEntity">
		<include refid="ComPgng.pgngHeaderClause"/>
			SELECT 	 CU_MST.VEND_REG_NO
						, CU_MST.BIZRNO
						, CU_MST.RPRS_NM
						, CU_MST.BCNM
						, CU_MST.BTNM
						, CU_MST.TEL_NO
						, CU_MST.REG_DT
						, CU_MST.REGR_ID
						, CU_MST.VEND_NM
						, CU_MST.ADDR_NM
						, CU_MST.ADDR_DENM
						,(SELECT USR_NM FROM V_MIS_CUST_USER_INFO CO_USER WHERE CO_USER.VEND_REG_NO = CU_MST.VEND_REG_NO) AS USR_NM
				FROM  T_CU_MST CU_MST
				WHERE 1=1            
				<if test='P_VEND_NM_S != null and P_VEND_NM_S != "" '>
					AND VEND_NM LIKE '%' || #{P_VEND_NM_S} || '%'
				</if>
				<if test='P_BIZRNO_S != null and P_BIZRNO_S != "" '>
					AND BIZRNO LIKE '%' || #{P_BIZRNO_S} || '%'
				</if>
				AND VEND_REG_NO NOT IN ( SELECT VEND_REG_NO
														FROM T_CT_VEND
														WHERE CONT_NO = #{P_CONT_NO , jdbcType=VARCHAR}
														AND CHNG_NGR = #{P_CHNG_NGR , jdbcType=INTEGER} ) 
	   	 		ORDER BY BIZRNO ASC
          <include refid="ComPgng.pgngTailClause"/>
	</select> 
	
	<select id="selectEntrpsInqireNotInListTotcnt" resultType="int">
		SELECT COUNT(1) FROM (
			SELECT 	 CU_MST.VEND_REG_NO
						, CU_MST.BIZRNO
						, CU_MST.RPRS_NM
						, CU_MST.BCNM
						, CU_MST.BTNM
						, CU_MST.TEL_NO
						, CU_MST.REG_DT
						, CU_MST.REGR_ID
						, CU_MST.VEND_NM
						, CU_MST.ADDR_NM
						, CU_MST.ADDR_DENM
						,(SELECT USR_NM FROM V_MIS_CUST_USER_INFO CO_USER WHERE CO_USER.VEND_REG_NO = CU_MST.VEND_REG_NO) AS USR_NM
				FROM  T_CU_MST CU_MST
				WHERE 1=1   
				<if test='P_VEND_NM_S != null and P_VEND_NM_S != "" '>
					AND VEND_NM LIKE '%' || #{P_VEND_NM_S} || '%'
				</if>
				<if test='P_BIZRNO_S != null and P_BIZRNO_S != "" '>
					AND BIZRNO LIKE '%' || #{P_BIZRNO_S} || '%'
				</if> 
				AND VEND_REG_NO NOT IN ( SELECT VEND_REG_NO
														FROM T_CT_VEND
														WHERE CONT_NO = #{P_CONT_NO , jdbcType=VARCHAR}
														AND CHNG_NGR = #{P_CHNG_NGR , jdbcType=INTEGER} )  
	   	 		ORDER BY BIZRNO ASC 
            ) T1
	</select>
	
	
<!--  
     * <pre>
     * 1. 개요 : 근거법령 목록조회
     * 2. 처리내용 : 근거법령 목록을 조회
     * </pre>
     -->
	<select id="selectLawordInqireList" resultType="dataEntity">
		<!-- <include refid="ComPgng.pgngHeaderClause"/> -->
			SELECT
			         B.LAWORD_CD
					,B.LAWORD_CD_NM
					,B.LAWORD_CD_DETAIL
			
			FROM TMDM_LAPCN A , TMDM_LAWO B
			WHERE A.LAWORD_CD = B.LAWORD_CD  
			AND	  A.CNTRCT_MTH_CD = #{P_CNTRCT_MTH_CD_S}
	        <if test=' P_LAWORD_CD_NM_S != null and P_LAWORD_CD_NM_S != "" '>
			   AND LAWORD_CD_NM LIKE '%'||#{P_LAWORD_CD_NM_S}||'%'
		   	</if>
	   	
	    	ORDER BY LAWORD_CD ASC
         <!-- <include refid="ComPgng.pgngTailClause"/> -->
	</select>
		
	
	<!--  
     * <pre>
     * 1. 개요 : 근거법령 목록총건수조회
     * 2. 처리내용 : 근거법령 목록의 총 건수를 조회
     * </pre>
     -->
	<select id="selectLawordInqireListTotcnt" resultType="int">
		SELECT COUNT(1) FROM (
			SELECT * 
		  FROM (SELECT
				         B.LAWORD_CD 
						,B.LAWORD_CD_NM
						,B.LAWORD_CD_DETAIL
				
				FROM TMDM_LAPCN A , TMDM_LAWO B
				WHERE A.LAWORD_CD = B.LAWORD_CD 
				AND	  A.CNTRCT_MTH_CD = #{P_CNTRCT_MTH_CD_S}
		        <if test=' P_LAWORD_CD_NM_S != null and P_LAWORD_CD_NM_S != "" '>
				   AND LAWORD_CD_NM LIKE '%'||#{P_LAWORD_CD_NM_S}||'%'
			   	</if>
            ) T1
		) T2
			
	</select>
	
	
	
	
	<!--  
     * <pre>
     * 1. 개요 : 데이터베이스 목록조회
     * 2. 처리내용 : 데이터베이스 목록을 조회
     * </pre>
     -->
	<select id="selectDataBaseList" resultType="dataEntity">
        <include refid="ComPgng.pgngHeaderClause"/>
        SELECT   TABLE_ID
				,VEND_REG_NO
				,TABLE_NM
				,TABLE_SECD
				,TABLE_AUTH
				,REGR_ID
				,REGR_NM
				,REG_DT
				,MODR_ID
				,MODR_NM
				,MOD_DT
				,CONN_IP
				,DEL_AT

           FROM T_MM_TBL_DATA
        WHERE 1=1
			AND VEND_REG_NO = #{P_VEND_REG_NO}
            <if test=' P_HI_DEPT_NM_S != null and P_HI_DEPT_NM_S != "" '>
            AND HI_DEPT_NM LIKE '%'||#{P_HI_DEPT_NM_S}||'%'
            </if>
            <if test=' P_DEPT_NM_S != null and P_DEPT_NM_S != "" '>
            AND DEPT_NM LIKE '%'||#{P_DEPT_NM_S}||'%'
            </if>
            <if test=' P_DEPT_NO_S != null and P_DEPT_NO_S != "" '>
            AND DEPT_NO LIKE '%'||#{P_DEPT_NO_S}||'%'
            </if>
            <if test='P_AUTH_ID == "5"'>
                <if test=' P_ARA_DEPT_CD != null and P_ARA_DEPT_CD != "" '>
                AND ARA_DEPT_CD = #{P_ARA_DEPT_CD} 
                </if>
            </if>  
        ORDER BY TABLE_ID DESC
		<include refid="ComPgng.pgngTailClause"/>
	</select> 
	
	
	<!--  
     * <pre>
     * 1. 개요 : 데이터베이스 목록총건수조회
     * 2. 처리내용 : 데이터베이스 목록총건수조회
     * </pre>
     -->
	<select id="selectDataBaseListTotcnt" resultType="int">
		SELECT COUNT(1) FROM (
			SELECT * 
		  FROM (SELECT   TABLE_ID
						,VEND_REG_NO
						,TABLE_NM
						,TABLE_SECD
						,TABLE_AUTH
						,REGR_ID
						,REGR_NM
						,REG_DT
						,MODR_ID
						,MODR_NM
						,MOD_DT
						,CONN_IP
						,DEL_AT
		
		          FROM T_MM_TBL_DATA
		        WHERE 1=1
					AND VEND_REG_NO = #{P_VEND_REG_NO}
		            <if test=' P_HI_DEPT_NM_S != null and P_HI_DEPT_NM_S != "" '>
		            AND HI_DEPT_NM LIKE '%'||#{P_HI_DEPT_NM_S}||'%'
		            </if>
		            <if test=' P_DEPT_NM_S != null and P_DEPT_NM_S != "" '>
		            AND DEPT_NM LIKE '%'||#{P_DEPT_NM_S}||'%'
		            </if>
		            <if test=' P_DEPT_NO_S != null and P_DEPT_NO_S != "" '>
		            AND DEPT_NO LIKE '%'||#{P_DEPT_NO_S}||'%'
		            </if>
		            <if test='P_AUTH_ID == "5"'>
		                <if test=' P_ARA_DEPT_CD != null and P_ARA_DEPT_CD != "" '>
		                AND ARA_DEPT_CD = #{P_ARA_DEPT_CD} 
		                </if>
		            </if>
            ) T1
		) T2
			
	</select>
	
	<!--  
     * <pre>
     * 1. 개요 : 부서 목록조회
     * 2. 처리내용 : 부서 목록을 조회
     * </pre>
     -->
	<select id="selectDeptInqireList" resultType="dataEntity">
        <include refid="ComPgng.pgngHeaderClause"/>
        SELECT DEPT_NO
                  , DEPT_NM
                  , HI_DEPT_NO
                  , HI_DEPT_NM
                  , LVL
                  , ORD_SN
                  , DEPT_SECD
                  , ARA_DEPT_CD
           FROM V_MM_DEPT
        WHERE 1=1
           <!-- <if test=' P_DEPT_NM != null and P_DEPT_NM != "" '>
               AND DEPT_NM LIKE '%'||#{P_DEPT_NM}||'%'
           </if> -->
            <if test=' P_HI_DEPT_NM_S != null and P_HI_DEPT_NM_S != "" '>
            AND HI_DEPT_NM LIKE '%'||#{P_HI_DEPT_NM_S}||'%'
            </if>
            <if test=' P_DEPT_NM_S != null and P_DEPT_NM_S != "" '>
            AND DEPT_NM LIKE '%'||#{P_DEPT_NM_S}||'%'
            </if>
            <if test=' P_DEPT_NO_S != null and P_DEPT_NO_S != "" '>
            AND DEPT_NO LIKE '%'||#{P_DEPT_NO_S}||'%'
            </if>
            <if test='P_AUTH_ID == "5"'>
                <if test=' P_ARA_DEPT_CD != null and P_ARA_DEPT_CD != "" '>
                AND ARA_DEPT_CD = #{P_ARA_DEPT_CD} 
                </if>
            </if>  
        ORDER BY DEPT_NO
		<include refid="ComPgng.pgngTailClause"/>
	</select> 
	
	
	<select id="selectEstmSendDetail" resultType="dataEntity">
		SELECT
				  ROOM_ID
				, USER_ID
				, USER_NM
				, ROLE
				, PASSWORD
		  FROM	V_ESTM_VIDO_MEMBER_IF
		 WHERE	ROOM_ID = #{P_ESTM_NO ,jdbcType=VARCHAR} || '-' || #{P_ESTM_PROCD_SEQ ,jdbcType=VARCHAR} || '-' || #{P_VIDO_MTNG_SEQ ,jdbcType=VARCHAR}
		   AND  USER_ID = #{P_MAIL_USER_ID ,jdbcType=VARCHAR}
		   AND  ROLE = #{P_ROLE ,jdbcType=VARCHAR}
		
	</select>
	
	
	<!--  
     * <pre>
     * 1. 개요 : 부서 목록총건수조회
     * 2. 처리내용 : 부서 목록의 총 건수를 조회
     * </pre>
     -->
	<select id="selectDeptInqireListTotcnt" resultType="int">
        SELECT COUNT(1)
           FROM (
        SELECT DEPT_NO
                  , DEPT_NM
                  , HI_DEPT_NO
                  , HI_DEPT_NM
                  , LVL
                  , ORD_SN
                  , DEPT_SECD
                  , ARA_DEPT_CD
           FROM V_MM_DEPT
        WHERE 1=1
           <!-- <if test=' P_DEPT_NM != null and P_DEPT_NM != "" '>
               AND DEPT_NM LIKE '%'||#{P_DEPT_NM}||'%'
           </if> -->
           <if test=' P_HI_DEPT_NM_S != null and P_HI_DEPT_NM_S != "" '>
            AND HI_DEPT_NM LIKE '%'||#{P_HI_DEPT_NM_S}||'%'
            </if>
            <if test=' P_DEPT_NM_S != null and P_DEPT_NM_S != "" '>
            AND DEPT_NM LIKE '%'||#{P_DEPT_NM_S}||'%'
            </if>
            <if test=' P_DEPT_NO_S != null and P_DEPT_NO_S != "" '>
            AND DEPT_NO LIKE '%'||#{P_DEPT_NO_S}||'%'
            </if>
            <if test='P_AUTH_ID == "5"'>
                <if test=' P_ARA_DEPT_CD != null and P_ARA_DEPT_CD != "" '>
                AND ARA_DEPT_CD = #{P_ARA_DEPT_CD} 
                </if>
            </if>  
        ORDER BY DEPT_NO
		) T2
	</select>
	
	
	<!--  
     * <pre>
     * 1. 개요 : 월별부서 목록조회
     * 2. 처리내용 : 월별부서 목록을 조회
     * </pre>
     -->
	<select id="selectDeptYMList" resultType="dataEntity">
        <include refid="ComPgng.pgngHeaderClause"/>
        SELECT
				YM
				,DEPT_NO
				, HI_DEPT_NO
				, HI_DEPT_NM
				,SUBSTR(DEPT_NO, 0, 2) AS STORE
				,SUBSTR(DEPT_NO, 3) AS ORGAN
				,DEPT_NM
		FROM V_MM_DEPT_YM
        WHERE 1=1
        	<if test=' P_YM_S != null and P_YM_S != "" '>
                AND YM = #{P_YM_S} 
            </if>  
            <if test=' P_DEPT_NM_S != null and P_DEPT_NM_S != "" '>
            	AND DEPT_NM LIKE '%'||#{P_DEPT_NM_S}||'%'
            </if>
        ORDER BY DEPT_NO
		<include refid="ComPgng.pgngTailClause"/>
	</select> 
	
	<!--  
     * <pre>
     * 1. 개요 : 월별부서 목록총건수조회
     * 2. 처리내용 : 월별부서 목록의 총 건수를 조회
     * </pre>
     -->
	<select id="selectDeptYMListTotcnt" resultType="int">
        SELECT COUNT(1)
           FROM (
        SELECT
				YM
				,DEPT_NO
				, HI_DEPT_NO
				, HI_DEPT_NM
				,SUBSTR(DEPT_NO, 0, 2) AS STORE
				,SUBSTR(DEPT_NO, 3) AS ORGAN
				,DEPT_NM
		FROM V_MM_DEPT_YM
        WHERE 1=1
        	<if test=' P_YM_S != null and P_YM_S != "" '>
                AND YM = #{P_YM_S} 
            </if>  
            <if test=' P_DEPT_NM_S != null and P_DEPT_NM_S != "" '>
            	AND DEPT_NM LIKE '%'||#{P_DEPT_NM_S}||'%'
            </if>
        ORDER BY DEPT_NO
		) T2
	</select>
	
	
	
	
	
	
	<select id="selectItemListWithPgng" resultType="dataEntity">
		<include refid="ComPgng.pgngHeaderClause"/>
		SELECT * FROM (
			<include refid="itemList"/>
			<include refid="itemListWhere"/>
			ORDER BY ITEM_NO
		) T1
		WHERE 1 = 1
		<include refid="ComPgng.pgngTailClause"/>
	</select>
	
	<select id="selectItemListTotcnt" resultType="int">
		SELECT COUNT(1) FROM (
			<include refid="itemList"/>
			<include refid="itemListWhere"/>
		) T1
		WHERE 1 = 1		
	</select>
	
	
	
	<insert id="insertCodeMstEstmSecd">
		<selectKey resultType="string" keyProperty="P_CD_DTL_ID" order="BEFORE">
            SELECT
					'E'||LPAD(NVL(MAX(SUBSTR(CD_DTL_ID,(INSTR(CD_DTL_ID, 'E', 1, 1)+1), 3)), 0) + 1, 3, 0) AS CD_DTL_ID
			FROM T_MM_CODE_MST
			WHERE 1=1
			AND CD_ID = 'ESTM_SECD'
        </selectKey>
		INSERT INTO T_MM_CODE_MST(
		 		 CD_ID
		 		,CD_DTL_ID
		 		,CD_NM
		 		,CD_DTL_NM
		 		,ORD_SN
		 		,USE_YN
		 		,RMK
		 		,ETC_VAL1
		 		,ETC_VAL2
		 		,DEL_AT
		)VALUES(
				 #{P_CD_ID ,jdbcType=VARCHAR}
				,#{P_CD_DTL_ID ,jdbcType=VARCHAR}
				,#{P_CD_NM ,jdbcType=VARCHAR}
				,#{P_CD_DTL_NM ,jdbcType=VARCHAR}
				<!-- ,#{P_ORD_SN ,jdbcType=VARCHAR} -->
				,(SELECT MAX(ORD_SN)+1 FROM T_MM_CODE_MST WHERE 1=1 AND CD_ID = 'ESTM_SECD')
				,#{P_USE_YN ,jdbcType=VARCHAR}
				,#{P_RMK ,jdbcType=VARCHAR}
				,#{P_ETC_VAL1 ,jdbcType=VARCHAR}
				,#{loginResult.DEPT_NO, jdbcType=VARCHAR}
				,'N'
		)
	</insert>
	
	
	<sql id="itemList">
        SELECT ITEM_NO
                  , ITEM_NM
                  , ITEM_UNCD
                  , F_CDVAL_INQIRE('ITEM_UNCD', ITEM_UNCD) AS ITEM_UNCD_NM
                  , STND_NM
                  , ITEM_DESC
                  , LLF_CD
                  , LLF_NM
                  , MLF_CD
                  , MLF_NM
                  , SLF_CD
                  , SLF_NM
                  , DLF_CD
                  , FILE_GRP_NO
                  , RMK
                  , REGR_ID
                  , REGR_NM
                  , REG_DT
                  , MODR_ID
                  , MODR_NM
                  , MOD_DT
                  , CONN_IP
                  , DEL_AT
           FROM V_MM_ITEM_MST	
		WHERE	NVL(DEL_AT,'N') = 'N'
	</sql>
	
	<sql id="itemListWhere">
		<if test='P_ITEM_NO_S != null and P_ITEM_NO_S != "" '>
			AND ITEM_NO LIKE '%'||#{P_ITEM_NO_S}||'%'
		</if>
		<if test='P_ITEM_NM_S != null and P_ITEM_NM_S != "" '>
			AND ITEM_NM LIKE '%'||#{P_ITEM_NM_S}||'%'
		</if>
		AND CONT_SECD LIKE '%'||#{P_CONT_SECD_S}||'%'
		
	</sql>
	
	<select id="selectMenuAuthMgrListWithPgng" resultType="dataEntity">
		<include refid="ComPgng.pgngHeaderClause"/>
		SELECT * FROM (
			<include refid="menuAuthMgrList"/>
			<include refid="menuAuthMgrListWhere"/>
			ORDER BY MENU_ID
		) T1
		WHERE 1 = 1
		<include refid="ComPgng.pgngTailClause"/>
	</select>
	
	<sql id="menuAuthMgrList">
		SELECT * FROM (
			SELECT A.AUTH_ID
                      , A.AUTH_NM
                      , B.MENU_ID
                      , C.MENU_NM
               FROM T_MM_AUTH A
                      , T_MM_AUTH_MENU B
                      , T_MM_MENU_MST C
            WHERE 1=1
                AND A.DEL_AT = 'N'
                AND A.USE_YN = 'Y'
                AND C.USE_YN = 'Y'
                AND B.MENU_ID = C.MENU_ID
                AND A.AUTH_ID = B.AUTH_ID
			<!-- SELECT	MENU.MENU_ID
						, MENU.MENU_NM
						, MENU.MENU_ENM
						, MENU.LNK_URL
						, MENU.PARAM
						, MENU.USR_SECD
						, MENU.MENU_SECD
						, MENU.LRG_MENU_ID
						, MENU.PNT_MENU_ID
						
						, AUME.READ_AUTH_YN
						, AUME.WRT_AUTH_YN
						, AUME.DEL_AUTH_YN
						
						, AUTH.AUTH_ID
						, AUTH.AUTH_NM
						, AUTH.AUTH_SECD		
			FROM	  T_MM_MENU_MST MENU
						, T_MM_AUTH_MENU AUME
						, T_MM_AUTH AUTH
			WHERE	1=1
			AND		MENU.MENU_ID = AUME.MENU_ID
			AND		AUME.AUTH_ID = AUTH.AUTH_ID
			AND		MENU.USE_YN = 'Y' -->
		)
	</sql>
	
	<select id="selectMenuAuthMgrListTotcnt" resultType="int">
		SELECT COUNT(1) FROM (
			<include refid="menuAuthMgrList"/>
			<include refid="menuAuthMgrListWhere"/>
		) T1
		WHERE 1 = 1	
	</select>
	
	<sql id="menuAuthMgrListWhere">
		<where>
			<if test='P_AUTH_ID != null and P_AUTH_ID != "" '>
				AND AUTH_ID LIKE '%'||#{P_AUTH_ID}||'%'
			</if>
			<if test='P_MENU_NM_S != null and P_MENU_NM_S != "" '>
				AND MENU_NM LIKE '%'||#{P_MENU_NM_S}||'%'
			</if>
			<if test='P_LRG_MENU_ID != null and P_LRG_MENU_ID != "" '>
				AND LRG_MENU_ID = #{P_LRG_MENU_ID}
			</if>
			<if test='P_PNT_MENU_ID != null and P_PNT_MENU_ID != "" '>
				AND PNT_MENU_ID LIKE '%'||#{P_PNT_MENU_ID}||'%'
			</if>
		</where>
	</sql>
	
	<!--  
     * <pre>
     * 1. 개요 : 결재선조회 
     * 2. 처리내용 :
     *  	TABLE : VEOP_PREM(사용자정보 VIEW)
     * </pre>
     * @Query ID : selectApprLineListWithPgng
     * @date : 2018. 03. 15.
     * @author : 은우소프트 맹경열
     * @history : 
     *  =======================================================
     *  변경일             		작성자                     		변경내용  
     *  =======================================================
     *  2018. 03. 15.       은우소프트 맹경열              최초 작성 
     *  =======================================================    
     -->	
	<select id="selectApprLineListWithPgng" resultType="dataEntity">
		<include refid="pgngHeaderClause"/>
		SELECT * FROM (
			<include refid="apprLineList"/>
			<include refid="apprLineListWhere"/>
			ORDER BY MOD_DT DESC
		) T1
		WHERE 1 = 1
		<include refid="pgngTailClause"/>
	</select>		
	
	<select id="selectApprLineListTotcnt" resultType="int">
		SELECT COUNT(1) FROM (
			<include refid="apprLineList"/>
			<include refid="apprLineListWhere"/>
		) T1
		WHERE 1 = 1		
	</select>	
	
	<!-- 
	구매(계약)의뢰 조회 팝업 
	 -->
	<select id="selectPrchRqstListWithPang" resultType="dataEntity">
		<include refid="ComPgng.pgngHeaderClause"/>
		SELECT * FROM (
			<include refid="prchRqstList"/>
			<include refid="prchRqstListWhere"/>
			ORDER BY RQST_DE DESC
		) T1
		WHERE 1 = 1
		<include refid="ComPgng.pgngTailClause"/>
	</select>		
	
	<select id="selectPrchRqstListTotCnt" resultType="int">
		SELECT COUNT(1) FROM (
			<include refid="prchRqstList"/>
			<include refid="prchRqstListWhere"/>
		) T1
		WHERE 1 = 1		
	</select>
	
	<sql id="prchRqstList">
		SELECT * FROM (
			SELECT	IFC_ID
						, CONT_RQST_NO
						, CONT_RQST_DEPT
						, DEPTNAME
						, CONT_SECD
						, CONT_DECD
						, RQST_DE
						, RQST_EMPL_NO
						, USERNAME
						, RQST_TEL_NO
						, RCV_DEPT
						, DOC_NO
						, TTL_TXT
						, USE_PPRS
						, RMK
						, IFC_DT
						, SCRV_SE
						, BFAN_REG_YN
						, BID_REG_YN
						, CONT_REG_YN
						, PRVT_CONT_YN
						, ESTMT_REG_YN
						, CTRC_TE
						, RQUI_DE
						, CONT_STDE
						, CONT_ENDE
			FROM		T_IF_CTRQ_MST IF
						,V_SSO_USER SSO
			WHERE	1=1
			AND		IF.CONT_RQST_DEPT = SSO.LEGACYDEPTCODE
			AND		IF.RQST_EMPL_NO = SSO.SABUN
			AND		SSO.ADDJOBTYPE = 'BASIC'
			AND		IF.RCV_DEPT = #{P_DEPT_NO, jdbcType=VARCHAR, javaType=String}
			<if test='P_CONT_FLAG != null and P_CONT_FLAG != ""'>
			AND		IF.BID_REG_YN = 'N'
			AND		IF.ESTMT_REG_YN = 'N'
			AND		IF.CONT_REG_YN = 'N'
			</if>
		) A	
	</sql>
	
	<sql id="prchRqstListWhere">
		<where>
			<if test='P_RQST_EMPL_NO != null and P_RQST_EMPL_NO != "" '>
				AND USERNAME LIKE '%'||#{P_RQST_EMPL_NO}||'%'
			</if>
			<if test='P_CONT_RQST_DEPT != null and P_CONT_RQST_DEPT != "" '>
				AND DEPTNAME LIKE '%'||#{P_CONT_RQST_DEPT}||'%'
			</if>
			<if test='P_CONT_RQST_NO != null and P_CONT_RQST_NO != "" '>
				AND CONT_RQST_NO LIKE '%'||#{P_CONT_RQST_NO}||'%'
			</if>
			<if test='P_TTL_TXT != null and P_TTL_TXT != "" '>
				AND TTL_TXT LIKE '%'||#{P_TTL_TXT}||'%'
			</if>
			<if test='P_BFAN_REG_YN != null and P_BFAN_REG_YN != "" '>
				AND NVL(BFAN_REG_YN,'N') = #{P_BFAN_REG_YN}
			</if>
			<if test='P_BID_REG_YN != null and P_BID_REG_YN != "" '>
				AND NVL(BID_REG_YN,'N') = #{P_BID_REG_YN}
			</if>
			<if test='P_CONT_REG_YN != null and P_CONT_REG_YN != "" '>
				AND NVL(CONT_REG_YN,'N') = #{P_CONT_REG_YN}
			</if>
			<if test='P_ESTMT_REG_YN != null and P_ESTMT_REG_YN != "" '>
				AND NVL(ESTMT_REG_YN,'N') = #{P_ESTMT_REG_YN}
			</if>
			<if test='P_PRVT_CONT_YN != null and P_PRVT_CONT_YN != "" '>
				AND NVL(PRVT_CONT_YN,'N') = #{P_PRVT_CONT_YN}
			</if>
			<if test='P_BFAN_REG_YN != null and P_BFAN_REG_YN != "" '>
				AND NVL(BFAN_REG_YN,'N') = #{P_BFAN_REG_YN}
			</if>
			<if test='P_BID_REG_YN != null and P_BID_REG_YN != "" '>
				AND NVL(BID_REG_YN,'N') = #{P_BID_REG_YN}
			</if>
			<if test='P_CONT_REG_YN != null and P_CONT_REG_YN != "" '>
				AND NVL(CONT_REG_YN,'N') = #{P_CONT_REG_YN}
			</if>
			<if test='P_CONT_SECD != null and P_CONT_SECD != "" '>
				AND CONT_SECD = #{P_CONT_SECD}
			</if>
		</where>
	</sql>
	
	<select id="selectPrchRqstDetail" resultType="dataEntity">
		SELECT	IFC_ID
					, CONT_RQST_NO
					, CONT_RQST_DEPT
					, SSO.DEPTNAME AS RQST_DEPT_NM
					, CONT_SECD
					, CONT_DECD
					, RQST_DE
					, RQST_EMPL_NO
					, RQST_TEL_NO
					, SSO.USERNAME AS RQST_USR_NM
					, RCV_DEPT
					, DOC_NO
					, TTL_TXT
					, USE_PPRS
					, RMK
					, IFC_DT
					, SCRV_SE
					, BFAN_REG_YN
					, BID_REG_YN
					, CONT_REG_YN
					, PRVT_CONT_YN
					, CTRC_TE
					, RQUI_DE
					, CONT_STDE
					, CONT_ENDE
					, CASE
						WHEN	CONT_SECD = 'A'
						THEN		(SELECT SUM(PREP_TOT_AMT) FROM T_IF_CTRQ_DTL WHERE IFC_ID = MST.IFC_ID)
						WHEN	CONT_SECD = 'D'
						THEN		(SELECT SUM(PREP_AMT) FROM T_IF_CTRQ_DTL WHERE IFC_ID = MST.IFC_ID)
						WHEN	CONT_SECD = 'B'
						THEN		(SELECT SUM(PREP_AMT) FROM T_IF_CTRQ_DTL WHERE IFC_ID = MST.IFC_ID)
						WHEN	CONT_SECD = 'C'
						THEN		(SELECT SUM(ESTT_AMT) FROM T_IF_CTRQ_DTL WHERE IFC_ID = MST.IFC_ID)
					  END AS BSNS_BDG_AMT
					, (SELECT SUM(NVL(PREP_STAX,0)) FROM T_IF_CTRQ_DTL WHERE IFC_ID = MST.IFC_ID) AS PREP_STAX
		FROM	T_IF_CTRQ_MST MST
					,V_SSO_USER SSO
		WHERE	1=1
		AND		MST.CONT_RQST_DEPT = SSO.LEGACYDEPTCODE
		AND		MST.RQST_EMPL_NO = SSO.SABUN
		AND		IFC_ID = #{P_IFC_ID}
		AND		CONT_RQST_NO = #{P_CONT_RQST_NO}
		AND		SSO.ADDJOBTYPE = 'BASIC'
	</select>
	
	<select id="selectPrchRqstItemList" resultType="dataEntity">
		SELECT	IFC_ID
					, IFC_SN
					, CONT_RQST_NO
					, CONT_RQST_DEPT
					, CTRC_KD
					, F_CDVAL_INQIRE('CTRC_KD',CTRC_KD) AS CTRC_KD_NM
					, CTRC_WRK_CNTN
					, CTRC_TE
					, CTRC_MNGR1
					, CTRC_MNGR2
					, ATCH_DOC1
					, ATCH_DOC2
					, ATCH_DOC3
					, ATCH_DOC4
					, ATCH_DOC5
					, UPRC_CONT_KD
					, ITEM_CD
					, ITEM_NM
					, STND
					, UNIT
					, INO_PE_SE
					, CURR_UNIT
					, EXRT
					, PREP_QTY
					, PREP_UPRC
					, PREP_AMT
					, PREP_STAX
					, PREP_TOT_AMT
					, ETC_SDEPS
					, FRCUR_UPRC
					, FRCUR_AMT
					, ESTT_AMT
					, STAX_AMT
					, SUM_AMT
					, ETMT_DRFT_NO
					, ETMT_DRFT_SN
					, ACTG_YR
					, BSNS_CLS_CD
					, BDG_BSNS_CD
					, BDG_DEPT_CD
					, BDG_SBJT_CD
					, BDG_ASST_SBJT_CD
					, SCRV_SE
					, ACNT_CD
					, IFC_DT
		FROM		T_IF_CTRQ_DTL
		WHERE	1=1
		AND		IFC_ID = #{P_IFC_ID}
		AND		CONT_RQST_NO = #{P_CONT_RQST_NO}
	</select>
	
	<!--  
     * <pre>
     * 1. 개요 : 수의계약 사유조회 
     * 2. 처리내용 :
     *  	TABLE : T_MM_PVRS_MST
     * </pre>
     * @Query ID : selectPvrsMstListWithPgng
     * @date : 2018. 08. 02.
     * @author : 은우소프트 맹경열
     * @history : 
     *  =======================================================
     *  변경일             		작성자                     		변경내용  
     *  =======================================================
     *  2018. 08. 02.       은우소프트 맹경열              최초 작성 
     *  =======================================================    
     -->
	<select id="selectPvrsMstListWithPgng" resultType="dataEntity">
		<include refid="ComPgng.pgngHeaderClause"/>
		SELECT * FROM (
			<include refid="pvrsMstList"/>
			<include refid="pvrsMstListWhere"/>
			ORDER BY ORD_SN ASC
		) T1
		WHERE 1 = 1
		<include refid="ComPgng.pgngTailClause"/>
	</select>		
	
	<select id="selectPvrsMstListTotcnt" resultType="int">
		SELECT COUNT(1) FROM (
			<include refid="pvrsMstList"/>
			<include refid="pvrsMstListWhere"/>
		) T1
		WHERE 1 = 1		
	</select>
	
	<sql id="pvrsMstList">
		SELECT A.* FROM (
			SELECT	PVCT_RSN_NO
						, PVCT_RSNM
						, PVCT_RSN_SECD
						, ORD_SN
			FROM		T_MM_PVRS_MST
			WHERE	1=1
			AND		DEL_AT = 'N'
		) A
	</sql>
	
	<sql id="pvrsMstListWhere">
		<where>
			<if test="P_PVCT_RSNM != null and P_PVCT_RSNM != '' ">
				AND PVCT_RSNM LIKE '%'||P_PVCT_RSNM||'%'
			</if>
			<if test="P_PVCT_RSNM_S != null and P_PVCT_RSNM_S != '' ">
				AND PVCT_RSNM LIKE '%' ||#{P_PVCT_RSNM_S}|| '%'
			</if>
		</where>
	</sql>
	<insert id="compGroupRegist">
		INSERT INTO T_MM_GPVD_MST(
		 GRP_ID
		,GRP_NM
		,RMK
		<include refid="ComRegr.RegrColumnClause"/>
		)VALUES(
			 #{P_GRP_ID ,jdbcType=VARCHAR}
			,#{P_GRP_NM ,jdbcType=VARCHAR}
			,#{P_RMK ,jdbcType=VARCHAR}
			<include refid="ComRegr.RegrValueClause"/>
		)
	</insert>
	<select id="compGroupDetail" resultType="dataEntity">
		SELECT GRP_ID
				,GRP_NM
				,RMK
				<include refid="ComRegr.RegrColumnClause"/>
		FROM T_MM_GPVD_MST
		WHERE 1=1
		AND GRP_ID = #{P_GRP_ID ,jdbcType=VARCHAR}
	</select>
	<update id="compGroupUpdate">
		UPDATE T_MM_GPVD_MST
		SET GRP_ID = #{P_GRP_ID,jdbcType=VARCHAR}
		,GRP_NM = #{P_GRP_NM,jdbcType=VARCHAR}
		,RMK = #{P_RMK,jdbcType=VARCHAR}
		WHERE 1=1
		AND GRP_ID = #{P_GRP_ID ,jdbcType=VARCHAR}
		
	</update>
	<delete id="compGroupMstDelete">
		DELETE T_MM_GPVD_MST
		WHERE 1=1
		AND GRP_ID = #{P_GRP_ID ,jdbcType=VARCHAR}
	</delete>
	<delete id="compGroupListDelete">
		DELETE T_MM_GPVD_LIST
		WHERE 1=1
		AND GRP_ID = #{P_GRP_ID ,jdbcType=VARCHAR}
		<if test="P_VEND_REG_NO != null and P_VEND_REG_NO != '' ">
			AND VEND_REG_NO = #{P_VEND_REG_NO ,jdbcType=VARCHAR}
		</if>
	</delete>
	
	<!--  
     * <pre>
     * 1. 개요 : 사업 목록조회_페이징 and 토탈카운트
     * 2. 처리내용 :
     *  	TABLE : OR_PROGXM
     * </pre>
     * @Query ID : selectPrgmListWithPgng
     * @Query ID : selectPrgmListTotCnt
     * @date : 2018. 02. 20.
     * @author : 은우소프트 맹경열
     * @history : 
     *  =======================================================
     *  변경일             		작성자                     		변경내용  
     *  =======================================================
     *  2018. 02. 20.       은우소프트 맹경열              최초 작성 
     *  =======================================================   
     -->
	<select id="selectPrgmListWithPgng" resultType="dataEntity">
		<include refid="pgngHeaderClause"/>
		SELECT * FROM (
			<include refid="prgmList"/>
			<include refid="prgmListWhere"/>
			ORDER BY PROG_CODE DESC
		) T1
		WHERE 1 = 1
		<include refid="pgngTailClause"/>
	</select>
	<select id="selectPrgmListTotCnt" resultType="int">
		SELECT COUNT(1) FROM (
			<include refid="prgmList"/>
			<include refid="prgmListWhere"/>
		) T1
		WHERE 1 = 1		
	</select>	
	
	<!--  
     * <pre>
     * 1. 개요 : BIS 발주 디자인 목록
     * 2. 처리내용 :
     
     * </pre>
     * @Query ID : "selectBisDsgnListWithPgng"
     * @date : 2018. 11. 21.
     * @author : 은우소프트 맹경열
     * @history : 
     *  =======================================================
     *  변경일             		작성자                     		변경내용  
     *  =======================================================
     *  2018. 11. 21.       은우소프트 맹경열              최초 작성 
     *  =======================================================   
     -->
	<select id="selectBisDsgnListWithPgng" resultType="dataEntity">
		<include refid="ComPgng.pgngHeaderClause"/>
		SELECT * FROM (
			<include refid="dsgnList"/>
			<include refid="dsgnListWhere"/>
			ORDER BY A.INST_DATE DESC	
		) T1
		WHERE 1 = 1
		<include refid="ComPgng.pgngTailClause"/>
	</select>
	
	<!--  
     * <pre>
     * 1. 개요 : BIS 발주 디자인 목록 건수
     * 2. 처리내용 :
     *      
     * </pre>
     * @Query ID : selectBisDsgnListTotcnt
     * @date : 2018. 11. 21.
     * @author : 은우소프트 맹경열
     * @history : 
     *  =======================================================
     *  변경일             		작성자                     		변경내용  
     *  =======================================================
     *  2018. 11. 21.       은우소프트 맹경열              최초 작성 
     *  =======================================================   
     -->
	<select id="selectBisDsgnListTotcnt" resultType="int">
		SELECT COUNT(1) FROM (
			<include refid="dsgnList"/>
			<include refid="dsgnListWhere"/>
		) T1
		WHERE 1 = 1		
	</select>

	<sql id="dsgnList">
		SELECT A.* FROM (
			SELECT	PUBL_YEAR
						, COUR_CODE
						, COUR_BOOK
						, SRES_CODE
						, TRGT_CODE
						, CSAT_LKYN
						, TRTY_CODE
						, PUBL_METH
						, EXPC_PBDT
						, EXPC_FXPR
						, QNCD_YSNO
						, QNCD_NUMB
						, PUBL_INDT
						, COUR_PRFX
						, ISBN
						, FTPT_INDT
						, PYFW_PYMD
						, INCM_TAXR
						, PSVN_RATE
						, ETCX_PYMD
						, BKSZ_CODE
						, BBME_CODE
						, BVME_CODE
						, COVR_CCNT
						, CMME_CODE
						, MAIN_CCNT
						, ETCX_BVME
						, SPCF_YSNO
						, INST_USID
						, INST_DATE
						, UPDT_USID
						, UPDT_DATE
						, FNAL_IP
			FROM		BISDBA.ED_EDCTXM
			WHERE	1=1
		) A
	</sql>
	
	<sql id="dsgnListWhere">
		<where>
			<if test='P_COUR_BOOK != null and P_COUR_BOOK != "" '>
				AND COUR_BOOK LIKE '%'||#{P_COUR_BOOK}||'%'
			</if>
		</where>
	</sql>	
	
	<!--  
     * <pre>
     * 1. 개요 : 사용자정보목록조회_페이징 
     * 2. 처리내용 :
     * </pre>
     * @Query ID : selectLaborerListWithPgng
     * @date : 2018. 12. 28.
     * @author : 은우소프트 맹경열
     * @history : 
     *  =======================================================
     *  변경일             		작성자                     		변경내용  
     *  =======================================================
     *  2018. 12. 28.       은우소프트 맹경열              최초 작성 
     *  =======================================================    
     -->
	<select id="selectLaborerListWithPgng" resultType="dataEntity">
		<include refid="pgngHeaderClause"/>
		SELECT * FROM (
			<include refid="laborerList"/>
			<include refid="laborerListWhere"/>
		) T1
		WHERE 1 = 1
		ORDER BY T1.DEPT_NO, T1.OPOS_CODE, T1.VEND_REG_NO
		<include refid="pgngTailClause"/>
	</select>		
	
	<!--  
     * <pre>
     * 1. 개요 : 사용자정보목록총건수조회 
     * 2. 처리내용 :
     *  	TABLE : VEOP_PREM(사용자정보 VIEW)
     * </pre>
     * @Query ID : selectLaborerListTotcnt
     * @date : 2018. 12. 28.
     * @author : 은우소프트 맹경열
     * @history : 
     *  =======================================================
     *  변경일             		작성자                     		변경내용  
     *  =======================================================
     *  2018. 12. 28.       은우소프트 맹경열              최초 작성 
     *  =======================================================    
     -->
	<select id="selectLaborerListTotcnt" resultType="int">
		SELECT COUNT(1) FROM (
			<include refid="laborerList"/>
			<include refid="laborerListWhere"/>
		) T1
		WHERE 1 = 1		
	</select>	
	
	<sql id="laborerList">
		SELECT * FROM (
			SELECT	TA.*
			FROM		
			(
				SELECT	VI.EMPL_NUMB	AS SABUN
							, VI.ENCO_DATE
							, VI.DEPT_CODE	AS DEPT_NO
							, VI.DEPT_NAME	AS DEPT_NM
							, VI.EMPL_NAME	AS VEND_NM
							, VI.EMPL_NAME	AS RPRS_NM
							, VI.STEC_DATE
							, VI.JBGP_CODE
							, VI.JBGP_NAME
							, VI.SPOS_CODE
							, VI.SPOS_NAME
							, VI.CCEM_NAME
							, VI.RETR_DATE
							, VI.OPOS_CODE
							, VI.OPOS_NAME
							, VI.CPOS_CODE
							, VI.CPOS_NAME
							, VI.ENEE_NAME
							, VI.WODN_CODE
							, VI.WODN_NAME
							, VI.CLSD_CODE
							, VI.CLSD_NAME
							, VI.WRKS_CODE
							, VI.WRKS_NAME
							, VI.GNDR_CODE
							, VI.GNDR_NAME
							, REPLACE(VI.COMP_TENR,'-','')	AS TEL_NO
							, VI.POST_NUMB
							, REPLACE(VI.HNPN_TENR,'-','')	AS CP_NO
							, VI.DTL1_ADDR	AS ADDR_NM
							, VI.DTL2_ADDR	AS ADDR_DENM
							, VI.ANSD_DATE
							, (VI.ELTR_MLAD || '@ebs.co.kr') AS EMAL_ADDR
							, HR.RERN_NUMB 
							, (SELECT USERID FROM V_SSO_USER WHERE SABUN = VI.EMPL_NUMB AND LEGACYDEPTCODE = VI.DEPT_CODE) VEND_REG_NO
				FROM		MISDBA.VI_MASTXM VI
							, MISDBA.HR_MASTXM HR
				WHERE	1=1
				AND		VI.EMPL_NUMB = HR.EMPL_NUMB
			) TA
			WHERE	1=1
			AND		VEND_REG_NO IS NOT NULL
			AND		WODN_CODE = '1'
		)A
	</sql>
	
	<sql id="laborerListWhere">
		<where>
			<if test='P_USR_NM != null and P_USR_NM != "" '>
				AND RPRS_NM LIKE '%'||#{P_USR_NM}||'%'
			</if>
			<if test='P_DEPT_NM != null and P_DEPT_NM != "" '>
				AND DEPT_NM LIKE '%'||#{P_DEPT_NM}||'%'
			</if>
		</where>
	</sql>	
	
	
	<select id="selectMjrHndlItemListWithPgng" resultType="dataEntity"> 
		<include refid="ComPgng.pgngHeaderClause"/>  
		SELECT * FROM (
			<include refid="mjrHndlItemList"/>
			<include refid="mjrHndlItemListWhere"/> 
		) T1
		ORDER BY LLF_CD, MLF_CD, SLF_CD, DLF_CD, ITEM_NO	
		<include refid="ComPgng.pgngTailClause"/> 
	</select>
	
	<select id="selectMjrHndlItemListTotcnt" resultType="int">
		SELECT COUNT(1) FROM (
			<include refid="mjrHndlItemList"/>
			<include refid="mjrHndlItemListWhere"/> 
		) T1
		WHERE 1 = 1		 
	</select>
	
	<sql id="mjrHndlItemList">
        SELECT ITEM_NO
                  , ITEM_NM
                  , ITEM_UNCD
                  , STND_NM
                  , ITEM_DESC
                  , LLF_CD
                  , MLF_CD
                  , SLF_CD
                  , DLF_CD
                  , RMK
                  , DEL_AT
           FROM V_MM_ITEM_MST
	</sql>
	
	<sql id="mjrHndlItemListWhere">
		<where>
		    1=1
		    AND DEL_AT = 'N'
		    <if test='P_ITEM_NM_S != null and P_ITEM_NM_S != "" '>
				AND ITEM_NM LIKE '%' ||#{P_ITEM_NM_S}|| '%' 
			</if>
		</where>
	</sql>
	
	<!--  
     * <pre>
     * 1. 개요 : 일괄공고 대상 공고대기 목록조회_페이징 
     * 2. 처리내용 :
     * </pre>
     * @Query ID : selectUniAnncItemListWithPgng
     * @date : 2018. 03. 08.
     * @author : 은우소프트 맹경열
     * @history : 
     *  =======================================================
     *  변경일             		작성자                     		변경내용  
     *  =======================================================
     *  2019. 03. 08.       은우소프트 맹경열              최초 작성 
     *  =======================================================   
     -->
	<select id="selectUniAnncItemListWithPgng" resultType="dataEntity">
		<include refid="pgngHeaderClause"/>
		SELECT * FROM (
			<include refid="uniAnncItemList"/>
			<include refid="uniAnncItemListWhere"/>
			ORDER BY PCAC_NO DESC
		) T1
		WHERE 1 = 1
		<include refid="pgngTailClause"/>
	</select>
	
	<!--  
     * <pre>
     * 1. 개요 : 일괄공고 대상 공고대기 목록총건수조회 
     * 2. 처리내용 :
     * </pre>
     * @Query ID : selectUniAnncItemListTotcnt
     * @date : 2018. 03. 08.
     * @author : 은우소프트 맹경열
     * @history : 
     *  =======================================================
     *  변경일             		작성자                     		변경내용  
     *  =======================================================
     *  2019. 03. 08.       은우소프트 맹경열              최초 작성 
     *  =======================================================    
     -->
	<select id="selectUniAnncItemListTotcnt" resultType="int">
		SELECT COUNT(1) FROM (
			<include refid="uniAnncItemList"/>
			<include refid="uniAnncItemListWhere"/>
		) T1
		WHERE 1 = 1		
	</select>	
	
	<sql id="uniAnncItemList">
		SELECT	*
		FROM		(
			SELECT	MST.BID_WAIT_NO
						, MST.PCAC_NO
						, MST.PCAC_ODR
						, MST.CONT_SECD
						, F_CDVAL_INQIRE('CONT_SECD',MST.CONT_SECD) AS CONT_SECD_NM
						, MST.BID_MTCD
						, MST.PCRQ_NM
						, MST.PCRQ_NO
						, MST.RQR_DE
						, MST.RQR_DEPT_NO
						, MST.RQR_DEPT_NM
						, MST.RQR_CHRGR_ID
						, MST.RQR_CHRGR_NM
						, MST.PCAC_PSCD
						, MST.PRCH_CHRGR_ID
						, MST.PRCH_CHRGR_NM
						, MST.ESTT_AMT
						, MST.BF_STND_OPEN_YN
						, MST.FBID_YN
						, MST.FILE_GRP_NO
						, MST.RTRN_RSN
						<include refid="ComRegr.selectColumnClause"/>
			FROM		V_PA_MST MST
			WHERE	1=1
			AND		MST.PCAC_ODR = (
												SELECT	MAX(PCAC_ODR)
												FROM		V_PA_MST
												WHERE	1=1
												AND		BID_WAIT_NO = MST.BID_WAIT_NO
												AND		PCAC_NO = MST.PCAC_NO 
												)
			AND		MST.PCAC_PSCD = 'B'
			AND		MST.BID_MTCD = 'BID'		
			AND		MST.UNI_ANNC_PSBL_YN = 'Y' 
            AND		MST.PCRQ_NO NOT IN
                        (
                            SELECT A.PCRQ_NO AS PCRQ_NO
                               FROM (
                                             SELECT PCRQ_NO, COUNT(*) AS BI_ITEM_CNT
                                                FROM T_BI_MST A
                                                         ,T_BI_ITEM B
                                             WHERE A.ANNC_NO = B.ANNC_NO
                                                 AND A.ANNC_NGR = B.ANNC_NGR
                                                 AND A.BID_PSCD NOT IN ('PF41', 'PF99')
                                                 AND NVL(A.DEL_AT, '') != 'N'
                                             GROUP BY PCRQ_NO
                                         ) A
                                         , (
                                             SELECT A.BID_WAIT_NO, A.PCRQ_NO, COUNT(*) AS PA_ITEM_CNT
                                                FROM V_PA_MST A
                                                         , V_PA_ITEM B
                                              WHERE A.BID_WAIT_NO = B.BID_WAIT_NO
                                              GROUP BY A.BID_WAIT_NO, A.PCRQ_NO
                                         ) B
                            WHERE A.PCRQ_NO = B.PCRQ_NO
                                 AND A.BI_ITEM_CNT = B.PA_ITEM_CNT
                          )
   			AND MST.BID_WAIT_NO NOT IN (
									                           SELECT IFC_ID
															  FROM T_BI_MST
															 WHERE BID_MTCD = 'PRVT'
															   AND MST.BID_WAIT_NO = IFC_ID
															)
			AND		NVL(MST.DEL_AT,'N') != 'Y'
			
<!-- 
			AND		NOT EXISTS (SELECT IFC_ID FROM T_BI_MST WHERE IFC_ID = MST.BID_WAIT_NO AND NVL(DEL_AT,'N') != 'Y' )
			AND		NOT EXISTS (
											SELECT	PCRQ_NO
											FROM		T_BI_ITEM
											WHERE	PCRQ_NO = MST.PCRQ_NO
											)
			AND		MST.BID_WAIT_NO != #{P_BID_WAIT_NO} -->
					)
	</sql>
	
	<sql id="uniAnncItemListWhere">
		<where>
			<if test='P_BID_WAIT_NO_S != null and P_BID_WAIT_NO_S != "" '>
				AND	BID_WAIT_NO = #{P_BID_WAIT_NO_S}
			</if>		
			<if test='P_PCAC_NO_S != null and P_PCAC_NO_S != "" '>
				AND	PCAC_NO = #{P_PCAC_NO_S}
			</if>		
			<if test='P_PCRQ_NM_S != null and P_PCRQ_NM_S != "" '>
				AND	PCRQ_NM = #{P_PCRQ_NM_S}
			</if>		
		</where>
	</sql>
	
	<!--  
     * <pre>
     * 1. 개요 : 일괄견적 대상 공고대기 목록조회_페이징 
     * 2. 처리내용 :
     * </pre>
     * @Query ID : selectUniEstItemListWithPgng
     * @date : 2018. 08. 06.
     * @author : 은우소프트 하성윤
     * @history : 
     *  =======================================================
     *  변경일             		작성자                     		변경내용  
     *  =======================================================
     *  2019. 08. 06.       은우소프트 하성윤              최초 작성 
     *  =======================================================   
     -->
	<select id="selectUniEstItemListWithPgng" resultType="dataEntity">
		<include refid="pgngHeaderClause"/>
		SELECT * FROM (
			<include refid="uniEstItemList"/>
			<include refid="uniEstItemListWhere"/>
			ORDER BY PCAC_NO DESC
		) T1
		WHERE 1 = 1
		<include refid="pgngTailClause"/>
	</select>
	
	<!--  
     * <pre>
     * 1. 개요 : 일괄견적 대상 공고대기 목록총건수조회 
     * 2. 처리내용 :
     * </pre>
     * @Query ID : selectUniEstItemListTotcnt
     * @date : 2018. 08. 06.
     * @author : 은우소프트 하성윤
     * @history : 
     *  =======================================================
     *  변경일             		작성자                     		변경내용  
     *  =======================================================
     *  2018. 08. 06.      은우소프트 하성윤             최초 작성 
     *  =======================================================    
     -->
	<select id="selectUniEstItemListTotcnt" resultType="int">
		SELECT COUNT(1) FROM (
			<include refid="uniEstItemList"/>
			<include refid="uniEstItemListWhere"/>
		) T1
		WHERE 1 = 1		
	</select>	
	
	<sql id="uniEstItemList">
		SELECT A.* FROM (
			SELECT	BID_WAIT_NO
						, PA.PCAC_NO
						, PA.PCAC_ODR
						, PA.CONT_SECD
						, F_CDVAL_INQIRE('CONT_SECD',PA.CONT_SECD) AS CONT_SECD_NM
						, PA.BID_MTCD
						, PA.PCRQ_NM
						, PA.PCRQ_NO
						, PA.RQR_DE
						, PA.RQR_DEPT_NO
						, PA.RQR_DEPT_NM
						, PA.RQR_CHRGR_ID
						, PA.RQR_CHRGR_NM
						, PA.PCAC_PSCD
						, PA.PRCH_CHRGR_ID
						, PA.PRCH_CHRGR_NM
						, PA.ESTT_AMT
						, PA.BF_STND_OPEN_YN
						, PA.FBID_YN
						, PA.FILE_GRP_NO
						, PA.RTRN_RSN
						, 'PF00' AS BID_PSCD
						, '의뢰대기' AS BID_PSCD_NM
						<include refid="ComRegr.selectColumnClause"/>
			FROM		V_PA_MST PA
			WHERE	1=1
			AND		PA.PCAC_ODR = (
												SELECT	MAX(PCAC_ODR)
												FROM		V_PA_MST
												WHERE	1=1
												AND		BID_WAIT_NO = PA.BID_WAIT_NO
												AND		PCAC_NO = PA.PCAC_NO 
											)
			AND		PA.PCAC_PSCD = 'B'
			AND		PA.BID_MTCD = 'EST'
			AND		PA.CONT_SECD != '4'
			AND		NVL(PA.DEL_AT,'N') != 'Y'
			AND		PA.UNI_ANNC_PSBL_YN = 'Y' 
<!-- 			AND		NOT EXISTS (SELECT IFC_ID FROM T_BI_MST WHERE IFC_ID = PA.BID_WAIT_NO AND NVL(DEL_AT,'N') != 'Y' ) -->
            AND		PA.PCRQ_NO NOT IN 
                        (
                            SELECT A.PCRQ_NO AS PCRQ_NO
                               FROM (
                                             SELECT PCRQ_NO, COUNT(*) AS BI_ITEM_CNT
                                                FROM T_BI_MST A
                                                         ,T_BI_ITEM B
                                             WHERE A.ANNC_NO = B.ANNC_NO
                                                 AND A.ANNC_NGR = B.ANNC_NGR
                                                 AND	 A.BID_MTCD = 'EST'
                                                 AND A.BID_PSCD NOT IN ('PF99','PF41')
                                             GROUP BY PCRQ_NO
                                         ) A
                                         , (
                                             SELECT A.BID_WAIT_NO, A.PCRQ_NO, COUNT(*) AS PA_ITEM_CNT
                                                FROM V_PA_MST A
                                                         , V_PA_ITEM B
                                              WHERE A.BID_WAIT_NO = B.BID_WAIT_NO
                                              GROUP BY A.BID_WAIT_NO, A.PCRQ_NO
                                         ) B
                            WHERE A.PCRQ_NO = B.PCRQ_NO
                                 AND A.BI_ITEM_CNT = B.PA_ITEM_CNT
                          )
<!-- 
			AND		NOT EXISTS (
											SELECT	PCRQ_NO
											FROM		T_BI_ITEM
											WHERE	PCRQ_NO = PA.PCRQ_NO
											)
			AND		PA.UNI_ANNC_PSBL_YN = 'Y'
 --> 	
		) A
	</sql>
	
	<sql id="uniEstItemListWhere">
		<where>
			<if test='P_BID_WAIT_NO_S != null and P_BID_WAIT_NO_S != "" '>
				AND	BID_WAIT_NO = #{P_BID_WAIT_NO_S}
			</if>		
			<if test='P_PCAC_NO_S != null and P_PCAC_NO_S != "" '>
				AND	PCAC_NO = #{P_PCAC_NO_S}
			</if>		
			<if test='P_PCRQ_NM_S != null and P_PCRQ_NM_S != "" '>
				AND	PCRQ_NM = #{P_PCRQ_NM_S}
			</if>		
		</where>
	</sql>
	
	<!--  
     * <pre>
     * 1. 개요 : 일괄수의시담 대상 공고대기 목록조회_페이징 
     * 2. 처리내용 :
     * </pre>
     * @Query ID : selectUniPrvtItemListWithPgng
     * @date : 2018. 08. 06.
     * @author : 은우소프트 하성윤
     * @history : 
     *  =======================================================
     *  변경일             		작성자                     		변경내용  
     *  =======================================================
     *  2019. 08. 06.       은우소프트 하성윤              최초 작성 
     *  =======================================================   
     -->
	<select id="selectUniPrvtItemListWithPgng" resultType="dataEntity">
		<include refid="pgngHeaderClause"/>
		SELECT * FROM (
			<include refid="uniPrvtItemList"/>
			<include refid="uniPrvtItemListWhere"/>
			ORDER BY PCAC_NO DESC
		) T1
		WHERE 1 = 1
		<include refid="pgngTailClause"/>
	</select>
	
	<!--  
     * <pre>
     * 1. 개요 : 일괄견적 대상 공고대기 목록총건수조회 
     * 2. 처리내용 :
     * </pre>
     * @Query ID : selectUniPrvtItemListTotcnt
     * @date : 2018. 08. 06.
     * @author : 은우소프트 하성윤
     * @history : 
     *  =======================================================
     *  변경일             		작성자                     		변경내용  
     *  =======================================================
     *  2018. 08. 06.      은우소프트 하성윤             최초 작성 
     *  =======================================================    
     -->
	<select id="selectUniPrvtItemListTotcnt" resultType="int">
		SELECT COUNT(1) FROM (
			<include refid="uniPrvtItemList"/>
			<include refid="uniPrvtItemListWhere"/>
		) T1
		WHERE 1 = 1		
	</select>	
	
	<sql id="uniPrvtItemList">
		SELECT A.* FROM (
			SELECT	BID_WAIT_NO
						, PA.PCAC_NO
						, PA.PCAC_ODR
						, PA.CONT_SECD
						, F_CDVAL_INQIRE('CONT_SECD',PA.CONT_SECD) AS CONT_SECD_NM
						, PA.BID_MTCD
						, PA.PCRQ_NM
						, PA.PCRQ_NO
						, PA.RQR_DE
						, PA.RQR_DEPT_NO
						, PA.RQR_DEPT_NM
						, PA.RQR_CHRGR_ID
						, PA.RQR_CHRGR_NM
						, PA.PCAC_PSCD
						, PA.PRCH_CHRGR_ID
						, PA.PRCH_CHRGR_NM
						, PA.ESTT_AMT
						, PA.BF_STND_OPEN_YN
						, PA.FBID_YN
						, PA.FILE_GRP_NO
						, PA.RTRN_RSN
						, 'PF00' AS BID_PSCD
						, '의뢰대기' AS BID_PSCD_NM
						<include refid="ComRegr.selectColumnClause"/>
			FROM		V_PA_MST PA
			WHERE	1=1
			AND		PA.PCAC_ODR = (
												SELECT	MAX(PCAC_ODR)
												FROM		V_PA_MST
												WHERE	1=1
												AND		BID_WAIT_NO = PA.BID_WAIT_NO
												AND		PCAC_NO = PA.PCAC_NO 
											)
			AND		PA.PCAC_PSCD = 'B'
			AND		PA.BID_MTCD = 'PRVT'
			AND		PA.CONT_SECD != '4'
			AND		NVL(PA.DEL_AT,'N') != 'Y'
			AND		PA.UNI_ANNC_PSBL_YN = 'Y' 
<!-- 			AND		NOT EXISTS (SELECT IFC_ID FROM T_BI_MST WHERE IFC_ID = PA.BID_WAIT_NO AND NVL(DEL_AT,'N') != 'Y' ) -->
            AND		PA.PCRQ_NO NOT IN 
                        (
                            SELECT A.PCRQ_NO AS PCRQ_NO
                               FROM (
                                             SELECT PCRQ_NO, COUNT(*) AS BI_ITEM_CNT
                                                FROM T_BI_MST A
                                                         ,T_BI_ITEM B
                                             WHERE A.ANNC_NO = B.ANNC_NO
                                                 AND A.ANNC_NGR = B.ANNC_NGR
                                                 AND	 A.BID_MTCD = 'PRVT'
                                                 AND A.BID_PSCD NOT IN ('PF99','PF41')
                                             GROUP BY PCRQ_NO
                                         ) A
                                         , (
                                             SELECT A.BID_WAIT_NO, A.PCRQ_NO, COUNT(*) AS PA_ITEM_CNT
                                                FROM V_PA_MST A
                                                         , V_PA_ITEM B
                                              WHERE A.BID_WAIT_NO = B.BID_WAIT_NO
                                              GROUP BY A.BID_WAIT_NO, A.PCRQ_NO
                                         ) B
                            WHERE A.PCRQ_NO = B.PCRQ_NO
                                 AND A.BI_ITEM_CNT = B.PA_ITEM_CNT
                          )
<!-- 
			AND		NOT EXISTS (
											SELECT	PCRQ_NO
											FROM		T_BI_ITEM
											WHERE	PCRQ_NO = PA.PCRQ_NO
											)
			AND		PA.UNI_ANNC_PSBL_YN = 'Y'
 --> 	
		) A
	</sql>
	
	<sql id="uniPrvtItemListWhere">
		<where>
			<if test='P_BID_WAIT_NO_S != null and P_BID_WAIT_NO_S != "" '>
				AND	BID_WAIT_NO = #{P_BID_WAIT_NO_S}
			</if>		
			<if test='P_PCAC_NO_S != null and P_PCAC_NO_S != "" '>
				AND	PCAC_NO = #{P_PCAC_NO_S}
			</if>		
			<if test='P_PCRQ_NM_S != null and P_PCRQ_NM_S != "" '>
				AND	PCRQ_NM = #{P_PCRQ_NM_S}
			</if>		
		</where>
	</sql>
	
	<!--  
     * <pre>
     * 1. 개요 : 공급품목관리 대상 입찰공고 조회 
     * 2. 처리내용 :
     * </pre>
     * @Query ID : bidVendItemRefListWithPgng
     * @date : 2019. 05. 28.
     * @author : 은우소프트 맹경열
     * @history : 
     *  =======================================================
     *  변경일             		작성자                     		변경내용  
     *  =======================================================
     *  2019. 05. 28.       은우소프트 맹경열              최초 작성 
     *  =======================================================    
     -->
	<select id="bidVendItemRefListWithPgng" resultType="dataEntity">
		<include refid="pgngHeaderClause"/>
		SELECT * FROM (
			<include refid="bidVendItemList"/>
			<include refid="bidVendItemListWhere"/>
			ORDER BY ANNC_NO DESC
		) T1
		WHERE 1 = 1
		<include refid="pgngTailClause"/>	
	</select>

	<select id="bidVendItemRefListTotcnt" resultType="int">
		SELECT COUNT(*) FROM (
			<include refid="bidVendItemList"/>
			<include refid="bidVendItemListWhere"/>
			ORDER BY ANNC_NO DESC
		) T1
		WHERE 1 = 1
	</select>	
	
	<sql id="bidVendItemList">
        SELECT MST.ANNC_NO
                  , MST.ANNC_NGR
                  , MST.BID_NM
                  , MST.BID_PSCD
           FROM T_BI_MST MST
         WHERE 1=1
             <!-- AND MST.CHRGR_ID = #{P_USR_ID} -->
             AND MST.ANNC_NO IN ( SELECT ANNC_NO
                                                    FROM T_BI_ITEM
                                                  WHERE ITEM_NO IS NOT NULL
                                                      AND ITEM_NO IN 
                                                      <foreach separator="," item="item_no" collection="P_ITEM_NO_LIST" open="(" close=")" >
                                                      #{item_no, jdbcType=VARCHAR}
                                                      </foreach>
                                                )
             
		<!-- AND		EXISTS	( SELECT ANNC_NO FROM T_BI_ITEM WHERE ITEM_NO IN 
					<foreach separator="," item="item_no" collection="P_ITEM_NO_LIST" open="(" close=")" >
						#{item_no, jdbcType=VARCHAR}
					</foreach>	
					) -->
					
					
		
		AND		MST.BID_PSCD IN ('PF20', 'PF30')
	</sql>
	
	<sql id="bidVendItemListWhere">
		<where>
			<if test='P_ANNC_NO != null and P_ANNC_NO != ""'>
				AND	ANNC_NO LIKE '$'||#{P_ANNC_NO}||'%'
			</if>
			<if test='P_BID_NM != null and P_BID_NM != ""'>
				AND	BID_NM LIKE '$'||#{P_BID_NM}||'%'
			</if>
		</where>
	</sql>
	
	<select id="selectBidVendOpenList" resultType="dataEntity">
        SELECT M.ANNC_NO
                  , M.ANNC_NGR
                  , M.ROUND_NO
                  , M.VEND_REG_NO
                  , C.BIZRNO
                  , C.VEND_NM
                  , C.RPRS_NM
           FROM T_BI_VEND_MST M
                  , T_CU_MST C
         WHERE 1=1
             AND M.VEND_REG_NO = C.VEND_REG_NO
             AND M.ANNC_NO = #{P_ANNC_NO , jdbcType=VARCHAR}
             AND M.ANNC_NGR = #{P_ANNC_NGR , jdbcType=INTEGER}
             AND M.ROUND_NO = #{P_ROUND_NO , jdbcType=INTEGER}
	</select>

     <select id="selectPostListWithPgng" resultType="dataEntity">
		<include refid="ComPgng.pgngHeaderClause"/>
		SELECT * FROM (
			<include refid="postList"/>
			<include refid="postListWhere"/>
			ORDER BY BUILD_MAN_N
		) T1
		WHERE 1 = 1
		<include refid="ComPgng.pgngTailClause"/>
	</select>
	
	<select id="selectPostListTotcnt" resultType="int">
		SELECT COUNT(1) FROM (
			<include refid="postList"/>
			<include refid="postListWhere"/>
		) T1
		WHERE 1 = 1		
	</select>
	
	<sql id="postList">
        SELECT	 BUILD_MAN_N
				        , ZIPCODE
				        , BEOBJEONGDONG
				        , JIBEON_NO_BON
				        , DOROMYEONG
				        , GEONMUL_NO_BON
				        , BUILD_NAME
				        , ADDRESS
				        , ADDRESS1
           FROM V_MM_POST	
	</sql>
	
	<sql id="postListWhere">
		WHERE 1 = 1
		<if test='P_BEOBJEONGDONG_S != null and P_BEOBJEONGDONG_S != "" '>
			AND (BEOBJEONGDONG LIKE '%'||#{P_BEOBJEONGDONG_S}||'%'
			OR DOROMYEONG LIKE '%'||#{P_BEOBJEONGDONG_S}||'%')
		</if>
		<if test='P_JIBEON_NO_BON_S != null and P_JIBEON_NO_BON_S != "" '>
			AND (JIBEON_NO_BON LIKE '%'||#{P_JIBEON_NO_BON_S}||'%'
			OR GEONMUL_NO_BON LIKE '%'||#{P_JIBEON_NO_BON_S}||'%')
		</if>
		<if test='P_BUILD_NAME_S != null and P_BUILD_NAME_S != "" '>
			AND BUILD_NAME LIKE '%'||#{P_BUILD_NAME_S}||'%'
		</if>
	</sql>
	
	
	<select id="selectEstmInfoList" resultType="dataEntity">
		<include refid="ComPgng.pgngHeaderClause"/>
		SELECT * FROM (
			<include refid="estmInfoList"/>
			<include refid="estmInfoListWhere"/>
			ORDER BY ESTM_ANNC_NO DESC
		) T1
		WHERE 1 = 1
		<include refid="ComPgng.pgngTailClause"/>
	</select>
	
	<select id="selectEstmInfoListTotCnt" resultType="int">
		SELECT COUNT(1) FROM (
			<include refid="estmInfoList"/>
			<include refid="estmInfoListWhere"/>
		) T1
		WHERE 1 = 1		
	</select>
	
	
	<sql id="estmInfoList">
        SELECT ESTM_ANNC_NO
                  , ESTM_ANNC_NM
                  , ANNC_ST_DT
                  , ANNC_END_DT
                  , REGR_ID
                  , REGR_NM
                  , REG_DT
                  , MODR_ID
                  , MODR_NM
                  , MOD_DT
                  , CONN_IP
                  , DEL_AT
           FROM V_ESTM_ANNC_INT V
	</sql>
	
	
	<sql id="estmInfoListWhere">
        WHERE 1=1
        
        <if test='P_E006_YN != null and P_E006_YN != "" '>
            AND ESTM_ANNC_NO NOT IN ( SELECT ESTM_INFO_CNTC_NO FROM T_ESTM_MNG_MST M WHERE M.ESTM_INFO_CNTC_NO = V.ESTM_ANNC_NO AND M.DEL_AT = 'N' )
            AND ESTM_ANNC_NO LIKE 'E006%'
        </if>
        
        <if test='P_E006_YN == null or P_E006_YN == "" '>
        	AND ESTM_ANNC_NO NOT LIKE 'E006%'
        </if>
        
		<if test='P_ESTM_ANNC_NO_S != null and P_ESTM_ANNC_NO_S != "" '>
		    AND ESTM_ANNC_NO LIKE '%'||#{P_ESTM_ANNC_NO_S}||'%'
		</if>
		<if test='P_ESTM_ANNC_NM_S != null and P_ESTM_ANNC_NM_S != "" '>
		    AND ESTM_ANNC_NM LIKE '%'||#{P_ESTM_ANNC_NM_S}||'%'
		</if>
	</sql>
	
	<select id="selectEstmHistList" resultType="dataEntity">
		SELECT * FROM (
			<include refid="estmHistList"/>
			ORDER BY PROC_DT DESC
		) T1
		WHERE 1 = 1
	</select>
	
	<select id="selectEstmHistListTotCnt" resultType="int">
		SELECT COUNT(1) FROM (
			<include refid="estmHistList"/>
		) T1
		WHERE 1 = 1		
	</select>
	
	
	<sql id="estmHistList">
        SELECT ESTM_NO
                  , HSTY_SN
                  , ESTM_PSCD
                  , F_CDVAL_INQIRE('ESTM_PSCD', ESTM_PSCD) AS ESTM_PSCD_NM
                  , PROC_DT
                  , RMK
                  , REGR_ID
                  , REGR_NM
                  , REG_DT
                  , MODR_ID
                  , MODR_NM
                  , MOD_DT
                  , CONN_IP
                  , DEL_AT
           FROM T_ESTM_PROG_HIST
        WHERE ESTM_NO = #{P_ESTM_NO}
	</sql>
	
	<sql id="estmFrmPopupList">
        SELECT 
        		  ESTM_FRM_NO
        		, ESTM_FRM_NM
        		, ESTM_PROCD_SECD
        		, F_CDVAL_INQIRE('ESTM_PROCD_SECD', ESTM_PROCD_SECD) AS ESTM_PROCD_SECD_NM
                  
           FROM T_ESTM_FRM_MST
        WHERE 1=1
        <!-- AND ESTM_PROCD_SECD = #{P_ESTM_PROCD_SECD} -->
        AND   DEL_AT = 'N'
	</sql>
	
	
	
	<select id="selectEstmFrmPopupList" resultType="dataEntity">
		<include refid="ComPgng.pgngHeaderClause"/>
		SELECT * FROM (
			<include refid="estmFrmPopupList"/>
			ORDER BY ESTM_FRM_NO DESC
		) T1
		WHERE 1 = 1
		<include refid="ComPgng.pgngTailClause"/>
	</select>
	
	<select id="selectEstmFrmPopupListTotcnt" resultType="int">
		SELECT COUNT(1) FROM (
			<include refid="estmFrmPopupList"/>
		) T1
		WHERE 1 = 1		
	</select>
	
	<select id="selectEstmObjFileView" resultType="dataEntity">
        SELECT ESTM_NO
                  , ESTM_OBJ_SEQ
                  , VEND_REG_NO
                  , BIZRNO
                  , VEND_NM
                  , ITEM_NO
                  , ITEM_NM
                  , ESTM_CMTM_NO
                  , ESTM_CMTM_NM
                  , ESTM_OBJ_PE_NO
                  , ESTM_OBJ_PE_NM
                  , EMPL_NO
                  , RSDN_NO
                  , TEL_NO
                  , EMAL
                  , FILE_GRP_NO
                  <include refid="ComRegr.selectColumnClause"/>
           FROM T_ESTM_OBJ
         WHERE 1=1
         	 AND DEL_AT = 'N'
             AND ESTM_NO = #{P_ESTM_NO, jdbcType=VARCHAR}
             <if test='P_ESTM_OBJ_SEQ != null and P_ESTM_OBJ_SEQ != "" '>
             AND ESTM_OBJ_SEQ = #{P_ESTM_OBJ_SEQ, jdbcType=INTEGER} 
             </if>
             <if test='P_RSDN_NO != null and P_RSDN_NO != "" '>
             AND RSDN_NO = #{P_RSDN_NO} 
             </if>
             <if test='P_BIZRNO != null and P_BIZRNO != "" '>
             AND BIZRNO = #{P_BIZRNO} 
             </if>
	</select>
	
	<select id="selectEstmVidoFileView" resultType="dataEntity">
        SELECT ESTM_NO
                  , ESTM_PROCD_SEQ
                  , VIDO_MTNG_SEQ
                  , FILE_GRP_NO
                  <include refid="ComRegr.selectColumnClause"/>
           FROM T_ESTM_VIDO_MTNG
         WHERE 1=1
         	 AND DEL_AT = 'N'
             AND ESTM_NO = #{P_ESTM_NO, jdbcType=VARCHAR}
             <if test='P_ESTM_PROCD_SEQ != null and P_ESTM_PROCD_SEQ != "" '>
             AND ESTM_PROCD_SEQ = #{P_ESTM_PROCD_SEQ, jdbcType=INTEGER} 
             </if>
             <if test='P_VIDO_MTNG_SEQ != null and P_VIDO_MTNG_SEQ != "" '>
             AND VIDO_MTNG_SEQ = #{P_VIDO_MTNG_SEQ, jdbcType=VARCHAR}
             </if>
	</select>
	
	<select id="selectEstmCmtmScrDetail" resultType="dataEntity">
        SELECT ESTM_NO
                  , ESTM_CMTM_NO
                  , ESTM_CMTM_NM
                  , ESTM_TOT_SCR
                  , ESTM_OPNN
                  <include refid="ComRegr.selectColumnClause"/>
           FROM T_ESTM_CMTM
         WHERE 1=1
             AND ESTM_NO = #{P_ESTM_NO, jdbcType=VARCHAR}
             AND ESTM_CMTM_NO = #{P_ESTM_CMTM_NO, jdbcType=VARCHAR}
	</select> 

	<select id="selectVidoObjList" resultType="dataEntity">
        SELECT ROWNUM AS RNM
        		, EVMO.ESTM_NO
				, EVMO.ESTM_PROCD_SEQ
				, EVMO.VIDO_MTNG_SEQ
				, EVMO.ESTM_OBJ_SEQ
				, EVMO.MTNG_PRTC_ID
				, EVMO.MTNG_PRTC_PWD
               	, EVMO.DEL_AT      
               	, EO.BIZRNO
               	, EO.VEND_NM
               	, EO.ITEM_NO
               	, EO.ITEM_NM
               	, EO.ESTM_CMTM_NO
               	, EO.ESTM_CMTM_NM
               	, EO.ESTM_OBJ_PE_NO
               	, EO.ESTM_OBJ_PE_NM
               	, EO.TEL_NO
               	, EO.EMAL
               	, (CASE
	               	WHEN EO.ESTM_CMTM_NM IS NOT NULL THEN EO.ESTM_CMTM_NM
	               	WHEN EO.ESTM_OBJ_PE_NM IS NOT NULL THEN EO.ESTM_OBJ_PE_NM
            		ELSE EO.VEND_NM END )  AS OBJ_NM
            	, EVMO.ESTM_NO||'-'||EVMO.ESTM_OBJ_SEQ  AS MAIL_USER_ID
           FROM T_ESTM_VIDO_MTNG_OBJ EVMO, T_ESTM_OBJ EO
         WHERE 1=1
         AND EVMO.ESTM_NO = #{P_ESTM_NO, jdbcType=VARCHAR}
         AND EVMO.ESTM_PROCD_SEQ = '1'
         AND EVMO.VIDO_MTNG_SEQ = #{P_VIDO_MTNG_SEQ, jdbcType=VARCHAR}     
         AND EVMO.DEL_AT = 'N'
         AND EO.DEL_AT = 'N' 
    	 AND EVMO.ESTM_NO = EO.ESTM_NO
         AND EVMO.ESTM_OBJ_SEQ = EO.ESTM_OBJ_SEQ
	</select> 

	<select id="selectVidoCmtmList" resultType="dataEntity">
        SELECT	ROWNUM AS RNM
        			, EVMC.ESTM_NO
					, EVMC.ESTM_PROCD_SEQ
					, EVMC.VIDO_MTNG_SEQ
					, EVMC.ESTM_CMTM_NO
					, EVMC.MTNG_PRTC_ID
					, EVMC.MTNG_PRTC_PWD
					, EVMC.DEL_AT
	                , EC.ESTM_CMTM_NM
	                , EC.CP_NO
	                , EC.EMAL
	                , DECODE(INO_CMTM_SECD, 'OUT', 'CMTM-'||EC.ESTM_CMTM_NO, EC.ESTM_CMTM_NO ) AS MAIL_USER_ID
         FROM T_ESTM_VIDO_MTNG_CMTM EVMC, T_ESTM_CMTM EC
         WHERE 1=1
         AND EVMC.ESTM_NO = #{P_ESTM_NO, jdbcType=VARCHAR}
         AND EVMC.ESTM_PROCD_SEQ = '1'
         AND EVMC.VIDO_MTNG_SEQ = #{P_VIDO_MTNG_SEQ, jdbcType=VARCHAR}
         AND EVMC.DEL_AT = 'N' 
         AND EC.SLCT_YN = 'Y'
         AND EVMC.ESTM_NO = EC.ESTM_NO
         AND EVMC.ESTM_CMTM_NO = EC.ESTM_CMTM_NO
	</select> 

	<update id="selectEstmCmtmScrUpdt" >
		UPDATE T_ESTM_CMTM
			SET ESTM_TOT_SCR = #{P_ESTM_TOT_SCR}
			, ESTM_OPNN = #{P_ESTM_OPNN,jdbcType=VARCHAR}
			, MOD_DT = TO_CHAR(SYSDATE, 'yyyyMMddHH24MISS')
            <include refid="ComRegr.ModrSetClause"/>
		WHERE 1=1
        AND ESTM_NO = #{P_ESTM_NO, jdbcType=VARCHAR}
        AND ESTM_CMTM_NO = #{P_ESTM_CMTM_NO, jdbcType=VARCHAR}
	</update> 
	
	<select id="selectEstmObjDetail" resultType="dataEntity">
		SELECT 				
					OBJ.ESTM_NO
				  , (CASE
	               	 WHEN OBJ.ESTM_CMTM_NM IS NOT NULL THEN OBJ.ESTM_CMTM_NM
	               	 WHEN OBJ.ESTM_OBJ_PE_NM IS NOT NULL THEN OBJ.ESTM_OBJ_PE_NM
	           		 ELSE OBJ.VEND_NM END )  AS OBJ_NM
                  , OBJ.ESTM_OBJ_SEQ
                  , OBJ.VEND_REG_NO
                  , OBJ.BIZRNO
                  , OBJ.VEND_NM
                  , OBJ.ITEM_NO
                  , OBJ.ITEM_NM
                  , OBJ.ESTM_CMTM_NO
                  , OBJ.ESTM_CMTM_NM
                  , OBJ.ESTM_OBJ_PE_NO
                  , OBJ.ESTM_OBJ_PE_NM
                  , OBJ.EMPL_NO
                  , OBJ.RSDN_NO
                  , OBJ.TEL_NO
                  , OBJ.EMAL
                  , OBJ.FILE_GRP_NO
                  , A.PREV_ESTM_OBJ_SEQ
                  , A.NEXT_ESTM_OBJ_SEQ
           FROM
           		T_ESTM_OBJ OBJ
           		,(
           			SELECT 		 A.ESTM_NO
								,A.ESTM_OBJ_SEQ
								,A.PREV_ESTM_OBJ_SEQ
								,A.NEXT_ESTM_OBJ_SEQ
					FROM
					(
						SELECT 	 A.ESTM_NO
								,A.ESTM_OBJ_SEQ
								,LAG(A.ESTM_OBJ_SEQ) OVER (ORDER BY A.ESTM_RNK, A.ESTM_OBJ_SEQ) AS PREV_ESTM_OBJ_SEQ
								,LEAD(A.ESTM_OBJ_SEQ) OVER (ORDER BY A.ESTM_RNK, A.ESTM_OBJ_SEQ) AS NEXT_ESTM_OBJ_SEQ
					
								FROM
								(
									 SELECT
					
											  OBJ.ESTM_NO
							    			, OBJ.ESTM_OBJ_SEQ
							    			, SLCT.ESTM_RNK
							    			, NVL((SELECT DECODE(NVL(SLCT.ESTM_PROCD_SEQ, #{P_ESTM_PROCD_SEQ, jdbcType=VARCHAR}),'1', 'Y', SLCT_YN) FROM T_ESTM_OBJ_SLCT WHERE 1=1 AND ESTM_NO = #{P_ESTM_NO, jdbcType=VARCHAR} AND ESTM_PROCD_SEQ =  DECODE(NVL(SLCT.ESTM_PROCD_SEQ, #{P_ESTM_PROCD_SEQ, jdbcType=VARCHAR}), '1', '1', TO_NUMBER(SLCT.ESTM_PROCD_SEQ)-1) AND ESTM_OBJ_SEQ = OBJ.ESTM_OBJ_SEQ ), 'Y') AS BEFORE_SLCT_YN
					
									 FROM T_ESTM_OBJ OBJ
							                  , T_ESTM_OBJ_SLCT SLCT
							         WHERE 1=1
							         AND OBJ.ESTM_NO = SLCT.ESTM_NO(+)
							         AND OBJ.ESTM_OBJ_SEQ = SLCT.ESTM_OBJ_SEQ(+)
							         AND OBJ.ESTM_NO = #{P_ESTM_NO, jdbcType=VARCHAR}
							         AND OBJ.DEL_AT = 'N'
							         AND NVL(SLCT.ESTM_PROCD_SEQ, '1') = #{P_ESTM_PROCD_SEQ, jdbcType=VARCHAR}
					
							   ) A
							   WHERE 1=1
							   AND A.BEFORE_SLCT_YN = 'Y'
					
							   ORDER BY A.ESTM_RNK, A.ESTM_OBJ_SEQ
						) A
					WHERE 1=1
					AND A.ESTM_OBJ_SEQ = #{P_ESTM_OBJ_SEQ, jdbcType=VARCHAR}
           		) A
         WHERE 1=1
           AND OBJ.ESTM_NO = A.ESTM_NO
           AND OBJ.ESTM_OBJ_SEQ = A.ESTM_OBJ_SEQ
           AND OBJ.ESTM_NO = #{P_ESTM_NO, jdbcType=VARCHAR}
           AND OBJ.ESTM_OBJ_SEQ = #{P_ESTM_OBJ_SEQ, jdbcType=VARCHAR}
           AND OBJ.DEL_AT = 'N'
	</select>
	
	<select id="selectEstmCmtmEstmFrmDetail" resultType="dataEntity">
		SELECT 				
					PROCD.ESTM_NO
                  , PROCD.ESTM_PROCD_SEQ
                  , PROCD.ESTM_PROCD_SECD
                  , F_CDVAL_INQIRE('ESTM_PROCD_SECD', PROCD.ESTM_PROCD_SECD) AS ESTM_PROCD_SECD_NM
                  , PROCD.ESTM_PROCD_NM
                  , PROCD.ESTM_PROCD_ST_DT
                  , PROCD.ESTM_PROCD_END_DT
                  , TO_CHAR(SYSDATE, 'yyyyMMddHH24miss') as SYSTEM_TO_DAY
                  , PROCD.ESTM_FRM_NO
                  , PROCD.ESTM_PROCD_PSCD
                  , PROCD.ESTM_PROCD_PSNM
                  , PROCD.ESTR_SECD
                  , PROCD.ESTM_OBJ_SEQ
                  , PROCD.ESTM_CMTM_NO
                  , SCR.ESTM_OPNN
                  , SCR.FILE_GRP_NO
                  , SCR.ESTM_TOT_SCR
                  , PROCD.ESTM_FRM_PROCD_SECD
           FROM
           		 (
           		 	SELECT
           		 			ESTM_NO
		                  , ESTM_PROCD_SEQ
		                  , ESTM_PROCD_SECD
		                  , F_CDVAL_INQIRE('ESTM_PROCD_SECD', ESTM_PROCD_SECD) AS ESTM_PROCD_SECD_NM
		                  , ESTM_PROCD_NM
		                  , ESTM_PROCD_ST_DT
		                  , ESTM_PROCD_END_DT
		                  , ESTM_FRM_NO
		                  , ESTM_PROCD_PSCD
		                  , ESTM_PROCD_PSNM
		                  , ESTR_SECD
		                  , ESTM_FRM_PROCD_SECD
		                  , #{P_ESTM_OBJ_SEQ, jdbcType=VARCHAR} AS ESTM_OBJ_SEQ
		                  , #{P_ESTM_CMTM_NO, jdbcType=VARCHAR} AS ESTM_CMTM_NO
           		 	FROM T_ESTM_PROCD
           		 	WHERE 1=1
           		 	AND  ESTM_NO = #{P_ESTM_NO, jdbcType=VARCHAR}
           		 	AND  ESTM_PROCD_SEQ = #{P_ESTM_PROCD_SEQ, jdbcType=INTEGER}
           		 ) PROCD
           		,T_ESTM_CMTM_OBJ_SCR SCR
         WHERE 1=1
         	 AND PROCD.ESTM_NO = SCR.ESTM_NO(+)
         	 AND PROCD.ESTM_PROCD_SEQ = SCR.ESTM_PROCD_SEQ(+)
         	 AND PROCD.ESTM_OBJ_SEQ = SCR.ESTM_OBJ_SEQ(+)
         	 AND PROCD.ESTM_CMTM_NO = SCR.ESTM_CMTM_NO(+)
             AND PROCD.ESTM_NO = #{P_ESTM_NO, jdbcType=VARCHAR}
             AND PROCD.ESTM_PROCD_SEQ = #{P_ESTM_PROCD_SEQ, jdbcType=INTEGER}
             AND PROCD.ESTM_OBJ_SEQ = #{P_ESTM_OBJ_SEQ, jdbcType=VARCHAR}
             AND PROCD.ESTM_CMTM_NO = #{P_ESTM_CMTM_NO, jdbcType=VARCHAR}
	</select>
	
	<select id="selectEstmCmtmEstmFrmItemList" resultType="dataEntity">
        SELECT
        		 FRM.ESTM_NO
				,FRM.ESTM_PROCD_SEQ
				,FRM.ESTM_ITEM_NO
				,FRM.ESTM_ITEM_NM
				,FRM.ESTM_ITEM_DSMK
				,REPLACE(FRM.ESTM_ITEM_DESC, CHR(13)||CHR(10), <![CDATA[ '<br>'  ]]>) AS ESTM_ITEM_DESC
				,FRM.ESTM_MTHD_SECD
				,F_CDVAL_INQIRE('ESTM_MTHD_SECD', FRM.ESTM_MTHD_SECD) AS ESTM_MTHD_SECD_NM
				,FRM.REGR_ID
				,FRM.REGR_NM
				,FRM.REG_DT
				,FRM.MODR_ID
				,FRM.MODR_NM
				,FRM.MOD_DT
				,FRM.CONN_IP
				,FRM.DEL_AT
				,NVL(SCR.ESTM_SCR,0) AS ESTM_SCR
				,NVL(SCR.REAL_VAL,0) AS REAL_VAL
				,SCR.RMK
				,SCR.ESTM_CMTM_NO
				,SCR.ESTM_OBJ_SEQ

        FROM T_ESTM_PROCD_FRM FRM
        	,(SELECT
        			 ESTM_NO
        			,ESTM_OBJ_SEQ
        			,ESTM_PROCD_SEQ
        			,ESTM_ITEM_NO
        			,ESTM_CMTM_NO
        			,ESTM_SCR
        			,REAL_VAL
        			,RMK
        	  FROM T_ESTM_OBJ_SCR
        	  WHERE ESTM_CMTM_NO = #{P_ESTM_CMTM_NO, jdbcType=INTEGER} 
        	  AND ESTM_OBJ_SEQ =  #{P_ESTM_OBJ_SEQ, jdbcType=INTEGER} 
        	  ) SCR
        WHERE 1=1
        AND	FRM.ESTM_NO = SCR.ESTM_NO(+)
        AND FRM.ESTM_PROCD_SEQ = SCR.ESTM_PROCD_SEQ(+)
        AND FRM.ESTM_ITEM_NO = SCR.ESTM_ITEM_NO(+)
        AND FRM.ESTM_NO = #{P_ESTM_NO, jdbcType=VARCHAR}
        AND FRM.ESTM_PROCD_SEQ = #{P_ESTM_PROCD_SEQ, jdbcType=VARCHAR}
        ORDER BY ESTM_ITEM_NO ASC 
	</select>
	
	<select id="selectEstmFrmDetail" resultType="dataEntity">
		SELECT 
        		 ESTM_NO
        		,ESTM_PROCD_SEQ
				,ESTM_PROCD_NM
				,ESTM_PROCD_SECD
				,F_CDVAL_INQIRE('ESTM_PROCD_SECD', ESTM_PROCD_SECD) AS ESTM_PROCD_SECD_NM
				,ESTM_FRM_PROCD_SECD
        FROM T_ESTM_PROCD
		WHERE 1=1
        AND ESTM_NO = #{P_ESTM_NO}
        AND ESTM_PROCD_SEQ = #{P_ESTM_PROCD_SEQ}
	</select>
	
	<select id="selectEstmSeMngFrmDetail" resultType="dataEntity">
		SELECT 
        		 ESTM_SECD
        		,ESTM_PROCD_SEQ
				,ESTM_PROCD_SECD
				,F_CDVAL_INQIRE('ESTM_PROCD_SECD', ESTM_PROCD_SECD) AS ESTM_PROCD_SECD_NM
				,ESTM_PROCD_NM
				,ESTM_FRM_NO
				,ESTM_FRM_NM
				,ESTR_SECD
				
        FROM T_ESTM_SE_PROCD
		WHERE 1=1
        AND ESTM_SECD = #{P_ESTM_SECD}
        AND ESTM_PROCD_SEQ = #{P_ESTM_PROCD_SEQ}
	</select>
	
	
	<select id="selectEstmSeMngFrmItemList" resultType="dataEntity">
		SELECT 
        		 ESTM_FRM_NO
				,ESTM_ITEM_NO
				,ESTM_ITEM_NM
				,ESTM_ITEM_DSMK
				,REPLACE(ESTM_ITEM_DESC, CHR(13)||CHR(10), <![CDATA[ '<br>'  ]]>) AS ESTM_ITEM_DESC
				,ESTM_MTHD_SECD
				,F_CDVAL_INQIRE('ESTM_MTHD_SECD', ESTM_MTHD_SECD) AS ESTM_MTHD_SECD_NM
				,REGR_ID
				,REGR_NM
				,REG_DT
				,MODR_ID
				,MODR_NM
				,MOD_DT
				,CONN_IP
				,DEL_AT

        FROM T_ESTM_FRM_ITEM
        WHERE 1=1
        AND ESTM_FRM_NO = #{P_ESTM_FRM_NO}
        ORDER BY ESTM_ITEM_NO ASC
	</select>
	
	
	<select id="selectEstmFrmItemList" resultType="dataEntity">
		SELECT 
        		 ESTM_NO
        		,ESTM_PROCD_SEQ
				,ESTM_ITEM_NO
				,ESTM_ITEM_NM
				,ESTM_ITEM_DSMK
				,REPLACE(ESTM_ITEM_DESC, CHR(13)||CHR(10), <![CDATA[ '<br>'  ]]>) AS ESTM_ITEM_DESC
				,ESTM_MTHD_SECD
				,F_CDVAL_INQIRE('ESTM_MTHD_SECD', ESTM_MTHD_SECD) AS ESTM_MTHD_SECD_NM
				,REGR_ID
				,REGR_NM
				,REG_DT
				,MODR_ID
				,MODR_NM
				,MOD_DT
				,CONN_IP
				,DEL_AT

        FROM T_ESTM_PROCD_FRM
        WHERE 1=1
        AND ESTM_NO = #{P_ESTM_NO}
        AND ESTM_PROCD_SEQ = #{P_ESTM_PROCD_SEQ}
        ORDER BY ESTM_ITEM_NO ASC
	</select>
	
	<update id="mergeIntoEstmCmtmObjScr">
		MERGE INTO T_ESTM_CMTM_OBJ_SCR
		USING DUAL
		ON (	ESTM_NO = #{P_ESTM_NO, jdbcType=VARCHAR}
		AND	ESTM_OBJ_SEQ = #{P_ESTM_OBJ_SEQ, jdbcType=INTEGER}
		AND	ESTM_PROCD_SEQ = #{P_ESTM_PROCD_SEQ, jdbcType=INTEGER}
		AND	ESTM_CMTM_NO = #{P_ESTM_CMTM_NO, jdbcType=VARCHAR}
		)
		WHEN MATCHED THEN
			UPDATE	SET		
				ESTM_TOT_SCR = #{P_TOT_SCR , jdbcType=VARCHAR}
				,CERT_INHR_VAL = #{P_CERT_INHR_VAL , jdbcType=VARCHAR}
				,ESTM_OPNN = #{P_ESTM_OPNN , jdbcType=VARCHAR}
				,MOD_DT = TO_CHAR(SYSDATE, 'yyyyMMddHH24MISS')
				,FILE_GRP_NO = #{P_FILE_GRP_NO, jdbcType=VARCHAR}
				<include refid="ComRegr.ModrSetClause"/>
		WHEN NOT MATCHED THEN
			INSERT(
				ESTM_NO
				,ESTM_OBJ_SEQ
				,ESTM_PROCD_SEQ
				,ESTM_CMTM_NO
				,ESTM_TOT_SCR
				,CERT_INHR_VAL
				,ESTM_OPNN
				,FILE_GRP_NO
				<include refid="ComRegr.RegrColumnClause"/>
			)VALUES(
				#{P_ESTM_NO, jdbcType=VARCHAR}
				,#{P_ESTM_OBJ_SEQ, jdbcType=VARCHAR}
				,#{P_ESTM_PROCD_SEQ, jdbcType=INTEGER}
				,#{P_ESTM_CMTM_NO , jdbcType=VARCHAR}
				,#{P_TOT_SCR , jdbcType=VARCHAR}
				,#{P_CERT_INHR_VAL , jdbcType=VARCHAR}
				,#{P_ESTM_OPNN , jdbcType=VARCHAR}
				,#{P_FILE_GRP_NO, jdbcType=VARCHAR}
				<include refid="ComRegr.RegrValueClause"/>
			)
	</update>
	
	<insert id="mergeIntoEstmObjScr">
		MERGE INTO T_ESTM_OBJ_SCR
		USING DUAL
		ON (	ESTM_NO = #{P_ESTM_NO, jdbcType=VARCHAR}
		AND	ESTM_OBJ_SEQ = #{P_ESTM_OBJ_SEQ, jdbcType=INTEGER}
		AND	ESTM_PROCD_SEQ = #{P_ESTM_PROCD_SEQ, jdbcType=INTEGER}
		AND	ESTM_CMTM_NO = #{P_ESTM_CMTM_NO, jdbcType=VARCHAR}
		AND	ESTM_ITEM_NO = #{P_ESTM_ITEM_NO, jdbcType=VARCHAR}
		)
		WHEN MATCHED THEN
			UPDATE	SET		
				ESTM_SCR = #{P_ESTM_SCR , jdbcType=VARCHAR}
				<!-- ,REAL_VAL = #{P_REAL_VAL , jdbcType=VARCHAR}
				,RMK = #{P_RMK , jdbcType=VARCHAR} -->
				,MOD_DT = TO_CHAR(SYSDATE, 'yyyyMMddHH24MISS')
				<include refid="ComRegr.ModrSetClause"/>
		WHEN NOT MATCHED THEN
			INSERT(
				ESTM_NO
				,ESTM_OBJ_SEQ
				,ESTM_PROCD_SEQ
				,ESTM_CMTM_NO
				,ESTM_ITEM_NO
				,ESTM_SCR
				<!-- ,REAL_VAL
				,RMK -->
				<include refid="ComRegr.RegrColumnClause"/>
			)VALUES(
				#{P_ESTM_NO, jdbcType=VARCHAR}
				,#{P_ESTM_OBJ_SEQ, jdbcType=VARCHAR}
				,#{P_ESTM_PROCD_SEQ, jdbcType=INTEGER}
				,#{P_ESTM_CMTM_NO , jdbcType=VARCHAR}
				,#{P_ESTM_ITEM_NO, jdbcType=VARCHAR}
				,#{P_ESTM_SCR , jdbcType=VARCHAR}
				<!-- ,#{P_REAL_VAL , jdbcType=VARCHAR}
				,#{P_RMK , jdbcType=VARCHAR} -->
				<include refid="ComRegr.RegrValueClause"/>
			)
	</insert>
	
	
	<insert id="insertEstmObjScrHist" useGeneratedKeys="true" keyProperty="P_HIST_SEQ">
        <selectKey resultType="string" keyProperty="P_HIST_SEQ" order="BEFORE">
            SELECT NVL(MAX(TO_NUMBER(HIST_SEQ)), 0)+1 AS HIST_SEQ
            FROM T_ESTM_OBJ_SCR_HIST
            WHERE 1 = 1
            AND ESTM_NO =  #{P_ESTM_NO, jdbcType=VARCHAR}
            AND ESTM_OBJ_SEQ =  #{P_ESTM_OBJ_SEQ, jdbcType=VARCHAR}
            AND ESTM_PROCD_SEQ =  #{P_ESTM_PROCD_SEQ, jdbcType=VARCHAR}
            AND ESTM_ITEM_NO =  #{P_ESTM_ITEM_NO, jdbcType=VARCHAR}
            AND ESTM_CMTM_NO =  #{P_ESTM_CMTM_NO, jdbcType=VARCHAR}
        </selectKey>
        INSERT INTO T_ESTM_OBJ_SCR_HIST (
		                    ESTM_NO
							, ESTM_OBJ_SEQ
							, ESTM_PROCD_SEQ
							, ESTM_ITEM_NO
							, ESTM_CMTM_NO
							, HIST_SEQ
							, ESTM_SCR
							, REAL_VAL
							, RMK
		                 <include refid="ComRegr.RegrColumnClause"/>
        ) VALUES (
		                    #{P_ESTM_NO, jdbcType=VARCHAR}
		                  , #{P_ESTM_OBJ_SEQ, jdbcType=VARCHAR}
		                  , #{P_ESTM_PROCD_SEQ, jdbcType=VARCHAR}
		                  , #{P_ESTM_ITEM_NO, jdbcType=VARCHAR}
		                  , #{P_ESTM_CMTM_NO, jdbcType=VARCHAR}
		                  , #{P_HIST_SEQ, jdbcType=VARCHAR}
		                  , #{P_ESTM_SCR, jdbcType=VARCHAR}
		                  , #{P_REAL_VAL, jdbcType=VARCHAR}
		                  , #{P_RMK, jdbcType=VARCHAR}
		                  <include refid="ComRegr.RegrValueClause"/>
		)
	</insert>
	
	
<!-- 	
	<select id="selectEstmCmtmEstmFrmADetail" resultType="dataEntity">
        SELECT ESTM_NO
                  , ESTM_PROCD_SEQ
                  , ESTM_PROCD_SECD
                  , F_CDVAL_INQIRE('ESTM_PROCD_SECD', ESTM_PROCD_SECD) AS ESTM_PROCD_SECD_NM
                  , ESTM_PROCD_NM
                  , ESTM_PROCD_ST_DT
                  , ESTM_PROCD_END_DT
                  , ESTM_FRM_NO
                  , ESTM_PROCD_PSCD
                  , ESTM_PROCD_PSNM
                  , ESTR_SECD
                  <include refid="ComRegr.selectColumnClause"/>
           FROM T_ESTM_PROCD
         WHERE 1=1
             AND ESTM_NO = #{P_ESTM_NO, jdbcType=VARCHAR}
             AND ESTM_PROCD_SEQ = #{P_ESTM_PROCD_SEQ, jdbcType=INTEGER} 
	</select>
	
	<select id="selectEstmCmtmEstmFrmItemAList" resultType="dataEntity">
        SELECT
        		 FRM.ESTM_NO
				,FRM.ESTM_PROCD_SEQ
				,FRM.ESTM_ITEM_NO
				,FRM.ESTM_ITEM_NM
				,FRM.ESTM_ITEM_DSMK
				,REPLACE(FRM.ESTM_ITEM_DESC, CHR(13)||CHR(10), <![CDATA[ '<br>'  ]]>) AS ESTM_ITEM_DESC
				,FRM.ESTM_MTHD_SECD
				,F_CDVAL_INQIRE('ESTM_MTHD_SECD', FRM.ESTM_MTHD_SECD) AS ESTM_MTHD_SECD_NM
				,FRM.REGR_ID
				,FRM.REGR_NM
				,FRM.REG_DT
				,FRM.MODR_ID
				,FRM.MODR_NM
				,FRM.MOD_DT
				,FRM.CONN_IP
				,FRM.DEL_AT
				,NVL(SCR.ESTM_SCR,0) AS ESTM_SCR
				,NVL(SCR.REAL_VAL,0) AS REAL_VAL
				,SCR.RMK
				,SCR.ESTM_CMTM_NO

        FROM T_ESTM_PROCD_FRM FRM
        	,(SELECT
        			 ESTM_NO
        			,ESTM_OBJ_SEQ
        			,ESTM_PROCD_SEQ
        			,ESTM_ITEM_NO
        			,ESTM_CMTM_NO
        			,ESTM_SCR
        			,REAL_VAL
        			,RMK
        	  FROM T_ESTM_OBJ_SCR
        	  WHERE ESTM_CMTM_NO = #{P_ESTM_CMTM_NO, jdbcType=INTEGER} 
        	  ) SCR
        WHERE 1=1
        AND	FRM.ESTM_NO = SCR.ESTM_NO(+)
        AND FRM.ESTM_PROCD_SEQ = SCR.ESTM_PROCD_SEQ(+)
        AND FRM.ESTM_ITEM_NO = SCR.ESTM_ITEM_NO(+)
        AND FRM.ESTM_NO = #{P_ESTM_NO, jdbcType=VARCHAR}
        AND FRM.ESTM_PROCD_SEQ = #{P_ESTM_PROCD_SEQ, jdbcType=VARCHAR}
        ORDER BY ESTM_ITEM_NO ASC 
	</select>
	
	<select id="selectEstmCmtmEstmFrmBDetail" resultType="dataEntity">
        SELECT ESTM_NO
                  , ESTM_PROCD_SEQ
                  , ESTM_PROCD_SECD
                  , F_CDVAL_INQIRE('ESTM_PROCD_SECD', ESTM_PROCD_SECD) AS ESTM_PROCD_SECD_NM
                  , ESTM_PROCD_NM
                  , ESTM_PROCD_ST_DT
                  , ESTM_PROCD_END_DT
                  , ESTM_FRM_NO
                  , ESTM_PROCD_PSCD
                  , ESTM_PROCD_PSNM
                  , ESTR_SECD
                  <include refid="ComRegr.selectColumnClause"/>
           FROM T_ESTM_PROCD
         WHERE 1=1
             AND ESTM_NO = #{P_ESTM_NO, jdbcType=VARCHAR}
             AND ESTM_PROCD_SEQ = #{P_ESTM_PROCD_SEQ, jdbcType=INTEGER} 
	</select>
	
	<select id="selectEstmCmtmEstmFrmItemBList" resultType="dataEntity">
        SELECT
        		 FRM.ESTM_NO
				,FRM.ESTM_PROCD_SEQ
				,FRM.ESTM_ITEM_NO
				,FRM.ESTM_ITEM_NM
				,FRM.ESTM_ITEM_DSMK
				,REPLACE(FRM.ESTM_ITEM_DESC, CHR(13)||CHR(10), <![CDATA[ '<br>'  ]]>) AS ESTM_ITEM_DESC
				,FRM.ESTM_MTHD_SECD
				,F_CDVAL_INQIRE('ESTM_MTHD_SECD', FRM.ESTM_MTHD_SECD) AS ESTM_MTHD_SECD_NM
				,FRM.REGR_ID
				,FRM.REGR_NM
				,FRM.REG_DT
				,FRM.MODR_ID
				,FRM.MODR_NM
				,FRM.MOD_DT
				,FRM.CONN_IP
				,FRM.DEL_AT
				,NVL(SCR.ESTM_SCR,0) AS ESTM_SCR
				,NVL(SCR.REAL_VAL,0) AS REAL_VAL
				,SCR.RMK
				,SCR.ESTM_CMTM_NO

        FROM T_ESTM_PROCD_FRM FRM
        	,(SELECT
        			 ESTM_NO
        			,ESTM_OBJ_SEQ
        			,ESTM_PROCD_SEQ
        			,ESTM_ITEM_NO
        			,ESTM_CMTM_NO
        			,ESTM_SCR
        			,REAL_VAL
        			,RMK
        	  FROM T_ESTM_OBJ_SCR
        	  WHERE ESTM_CMTM_NO = #{P_ESTM_CMTM_NO, jdbcType=INTEGER} 
        	  ) SCR
        WHERE 1=1
        AND	FRM.ESTM_NO = SCR.ESTM_NO(+)
        AND FRM.ESTM_PROCD_SEQ = SCR.ESTM_PROCD_SEQ(+)
        AND FRM.ESTM_ITEM_NO = SCR.ESTM_ITEM_NO(+)
        AND FRM.ESTM_NO = #{P_ESTM_NO, jdbcType=VARCHAR}
        AND FRM.ESTM_PROCD_SEQ = #{P_ESTM_PROCD_SEQ, jdbcType=VARCHAR}
        ORDER BY ESTM_ITEM_NO ASC 
	</select> -->
	
	<select id="selectEstmCmtmMngPoolList" resultType="dataEntity">
	SELECT * FROM (
        SELECT ESTM_CMTM_NO
                  , ESTM_CMTM_NM
                  , INO_CMTM_SECD
                  , F_CDVAL_INQIRE('INO_CMTM_SECD', INO_CMTM_SECD) AS INO_CMTM_SECD_NM
                  , LLF_SECD
                  , F_CDVAL_INQIRE('LLF_SECD', LLF_SECD) AS LLF_SECD_NM                             
                  , CNTN_SECD
                  , F_CDVAL_INQIRE('CNTN_SECD', CNTN_SECD) AS CNTN_SECD_NM                   
                  , MLF_SECD
                  , F_CDVAL_INQIRE('MLF_SECD', MLF_SECD) AS MLF_SECD_NM                         
                  , SLF_SECD
                  , F_CDVAL_INQIRE('SLF_SECD', SLF_SECD) AS SLF_SECD_NM                          
                  , CP_NO
                  , TEL_NO
                  , EMAL
           FROM V_MM_ESTM_CMTM_MST
        WHERE 1=1
            AND NVL(HNDW_REG_YN, 'N') = 'N'
            AND DEL_AT = #{P_DEL_AT, jdbcType=VARCHAR}
            AND INO_CMTM_SECD = #{P_INO_CMTM_SECD, jdbcType=VARCHAR}

        UNION ALL

        SELECT ESTM_CMTM_NO
                  , ESTM_CMTM_NM
                  , INO_CMTM_SECD
                  , F_CDVAL_INQIRE('INO_CMTM_SECD', INO_CMTM_SECD) AS INO_CMTM_SECD_NM
                  , LLF_SECD
                  , F_CDVAL_INQIRE('LLF_SECD', LLF_SECD) AS LLF_SECD_NM                             
                  , CNTN_SECD
                  , F_CDVAL_INQIRE('CNTN_SECD', CNTN_SECD) AS CNTN_SECD_NM                   
                  , MLF_SECD
                  , F_CDVAL_INQIRE('MLF_SECD', MLF_SECD) AS MLF_SECD_NM                         
                  , SLF_SECD
                  , F_CDVAL_INQIRE('SLF_SECD', SLF_SECD) AS SLF_SECD_NM                          
                  , CP_NO
                  , TEL_NO
                  , EMAL
           FROM V_MM_ESTM_CMTM_MST
        WHERE 1=1
            AND NVL(HNDW_REG_YN, 'N') = 'Y'
            AND DEL_AT = #{P_DEL_AT, jdbcType=VARCHAR}
            AND INO_CMTM_SECD = #{P_INO_CMTM_SECD, jdbcType=VARCHAR}
            AND ESTM_CMTM_REG_DEPT_NO = #{P_DEPT_NO, jdbcType=VARCHAR}
    )
    WHERE 1=1
        <if test='P_ESTM_CMTM_NM_S != null and P_ESTM_CMTM_NM_S != "" '>
        AND ESTM_CMTM_NM LIKE '%'|| #{P_ESTM_CMTM_NM_S} || '%'
        </if>

        <if test='P_ESTM_CMTM_NO_NOT_IN_LIST != null and P_ESTM_CMTM_NO_NOT_IN_LIST.size != 0 '>
        AND ESTM_CMTM_NO NOT IN
            <foreach separator="," item="estm_cmtm_no" collection="P_ESTM_CMTM_NO_NOT_IN_LIST" open="(" close=")">
            #{estm_cmtm_no, jdbcType=VARCHAR}
            </foreach>
        </if>
        
        AND ESTM_CMTM_NO IN (SELECT ESTM_CMTM_NO FROM T_ESTM_CMTM_SPHE_MPG WHERE 1=1 AND ESTM_SPHE_SECD = #{P_ESTM_SPHE_SECD})
        
    ORDER BY ESTM_CMTM_NM
	</select>
	
	<resultMap id="BBS_CNTN" type="dataEntity">
    	<result property="BBS_CNTN" column="BBS_CNTN" jdbcType="CLOB" javaType="java.lang.String" />
    </resultMap>
    
    <select id="selectNoticeList" resultType="dataEntity">
        <include refid="ComPgng.pgngHeaderClause"/>
        SELECT * FROM (
		    <include refid="selectNotiList"/>
			<include refid="selectNotiListWhere"/>
			ORDER BY REG_DT DESC
		) T1
		WHERE 1 = 1
		<include refid="ComPgng.pgngTailClause"/>   
    </select>
 
    <select id="selectNoticeListTotCnt" resultType="int" > 
		SELECT COUNT(1) FROM ( 
			<include refid="selectNotiList"/>
			<include refid="selectNotiListWhere"/>
		) T1
		WHERE 1 = 1
	</select>
	
 	<sql id="selectNotiList">
        SELECT BBS_SECD
                  , BBS_SN
                  , TTL_NM
                  , BBS_PWD
                  , INQ_CNT
                  , BBS_PSCD
                  , NTC_YN
                  , USE_YN
                  , RQRD_YN
                  , PPUP_YN
                  , PPUP_STDE
                  , PPUP_ENDE
                  , FILE_GRP_NO
                  , REGR_ID
                  , REGR_NM
                  , REG_DT
                  , MODR_ID
                  , MODR_NM
                  , MOD_DT
                  , CONN_IP
                  , DEL_AT
                  , ( SELECT COUNT(*) FROM T_MM_FILE_MST WHERE FILE_GRP_NO = MST.FILE_GRP_NO AND DEL_AT = 'N') AS FILE_CNT
        FROM T_BA_MST MST
	</sql>
	
	<sql id="selectNotiListWhere">
		<where>
            AND DEL_AT = #{P_DEL_AT, jdbcType=VARCHAR}
            <if test='P_BBS_SECD != null and P_BBS_SECD != "" '>
	            AND BBS_SECD = #{P_BBS_SECD, jdbcType=VARCHAR}
            </if>
            <if test='P_TTL_NM_S != null and P_TTL_NM_S != "" '>
                AND TTL_NM LIKE '%'|| #{P_TTL_NM_S} || '%' 
            </if>
            <if test='P_REGR_NM_S != null and P_REGR_NM_S != "" '>
                AND REGR_NM LIKE '%'|| #{P_REGR_NM_S}||'%'
            </if>
            <!-- <if test='P_MOD_DT_BEGIN_S != null and P_MOD_DT_BEGIN_S != "" '>
                AND TO_CHAR(TO_DATE(MOD_DT, 'yyyyMMddHH24miss'), 'yyyyMMdd') >= #{P_MOD_DT_BEGIN_S}
            </if>
            <if test='P_MOD_DT_END_S != null and P_MOD_DT_END_S != "" '>
                AND TO_CHAR(TO_DATE(MOD_DT, 'yyyyMMddHH24miss'), 'yyyyMMdd') &lt;= #{P_MOD_DT_END_S}
            </if> -->
		</where>
	</sql>
	
	<select id="selectNoticeDetail" resultType="dataEntity" resultMap="BBS_CNTN">
		SELECT BBS_SECD
                  , BBS_SN
                  , TTL_NM
                  , BBS_CNTN
                  , BBS_PWD
                  , INQ_CNT
                  , BBS_PSCD
                  , NTC_YN
                  , USE_YN
                  , RQRD_YN
                  , PPUP_YN
                  , PPUP_STDE
                  , PPUP_ENDE
                  , FILE_GRP_NO
                  , REGR_ID
                  , REGR_NM
                  , REG_DT
                  , MODR_ID
                  , MODR_NM
                  , MOD_DT
                  , CONN_IP
                  , DEL_AT
                  , ( SELECT EMAL_ADDR FROM T_MM_USER_MST M WHERE M.USR_ID = A.REGR_ID ) AS EMAL_ADDR
		FROM T_BA_MST A
		WHERE BBS_SECD = #{P_BBS_SECD, jdbcType=VARCHAR}
		AND BBS_SN = #{P_BBS_SN, jdbcType=VARCHAR}
	</select>
	
	
	<select id="selectEstmSeProcdDetail" resultType="dataEntity">
        SELECT ROWNUM AS RNUM
                  , PROCD.ESTM_SECD
                  , PROCD.ESTM_PROCD_SEQ
                  , PROCD.ESTM_PROCD_SECD
                  , F_CDVAL_INQIRE('ESTM_PROCD_SECD', PROCD.ESTM_PROCD_SECD) AS ESTM_PROCD_SECD_NM
                  , PROCD.ESTM_PROCD_SENM
                  , PROCD.ESTM_PROCD_NM
                  , PROCD.ESTM_FRM_NO
                  , PROCD.ESTM_FRM_NM
                  , PROCD.ESTR_SECD
           FROM T_ESTM_SE_PROCD PROCD
        WHERE 1=1
            AND PROCD.ESTM_SECD = #{P_ESTM_SECD}
            <if test='P_ESTM_PROCD_SEQ != null and P_ESTM_PROCD_SEQ != "" '>
            AND PROCD.ESTM_PROCD_SEQ = #{P_ESTM_PROCD_SEQ}
            </if>
	</select>
	
	<delete id="deleteEstmFrmItemDelt">
		DELETE FROM T_ESTM_PROCD_FRM
		WHERE	1=1
		AND		ESTM_NO = #{P_ESTM_NO, jdbcType=VARCHAR}
		AND		ESTM_PROCD_SEQ = #{P_ESTM_PROCD_SEQ, jdbcType=VARCHAR}
	</delete>
	
	<!-- 평가서식항목 마스터 -->
	<insert id="insertEstmFrmMstItemRegist">
        INSERT INTO T_ESTM_PROCD_FRM (
		                    ESTM_NO
		                  , ESTM_PROCD_SEQ
		                  , ESTM_ITEM_NO
		                  , ESTM_ITEM_NM
		                  , ESTM_ITEM_DSMK
		                  , ESTM_ITEM_DESC
		                  , ESTM_MTHD_SECD
		                 <include refid="ComRegr.RegrColumnClause"/>
        ) VALUES (
		                    #{P_ESTM_NO, jdbcType=VARCHAR}
		                  , #{P_ESTM_PROCD_SEQ, jdbcType=VARCHAR}
		                  , #{P_ESTM_ITEM_NO, jdbcType=VARCHAR}
		                  , #{P_ESTM_ITEM_NM, jdbcType=VARCHAR}
		                  , #{P_ESTM_ITEM_DSMK, jdbcType=VARCHAR}
		                  , #{P_ESTM_ITEM_DESC, jdbcType=VARCHAR}
		                  , #{P_ESTM_MTHD_SECD, jdbcType=VARCHAR}
		                  <include refid="ComRegr.RegrValueClause"/>
		)
	</insert>
	
	
	<select id="selectEstmCmtmAllList" resultType="dataEntity">
	    SELECT ESTM_NO
                  , ESTM_CMTM_NO
                  , ESTM_CMTM_SLCT_NGR
                  , PRIO_RNK
                  , SLCT_YN
                  , ESTM_CMTM_NM
                  , INO_CMTM_SECD
                  , INO_CMTM_SENM
                  , F_CDVAL_INQIRE('INO_CMTM_SECD', INO_CMTM_SECD) AS INO_CMTM_SECD_NM
                  , ESTM_SPHE_SECD
                  , ESTM_SPHE_SENM
                  , ( SELECT ESTM_SPHE_SENM FROM T_ESTM_SPHE_MST A WHERE CM.ESTM_SPHE_SECD = A.ESTM_SPHE_SECD ) AS ESTM_SPHE_SECD_NM
                  , LLF_SECD
                  , LLF_NM
                  , F_CDVAL_INQIRE('LLF_SECD', LLF_SECD) AS LLF_SECD_NM
                  , CNTN_SECD
                  , CNTN_NM
                  , F_CDVAL_INQIRE('CNTN_SECD', CNTN_SECD) AS CNTN_SECD_NM
                  , MLF_SECD
                  , MLF_NM
                  , F_CDVAL_INQIRE('MLF_SECD', MLF_SECD) AS MLF_SECD_NM
                  , SLF_SECD
                  , SLF_NM
                  , F_CDVAL_INQIRE('SLF_SECD', SLF_SECD) AS SLF_SECD_NM
                  , CP_NO
                  , EMAL
                  , LINE_TYP_SECD
                  , LINE_TYP_SENM
                  , F_CDVAL_INQIRE('LINE_TYP_SECD', LINE_TYP_SECD) AS LINE_TYP_SECD_NM
                  , SLCT_SECD
                  , SLCT_SENM
                  , F_CDVAL_INQIRE('SLCT_SECD', SLCT_SECD) AS SLCT_SECD_NM
                  , RMK
                  , RSDN_NO
                  <!-- , SUBSTR(RSDN_NO, 0, 6) AS RSDN_NO_1
                  , SUBSTR(RSDN_NO, 7, 1) AS RSDN_NO_2
                  , SUBSTR(RSDN_NO, 7) AS RSDN_NO_3 -->
                  , SUBSTR(damo_decrypt_var_b64(RSDN_NO), 0, 6) AS RSDN_NO_1
                  , SUBSTR(damo_decrypt_var_b64(RSDN_NO), 7, 1) AS RSDN_NO_2
                  , SUBSTR(damo_decrypt_var_b64(RSDN_NO), 7) AS RSDN_NO_3
                  , SVY_OPNN
                  , FILE_GRP_NO
                  , ASSESS_DT
                  , ASSESS_SEQ
                  , YM
                  , HLDF_YN
                  <include refid="ComRegr.selectColumnClause"/>
           FROM T_ESTM_CMTM CM
        WHERE 1=1
            AND ESTM_NO = #{P_ESTM_NO, jdbcType=VARCHAR}
        ORDER BY TO_NUMBER(ESTM_CMTM_SLCT_NGR), TO_NUMBER(PRIO_RNK)
	</select>
	
	<resultMap id="cmpnyIntrcn" type="dataEntity">
    	<result property="CMPNY_INTRCN" column="CMPNY_INTRCN" jdbcType="CLOB" javaType="java.lang.String" />
    	<result property="CMPNY_INTRCN_ENG" column="CMPNY_INTRCN_ENG" jdbcType="CLOB" javaType="java.lang.String" />
    </resultMap>
    
	<select id="selectEstmObjImstarsMainDetail" resultType="dataEntity" resultMap="cmpnyIntrcn">
        SELECT 
				BSNM_REGIST_NO
				, CMPNY_NM
				, CMPNY_ENGNM
				, CMPNY_TY_CODE
				, CPR_REGIST_NO
				, FOND_ON
				, CAPL
				, TOT_ASSETS_AM
				, NVL(EMPLY_CO, 0) AS EMPLY_CO
				, INDUTY
				, BIZCND
				, PRDLC_SE_CODE
				, (SELECT CODE_NM FROM CMMN_CODE WHERE SEQ = PRDLC_SE_CODE) AS PRDLC_SE_NM
				, PRDCTN_MTHD_SE_CODE  
				, (SELECT CODE_NM FROM CMMN_CODE WHERE SEQ = PRDCTN_MTHD_SE_CODE) AS PRDCTN_MTHD_SE_NM
				, HMPG_ADRES
				, CMPNY_TLPHON_NO
				, CMPNY_FAX_NO
				, CMPNY_ZIP
				, CMPNY_ADRES
				, CMPNY_DETAIL_ADRES
				, FCTRY_ZIP
				, FCTRY_ADRES
				, FCTRY_DETAIL_ADRES
				, RPRSNTV_NM
				, RPRSNTV_TLPHON_NO
				, RPRSNTV_MOBLPHON_NO
				, RPRSNTV_EMAIL
				, CMPNY_INTRCN
				, CMPNY_INTRCN_ENG
				, GOODS_INTRCN
				, LOGO_FILE_ID
				, ATCH_FILE_ID
				, OTHBC_AT
				, USE_AT
				, UNCOLECT_AT
				, REGIST_DT
				, REGISTER_ID
				, CHANGE_DT
				, CHANGER_ID
				, MARKT_EMPLY_CO
				, RPRSNTV_SEX
				, ATMC_UPDT_AT
				, SPCSS_CODE
				, CNTC_REGIST_DT
				, IMSELER_USE_INTEN_AT
				, OTR_SELER_SYS_USE_AT
				, OTR_SELER_SYS_CODE
				, OTR_SELER_SYS_ETC_NM
				, MRO_AT
				, TAXT_TY_CODE
				, CMPNY_SCALE_CODE
         FROM V_CMPNY_INFO
         WHERE 1=1
         AND BSNM_REGIST_NO = #{P_BSNM_REGIST_NO, jdbcType=VARCHAR}
	</select>
	
	<select id="selectEstmObjImstarsCmpnySelng" resultType="dataEntity">
        SELECT 
				BSNM_REGIST_NO
				, SELNG_YY
				, SELNG_AM
				, SELNG_AM_DOLLAR
				, REGIST_DT
				, REGISTER_ID
				, CHANGE_DT
				, CHANGER_ID
         FROM CMPNY_SELNG
         WHERE 1=1
         AND BSNM_REGIST_NO = #{P_BSNM_REGIST_NO, jdbcType=VARCHAR}
	</select>
	
	<select id="selectEstmCmtmCrtrMstDetail" resultType="dataEntity">
        SELECT 
				CRTR_NO
				, CRTR_NM
				, CHNL_NM
				, NVL(SSCRT_CNT, 0) AS SSCRT_CNT
				, CHNL_ADDR
				, CP_NO
				, TEL_NO
				, EMAL
           <include refid="ComRegr.selectColumnClause"/>
           FROM T_ESTM_CRTR_MST
         WHERE 1=1
         AND CRTR_NO = #{P_ESTM_OBJ_PE_NO, jdbcType=VARCHAR}
         AND DEL_AT = 'N'
	</select>
	
	
	
	<select id="selectEstmObjImstarsDetailView" resultType="dataEntity">
        SELECT GOODSNO
                  , CTGRYNO
                  , GOODSNM
                  , MODLNM
                  , BRANDNM
                  , MAKRCODE
                  , REPLACE(MAKRCODE,'-','') AS BSNM_REGIST_NO
                  , CMPNYNM
                  , STNDRD
                  , ORGPLCECODE
                  , ( SELECT CODE_NM FROM CMMN_CODE CD WHERE ORGPLCECODE = CD.SEQ ) AS ORGPLCECODE_NM
                  , CNSMRPC
                  , FCTRYDOPC
                  , MNFCTURDE
                  , DISTBGRNTYMONTHCO
                  , GOODSDC
                  , GOODSSFE
                  , REPRSNTIMAGEFILEID
                  , ( SELECT WON_FILE_NM FROM CMMN_FILEDETAILINFO FI WHERE FI.FILE_ID = REPRSNTIMAGEFILEID AND ROWNUM = 1 ) AS REPRSNTIMAGEFILEID_FILE_NM
                  , IMAGEFILEID
                  , DETAILFILEID
                  , ( SELECT WON_FILE_NM FROM CMMN_FILEDETAILINFO FI WHERE FI.FILE_ID = DETAILFILEID AND ROWNUM = 1 ) AS DETAILFILEID_FILE_NM
                  , REGISTDT
                  , REGISTERID
                  , EXCAGOODSAT
                  , EXCAGOODSATTEXT
                  , OTHBCAT
                  , STDIZGOODSAT
                  , REPRSNTAT
                  , GRAD
                  , ROOTCTGRYNM
                  , PATHNAME
                  , PATHNAME1
                  , PATHNAME2
                  , PATHNAME3
           FROM V_ESTM_ANNC_TPI_INT2
         WHERE 1=1
             AND GOODSNO = #{P_GOODSNO}
	</select>
	
	<select id="selectEstmObjImstarsCmpnyFileView" resultType="dataEntity">
        SELECT FILE_ID
				, FILE_SN
				, REPLACE(FILE_STRE_COURS, '/gfsdata/imstars/upload') AS FILE_STRE_COURS
				, STRE_FILE_NM
				, WON_FILE_NM
				, FILE_EXTSN
	       		, ( SELECT CODE_NM FROM CMMN_CODE CM WHERE CM.SEQ = FILE_CN ) AS FILE_NM
				, FILE_CN
				, FILE_MG
				, REGIST_DT
				, REGISTER_ID
				, CHANGE_DT
				, CHANGER_ID
				, USE_AT
           FROM CMMN_FILEDETAILINFO
        WHERE 1=1
        <if test='P_FILE_ID != null and P_FILE_ID != "" '>
			AND FILE_ID = #{P_FILE_ID}
		</if>
        <if test='P_FILE_SN != null and P_FILE_SN != "" '>
			AND FILE_SN = #{P_FILE_SN}
		</if>
        <if test='P_FILE_CN != null and P_FILE_CN != "" '>
			AND FILE_CN = #{P_FILE_CN}
		</if>
		   AND USE_AT = 'Y'
        ORDER BY FILE_CN
	</select>
	
	<select id="selectEstmObjImstarsFileView" resultType="dataEntity">
        SELECT REQST_NO
                  , FILE_ID
                  , FILE_SN
                  , REPLACE(FILE_STRE_COURS, '/gfsdata/imstars/upload') AS FILE_STRE_COURS
                  , STRE_FILE_NM
                  , WON_FILE_NM
                  , FILE_EXTSN
                  , FILE_CN
                  , ( SELECT CODE_NM FROM CMMN_CODE CM WHERE TO_CHAR(SEQ) = INFO.FILE_CN ) AS FILE_NM
                  , FILE_MG
                  , REGIST_DT
                  , REGISTER_ID
                  , CHANGE_DT
                  , CHANGER_ID
                  , USE_AT
           FROM SPORT_REQST_FILEDETAILINFO INFO
        WHERE 1=1
        <if test='P_REQST_NO != null and P_REQST_NO != "" '>
			AND REQST_NO = #{P_REQST_NO}
		</if>
        <if test='P_FILE_ID != null and P_FILE_ID != "" '>
			AND FILE_ID = #{P_FILE_ID}
		</if>
        <if test='P_FILE_SN != null and P_FILE_SN != "" '>
			AND FILE_SN = #{P_FILE_SN}
		</if>
        <if test='P_FILE_CN != null and P_FILE_CN != "" '>
			AND FILE_CN = #{P_FILE_CN}
		</if>
		   AND USE_AT = 'Y'
        ORDER BY FILE_CN
	</select>
	
	
	
	<select id="selectEstmObjImstarsDetailFileList" resultType="dataEntity">
        SELECT FILE_ID
                  , FILE_SN
                  , REPLACE(FILE_STRE_COURS, '/gfsdata/imstars/upload') AS FILE_STRE_COURS
                  , STRE_FILE_NM
                  , WON_FILE_NM
                  , FILE_EXTSN
                  , FILE_CN
                  , FILE_MG
                  , REGIST_DT
                  , REGISTER_ID
                  , CHANGE_DT
                  , CHANGER_ID
                  , USE_AT
           FROM CMMN_FILEDETAILINFO
        WHERE 1=1
            AND FILE_ID = #{P_FILE_ID}
        <if test='P_FILE_SN != null and P_FILE_SN != "" '>
			AND FILE_SN = #{P_FILE_SN}
		</if>
        <if test='P_FILE_CN != null and P_FILE_CN != "" '>
			AND FILE_CN = #{P_FILE_CN}
		</if>
		   AND USE_AT = 'Y'
        ORDER BY FILE_SN
	</select> 
	
	
	<select id="selectEstmObjImstarsGoodsCrtfcList" resultType="dataEntity">
        SELECT GOODS_NO
                  , CRTFC_NO
                  , CRTFC_NM
                  , ISSU_ENGN
                  , ACQS_DE
                  , CRTFC_CN
                  , AHRZT_FILE_ID
                  , REGIST_DT
                  , REGISTER_ID
                  , CHANGE_DT
                  , CHANGER_ID
                  , GOODS_CRTFC_CODE
                  , AHRZT_NO
           FROM GOODS_CRTFC
        WHERE 1=1
            AND GOODS_NO = #{P_GOODSNO}
        ORDER BY CRTFC_NO
	</select>
	
	
	<select id="selectEstmObjImstarsGoodssSelngList" resultType="dataEntity">
	    SELECT GOODS_NO
                  , SELNG_YY
                  , SELNG_AM
                  , SELNG_AM_DOLLAR
                  , REGIST_DT
                  , REGISTER_ID
                  , CHANGE_DT
                  , CHANGER_ID
           FROM GOODS_SELNG
        WHERE 1=1
            AND GOODS_NO = #{P_GOODSNO}
        ORDER BY SELNG_YY DESC
	</select>
	
	<select id="selectEstmCmtmSvyFrmItemList" resultType="dataEntity">
        SELECT FRM.ESTM_NO
                  , FRM.ESTM_ITEM_NO
                  , FRM.ESTM_ITEM_NM
                  , FRM.ESTM_ITEM_DSMK
                  , REPLACE(FRM.ESTM_ITEM_DESC, CHR(13)||CHR(10), <![CDATA[ '<br>'  ]]>) AS ESTM_ITEM_DESC
                  , FRM.ESTM_MTHD_SECD
                  , F_CDVAL_INQIRE('ESTM_MTHD_SECD', FRM.ESTM_MTHD_SECD) AS ESTM_MTHD_SECD_NM
                  , NVL(SCR.ESTM_SCR,0) AS ESTM_SCR
                  , NVL(SCR.REAL_VAL,0) AS REAL_VAL
                  , SCR.RMK
                  , SCR.ESTM_CMTM_NO
                  , FRM.REGR_ID
                  , FRM.REGR_NM
                  , FRM.REG_DT
                  , FRM.MODR_ID
                  , FRM.MODR_NM
                  , FRM.MOD_DT
                  , FRM.CONN_IP
                  , FRM.DEL_AT
           FROM T_ESTM_SVY_FRM FRM
                  , ( SELECT ESTM_NO
                                , ESTM_ITEM_NO
                                , ESTM_CMTM_NO
                                , ESTM_SCR
                                , REAL_VAL
                                , RMK
                         FROM T_ESTM_SVY_SCR
                      WHERE ESTM_CMTM_NO = #{P_ESTM_CMTM_NO, jdbcType=VARCHAR}
        	  ) SCR
        WHERE 1=1
            AND FRM.ESTM_NO = SCR.ESTM_NO(+)
            AND FRM.ESTM_ITEM_NO = SCR.ESTM_ITEM_NO(+)
            AND FRM.ESTM_NO = #{P_ESTM_NO, jdbcType=VARCHAR}
            AND FRM.ESTM_CMTM_NO = #{P_ESTM_CMTM_NO, jdbcType=VARCHAR}
        ORDER BY ESTM_ITEM_NO ASC
	</select>
	
	
	
	<insert id="mergeIntoEstmSvyScr">
        MERGE INTO T_ESTM_SVY_SCR
		USING DUAL
		     ON ( ESTM_NO = #{P_ESTM_NO, jdbcType=VARCHAR} 
		     AND ESTM_CMTM_NO = #{P_ESTM_CMTM_NO, jdbcType=VARCHAR}
		     AND	ESTM_ITEM_NO = #{P_ESTM_ITEM_NO, jdbcType=VARCHAR}
		     )
		WHEN MATCHED THEN
			UPDATE	
			SET ESTM_SCR = #{P_ESTM_SCR, jdbcType=VARCHAR}
			     , REAL_VAL = #{P_REAL_VAL, jdbcType=VARCHAR}
			     , MOD_DT = TO_CHAR(SYSDATE, 'yyyyMMddHH24MISS')
			     <include refid="ComRegr.ModrSetClause"/>
		WHEN NOT MATCHED THEN
			INSERT ( ESTM_NO
			            , ESTM_CMTM_NO
			            , ESTM_ITEM_NO
			            , ESTM_SCR
			            , REAL_VAL
			            , RMK
			            <include refid="ComRegr.RegrColumnClause"/>
			) VALUES ( 
			              #{P_ESTM_NO, jdbcType=VARCHAR}
			            , #{P_ESTM_CMTM_NO, jdbcType=VARCHAR}
			            , #{P_ESTM_ITEM_NO, jdbcType=VARCHAR}
			            , #{P_ESTM_SCR, jdbcType=VARCHAR}
			            , #{P_REAL_VAL, jdbcType=VARCHAR}
			            , #{P_RMK , jdbcType=VARCHAR}
			            <include refid="ComRegr.RegrValueClause"/>
			)
	</insert>
	
	
</mapper>	